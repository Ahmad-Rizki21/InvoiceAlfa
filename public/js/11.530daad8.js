(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{1576:function(e,t,a){"use strict";a("2d76")},"2a32":function(e,t,a){"use strict";a("c46b")},"2d76":function(e,t,a){},"9ef9":function(e,t,a){"use strict";a.r(t);a("ac1f"),a("841c"),a("4de4"),a("d3b7"),a("d81d"),a("b0c0"),a("e260"),a("ddb0");var n=function(){var e=this,t=e._self._c;return t("q-page",{staticClass:"page-reports"},[t("portal",{attrs:{to:"app-breadcrumbs"}},[t("breadcrumbs")],1),t("portal",{attrs:{to:"app-toolbar"}},[t("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"menu"},on:{click:function(t){return e.$store.dispatch("app/toggleSidebar")}}}),t("q-toolbar-title",[e._v("\n      "+e._s(e.$t("Report"))+"\n    ")]),t("div",{staticClass:"sep"}),e.$auth.can("export.report")?t("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"system_update_alt",loading:e.isExporting}}):e._e()],1),t("div",{staticClass:"page-header"},[t("q-toolbar-title",[e._v(e._s(e.$t("Report")))]),t("div",{staticClass:"sep"}),e.$auth.can("export.report")?t("q-btn",{staticClass:"q-ml-sm q-btn-lg btn-page-reports-export",attrs:{color:"secondary",loading:e.isExporting,icon:"system_update_alt"},on:{click:e.onFormEntryExport}},[t("span",{staticClass:"q-ml-sm"},[e._v(e._s(e.$t("Export")))])]):e._e()],1),t("div",{staticClass:"page-body"},[t("q-card",[t("q-toolbar",[t("div",{staticClass:"col col-md-9 col-lg-8"},[t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col col-md-4 col-lg-3"},[t("q-input",{staticClass:"input-quick-search-applicable_month",attrs:{label:e.$t("Period"),autocomplete:"off","stack-label":"",dense:"",readonly:""},model:{value:e.search.applicable_month.formattedValue,callback:function(t){e.$set(e.search.applicable_month,"formattedValue",t)},expression:"search.applicable_month.formattedValue"}},[t("q-menu",[t("monthpicker",{attrs:{mask:"DD/MM/YYYY","emit-immediately":!1,color:"primary"},on:{input:e.onApplicableMonthChangeDebounced},model:{value:e.search.applicable_month.value,callback:function(t){e.$set(e.search.applicable_month,"value",t)},expression:"search.applicable_month.value"}},[t("div",{staticClass:"row items-center justify-end"},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)],1),t("div",{staticClass:"col col-md-4 col-lg-3"},[t("autocomplete-customer",{staticClass:"input-quick-search-customer_id",attrs:{label:e.$t("Search {entity}",{entity:e.$t("customer")}),"stack-label":"",dense:"",clearable:"","clear-icon":"close"},on:{input:function(t){return e.onRequest()}},model:{value:e.search.customer_id.value,callback:function(t){e.$set(e.search.customer_id,"value",t)},expression:"search.customer_id.value"}})],1)])]),t("div",{staticClass:"col col-md-3 col-lg-2 q-ml-auto row"},[e._e(),t("q-btn",{staticClass:"q-ml-auto btn-datatable-view-columns",attrs:{unelevated:"",color:"default",size:"sm",padding:"xs",icon:"view_column"}},[t("q-tooltip",[e._v("\n              "+e._s(e.$t("View Column"))+"\n            ")]),t("q-menu",[t("div",{staticClass:"row no-wrap q-pa-md",staticStyle:{"min-width":"200px"}},[t("div",{staticClass:"column"},[t("q-option-group",{staticStyle:{"margin-left":"-16px"},attrs:{options:e.columns.map((function(e){return{label:e.realLabel||e.label,value:e.name}})).filter((function(e){return e.label})),type:"checkbox",size:"xs"},model:{value:e.visibleColumns,callback:function(t){e.visibleColumns=t},expression:"visibleColumns"}})],1)])])],1)],1)]),t("q-table",{attrs:{data:e.entries,columns:e.columns,"visible-columns":e.visibleColumns,loading:e.isLoading,pagination:e.pagination,"binary-state-sort":"","row-key":"id"},on:{"update:pagination":function(t){e.pagination=t},request:e.onRequest},scopedSlots:e._u([{key:"body-cell-id",fn:function(a){var n=a.rowIndex;return[t("q-td",[e._v(e._s(n+1))])]}},{key:"body-cell-address",fn:function(a){var n=a.row;return[t("q-td",{staticClass:"overflow-ellipsis",staticStyle:{"max-width":"10rem"}},[t("span",{attrs:{title:n.address}},[e._v(e._s(n.address))])])]}},{key:"body-cell-status",fn:function(e){var a=e.row;return[t("q-td",{staticClass:"text-center"},[t("q-icon",{staticClass:"q-mr-lg",attrs:{name:a.status?"check":"close"}})],1)]}},{key:"body-cell-action",fn:function(a){var n=a.row;return[t("q-td",{staticClass:"text-right"},[t("q-btn",{attrs:{unelevated:"",color:"default",size:"sm",padding:"xs",icon:"visibility"},on:{click:function(t){return t.preventDefault(),e.onView(n)}}},[t("q-tooltip",[e._v("\n                "+e._s(e.$t("View"))+"\n              ")])],1),t("q-btn",{staticClass:"q-ml-xs",attrs:{unelevated:"",color:"default",size:"sm",padding:"xs",icon:"edit"},on:{click:function(t){return t.preventDefault(),e.onEdit(n)}}},[t("q-tooltip",[e._v("\n                "+e._s(e.$t("Edit"))+"\n              ")])],1),t("q-btn",{staticClass:"q-ml-xs",attrs:{unelevated:"",color:"default",size:"sm",padding:"xs",icon:"delete"},on:{click:function(t){return t.preventDefault(),e.onDelete(n)}}},[t("q-tooltip",[e._v("\n                "+e._s(e.$t("Delete"))+"\n              ")])],1)],1)]}},{key:"no-data",fn:function(a){var n=a.icon,r=a.message,s=a.filter;return[t("div",{staticClass:"full-width row flex-center text-center q-gutter-sm"},[t("q-icon",{attrs:{size:"2em",name:s?"filter_b_and_w":n}}),t("span",[e._v("\n              "+e._s(r)+"\n            ")])],1)]}}])})],1)],1),t("q-dialog",{model:{value:e.isAdvancedSearchVisible,callback:function(t){e.isAdvancedSearchVisible=t},expression:"isAdvancedSearchVisible"}},[t("q-card",{staticClass:"q-pa-sm"},[t("q-form",{on:{submit:function(t){return t.preventDefault(),e.onAdvancedSearchSubmit.apply(null,arguments)}}},[t("q-card-section",{staticClass:"q-pb-xs"},[t("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("Search")))])]),t("q-card-section",{staticClass:"q-mb-md"},[t("q-input",{attrs:{label:e.$t("Search {entity}",{entity:e.$t("name or location")}),outlined:"",dense:""},model:{value:e.advancedSearch.fuzzy.value,callback:function(t){e.$set(e.advancedSearch.fuzzy,"value",t)},expression:"advancedSearch.fuzzy.value"}})],1),t("q-separator"),t("q-card-actions",{attrs:{align:"right"}},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:e.$t("Cancel"),flat:""}}),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{type:"submit",label:e.$t("Search"),color:"default",unelevated:""}})],1)],1)],1)],1),t("q-dialog",{attrs:{persistent:!e.isFormEntryReadonly},model:{value:e.isFormEntryVisible,callback:function(t){e.isFormEntryVisible=t},expression:"isFormEntryVisible"}},[t("form-entry",{attrs:{entry:e.formEntry,readonly:e.isFormEntryReadonly,loading:e.isLoading},on:{success:e.onFormEntrySuccess,cancel:e.onFormEntryCancel}})],1),e.exportUrl?t("a",{ref:"exportHiddenLink",staticStyle:{display:"none"},attrs:{href:e.exportUrl,download:""}}):e._e()],1)},r=[],s=a("ded3"),l=a.n(s),o=a("7ec2"),i=a.n(o),c=a("c973"),u=a.n(c),d=(a("b64b"),a("e9c4"),a("bd4c")),m=function(){var e=this,t=e._self._c;return t("q-card",{staticClass:"form-entry q-pa-sm",class:{readonly:e.readonly}},[t("q-form",{ref:"form",staticClass:"q-gutter-md",attrs:{greedy:""},on:{submit:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[e.readonly?e._e():t("div",{staticClass:"text-h6 q-px-md q-pt-sm"},[e._v("\n      "+e._s(e.$t("".concat(e.isCreate?"Create":"Update"," {entity}"),{entity:e.$t("Branch")}))+"\n    ")]),t("q-card-section",{staticClass:"q-mb-md"},[t("div",{staticClass:"q-mb-md text-subtitle text-weight-bold"},[e._v(e._s(e.$t("Details")))]),t("div",{staticClass:"row q-col-gutter-sm"},[t("div",{staticClass:"col-xs-12 col-md-8"},[t("q-input",{attrs:{label:e.$t("Location Name")+"*",filled:!e.readonly,borderless:e.readonly,readonly:e.readonly,dense:"",name:"location",autocomplete:"off",rules:e.rules.location,error:!!e.errors.location,"error-message":e.errors.location},model:{value:e.formEntry.location,callback:function(t){e.$set(e.formEntry,"location",t)},expression:"formEntry.location"}})],1),t("div",{staticClass:"col-xs-12 col-md-4"},[t("q-input",{attrs:{label:e.$t("Terminal Name")+"*",filled:!e.readonly,borderless:e.readonly,readonly:e.readonly,name:"terminal_name",autocomplete:"off",dense:"",rules:e.rules.terminal_name,error:!!e.errors.terminal_name,"error-message":e.errors.terminal_name},model:{value:e.formEntry.terminal_name,callback:function(t){e.$set(e.formEntry,"terminal_name",t)},expression:"formEntry.terminal_name"}})],1),t("div",{staticClass:"col-xs-12 col-md-4"},[t("q-input",{attrs:{label:e.$t("SLA"),filled:!e.readonly,borderless:e.readonly,readonly:e.readonly,name:"sla",mask:"###",suffix:"%",autocomplete:"off",dense:"",rules:e.rules.sla,error:!!e.errors.sla,"error-message":e.errors.sla},model:{value:e.formEntry.sla,callback:function(t){e.$set(e.formEntry,"sla",t)},expression:"formEntry.sla"}})],1),t("div",{staticClass:"col-xs-12 col-sm-5 col-md-4"},[t("q-input",{attrs:{label:e.$t("Online At"),filled:!e.readonly,name:"online_at",autocomplete:"off",borderless:e.readonly,readonly:e.readonly,dense:"",rules:e.rules.online_at,error:!!e.errors.online_at,"error-message":e.errors.online_at,mask:"##/##/####",hint:e.$utils.isDateValid(e.formEntry.online_at)?void 0:e.$t("Valid format: DD/MM/YYYY")},scopedSlots:e._u([{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[t("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[t("q-date",{attrs:{minimal:"",mask:"DD/MM/YYYY"},model:{value:e.formEntry.online_at,callback:function(t){e.$set(e.formEntry,"online_at",t)},expression:"formEntry.online_at"}},[t("div",{staticClass:"row items-center justify-end"},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.formEntry.online_at,callback:function(t){e.$set(e.formEntry,"online_at",t)},expression:"formEntry.online_at"}})],1),t("div",{staticClass:"col-xs-12 col-md-8 col-lg-7"},[t("div",{staticClass:"q-mb-md text-subtitle text-weight-bold"},[e._v(e._s(e.$t("Coordinate")))]),t("div",{staticClass:"row q-col-gutter-sm"},[t("div",{staticClass:"col-xs-12 col-md-6"},[t("q-input",{staticClass:"no-arrows",attrs:{label:e.$t("Latitude"),filled:!e.readonly,type:"number",step:"any",name:"latitude",autocomplete:"off",borderless:e.readonly,readonly:e.readonly,dense:"",rules:e.rules.latitude,error:!!e.errors.latitude,"error-message":e.errors.latitude},model:{value:e.formEntry.latitude,callback:function(t){e.$set(e.formEntry,"latitude",t)},expression:"formEntry.latitude"}})],1),t("div",{staticClass:"col-xs-12 col-md-6"},[t("q-input",{staticClass:"no-arrows",attrs:{label:e.$t("Longitude"),filled:!e.readonly,type:"number",step:"any",name:"longitude",autocomplete:"off",borderless:e.readonly,readonly:e.readonly,dense:"",rules:e.rules.longitude,error:!!e.errors.longitude,"error-message":e.errors.longitude},model:{value:e.formEntry.longitude,callback:function(t){e.$set(e.formEntry,"longitude",t)},expression:"formEntry.longitude"}})],1)])]),t("div",{staticClass:"col-xs-12"},[t("div",{staticClass:"q-mb-md text-subtitle text-weight-bold"},[e._v(e._s(e.$t("PIC")))]),t("div",{staticClass:"row q-col-gutter-sm"},[t("div",{staticClass:"col-xs-12 col-md-7"},[t("q-input",{attrs:{label:e.$t("PIC Name"),filled:!e.readonly,rows:"1",name:"pic_name",autocomplete:"off",borderless:e.readonly,readonly:e.readonly,dense:"",rules:e.rules.pic_name,error:!!e.errors.pic_name,"error-message":e.errors.pic_name},model:{value:e.formEntry.pic_name,callback:function(t){e.$set(e.formEntry,"pic_name",t)},expression:"formEntry.pic_name"}})],1),t("div",{staticClass:"col-xs-12 col-md-5"},[t("q-input",{attrs:{label:e.$t("PIC Phone Number"),filled:!e.readonly,rows:"1",name:"pic_phone_number",autocomplete:"off",borderless:e.readonly,readonly:e.readonly,dense:"",rules:e.rules.pic_phone_number,error:!!e.errors.pic_phone_number,"error-message":e.errors.pic_phone_number},model:{value:e.formEntry.pic_phone_number,callback:function(t){e.$set(e.formEntry,"pic_phone_number",t)},expression:"formEntry.pic_phone_number"}})],1)])]),e.readonly?e._e():t("div",{staticClass:"col-xs-12"},[t("q-toggle",{attrs:{label:e.formEntry.status?e.$t("Active"):e.$t("Inactive"),name:"status"},model:{value:e.formEntry.status,callback:function(t){e.$set(e.formEntry,"status",t)},expression:"formEntry.status"}})],1),e.readonly?[t("div",{staticClass:"col-xs-12"},[t("q-input",{attrs:{value:e.formEntry.status?e.$t("Active"):e.$t("Inactive"),label:e.$t("Status"),borderless:"",readonly:"",dense:""}})],1),t("div",{staticClass:"col-xs-12"},[t("q-input",{attrs:{value:e.formEntry.created_at,label:e.$t("Created At"),borderless:"",readonly:"",dense:""}})],1)]:e._e()],2)]),t("q-separator"),e.readonly?t("q-card-actions",{attrs:{align:"right"}},[t("q-btn",{attrs:{label:e.$t("Close"),flat:"",disable:e.loading||e.isLoading},on:{click:e.cancel}})],1):t("q-card-actions",{attrs:{align:"right"}},[t("q-btn",{attrs:{label:e.$t("Cancel"),flat:"",disable:e.loading||e.isLoading},on:{click:e.cancel}}),t("q-btn",{staticClass:"q-px-lg",attrs:{type:"submit",label:e.$t("".concat(e.isCreate?"Create":"Save")),color:e.isCreate?"positive":"primary",loading:e.loading||e.isLoading,unelevated:""}})],1)],1)],1)},p=[],f=(a("cb29"),a("5319"),a("00b4"),a("99af"),{terminal_name:null,location:null,mttr_hour:null,mttr_minute:null,total_time_hour:null,total_time_minute:null,online_at:null,latitude:null,longitude:null,pic_name:null,pic_phone_number:null,pic_phone_number2:null,status:1}),b={name:"FormEntry",props:{loading:Boolean,closable:{type:Boolean,default:!0},entry:{type:Object,default:function(){return f}},readonly:{type:Boolean,default:!1}},data:function(){var e=this;return{formEntry:f,isLoading:!1,rules:{terminal_name:[function(t){return!!t||e.$t("{field} is required",{field:e.$t("Terminal name")})}],location:[function(t){return!!t||e.$t("{field} is required",{field:e.$t("Location")})}],online_at:[function(t){return!t||!!t&&e.$utils.isDateValid(t)||e.$t("{field} is invalid",{field:e.$t("Online at")})}],latitude:[],longitude:[],pic_name:[],pic_phone_number:[],sla:[]},errors:f}},computed:{isCreate:function(){return!this.formEntry.id}},watch:{entry:{immediate:!0,handler:function(e){var t=this;this.$nextTick((function(){t.fill(e)}))}}},methods:{fill:function(e){e=l()(l()({},f),e),e.created_at&&(e.created_at=d["b"].formatDate(e.created_at,"DD MMM YYYY HH:mm")),e.online_at&&(e.online_at=d["b"].formatDate(e.online_at,"DD/MM/YYYY")),e.status=Boolean(parseInt(e.status,10)),this.formEntry=e,this.$refs.form.resetValidation()},onSubmit:function(){var e=this;return u()(i()().mark((function t(){var a,n,r,s,o,c;return i()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.loading&&!e.isLoading){t.next=2;break}return t.abrupt("return");case 2:if(!e.readonly){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.$refs.form.validate();case 6:if(a=t.sent,a){t.next=9;break}return t.abrupt("return");case 9:return n=l()({},e.formEntry),n.status=n.status?1:0,e.$utils.isDateValid(n.online_at)&&(n.online_at=d["b"].formatDate(d["b"].extractDate(n.online_at,"DD/MM/YYYY"),"YYYY-MM-DD")),delete n.mttr_hour,delete n.mttr_minute,delete n.total_time_hour,delete n.total_time_minute,e.isLoading=!0,t.prev=17,r=n.id?"/v1/branches/".concat(n.id):"/v1/branches",s=n.id?"patch":"post",t.next=22,e.$api[s](r,n);case 22:o=t.sent,c=o.data,"success"===c.status&&e.$emit("success"),c.message?e.$q.notify({message:c.message}):"success"===c.status?e.$q.notify({message:e.$t("{entity} saved",{entity:e.$t("Branch")})}):e.$t("Failed to save {entity}",{entity:e.$t("branch")}),t.next=31;break;case 28:t.prev=28,t.t0=t["catch"](17),t.t0.validation?e.errors=l()(l()({},f),t.t0.validation.errors):e.$q.notify(t.t0);case 31:e.isLoading=!1;case 32:case"end":return t.stop()}}),t,null,[[17,28]])})))()},cancel:function(){this.loading||this.isLoading||this.$emit("cancel")},onDoubleInputChildKeydown:function(e){var t=String(e.target.value).replace(/[^0-9]/g,""),a=/^[0-9]$/i.test(e.key);a&&(t="".concat(t).concat(e.key)),(t>59||String(t).length>2)&&a&&e.preventDefault()}}},h=b,y=(a("2a32"),a("2877")),v=a("f09f"),_=a("0378"),g=a("a370"),x=a("27f9"),$=a("0016"),q=a("7cbe"),C=a("52ee"),k=a("9c40"),w=a("9564"),E=a("eb85"),S=a("4b7e"),D=a("7f67"),Y=a("eebe"),T=a.n(Y),F=Object(y["a"])(h,m,p,!1,null,"5afd2c03",null),M=F.exports;T()(F,"components",{QCard:v["a"],QForm:_["a"],QCardSection:g["a"],QInput:x["a"],QIcon:$["a"],QPopupProxy:q["a"],QDate:C["a"],QBtn:k["a"],QToggle:w["a"],QSeparator:E["a"],QCardActions:S["a"]}),T()(F,"directives",{ClosePopup:D["a"]});var L=a("05c2"),V={name:"PageReport",components:{FormEntry:M},meta:function(){return{title:this.$t("Report")+" - "+this.$t("Web Console")}},breadcrumbs:function(){return["home",{text:this.$t("Report")}]},mixins:[L["a"]],data:function(){var e=this,t={fuzzy:{value:null},applicable_month:{value:new Date,formattedValue:null},customer_id:{value:null}};return{entries:[],columns:[{name:"id",field:"id",label:"#",realLabel:this.$t("ID"),align:"left",style:"max-width: 25px",headerClasses:"table-header-id",classes:"table-cell-id",sortable:!0},{name:"customer",field:function(e){return e.customer?e.customer.name:null},format:function(e){return e||"-"},label:this.$t("Customer"),align:"left",sortable:!1},{name:"address",field:"address",label:this.$t("Address"),align:"left",style:"max-width: 15em",headerStyle:"max-width: 15em",headerClasses:"table-header-address",classes:"table-cell-address",sortable:!0},{name:"terminal_name",field:"terminal_name",label:this.$t("Terminal Name"),align:"left",style:"max-width: 15em",headerClasses:"table-header-terminal_name",classes:"table-cell-terminal_name",sortable:!0},{name:"online_at",field:"online_at",label:this.$t("Online At"),align:"left",format:function(e){return e?d["b"].formatDate(e,"DD/MM/YYYY"):""},style:"max-width: 100px",sortable:!1},{name:"sla",field:function(e){return e.customer?e.customer.sla:null},label:this.$t("SLA"),align:"left",format:function(e){return e?"".concat(e,"%"):""},style:"max-width: 100px",sortable:!1},{name:"mttr_hour",field:"mttr_hour",label:this.$t("MTTR (Hour)"),align:"left",format:function(t){return e.$utils.formatSecondsToTime(t,!1,!1)},sortable:!1},{name:"total_time",field:"total_time",label:this.$t("Total Time (Month)"),align:"left",format:function(t){return e.$utils.formatSecondsToTime(t,!1,!1)},sortable:!0},{name:"down_time_customer",field:"down_time_customer",label:this.$t("Down Time Customer"),align:"left",format:function(t){return e.$utils.formatSecondsToTime(t,!1,!1)},sortable:!1},{name:"down_time_provider",field:"down_time_provider",label:this.$t("Down Time AJNUSA"),align:"left",format:function(t){return e.$utils.formatSecondsToTime(t,!1,!1)},sortable:!1},{name:"begin_clock",field:"begin_clock",label:this.$t("Begin Clock"),align:"left",format:function(t){return e.$utils.formatSecondsToTime(t,!1,!1)},sortable:!1},{name:"pending_clock",field:"pending_clock",label:this.$t("Stop Clock"),align:"left",format:function(t){return e.$utils.formatSecondsToTime(t,!1,!1)},sortable:!1},{name:"mttr",field:"mttr",format:function(t){return e.$utils.formatSecondsToTime(t,!1,!1)},label:this.$t("MTTR"),align:"left",sortable:!1},{name:"total_tickets",field:"total_tickets",label:this.$t("Frequency"),align:"left",style:"max-width: 100px",sortable:!1},{name:"availability",field:"availability",format:function(t){return t?e.$utils.formatFloatDecimal(t)+"%":""},label:this.$t("Availability"),align:"left",style:"max-width: 100px",sortable:!1}],visibleColumns:["id","customer","address","terminal_name","online_at","mttr_hour","down_time_customer","down_time_provider","mttr","total_time","begin_clock","pending_clock","sla","availability","total_tickets"],isLoading:!1,isExporting:!1,isAdvancedSearchVisible:!1,isFormEntryVisible:!1,isFormEntryReadonly:!1,formEntry:{},pagination:{sortBy:"id",descending:!1,page:1,rowsPerPage:15,rowsNumber:0},search:t,advancedSearch:t,exportUrl:null,onApplicableMonthChangeDebounced:this.$utils.debounce(this.onRequest,500)}},watch:{"search.applicable_month.value":{immediate:!0,handler:function(e){e&&(this.search.applicable_month.formattedValue=e?d["b"].formatDate(e,"MMMM YYYY"):null)}}},mounted:function(){var e=this;return u()(i()().mark((function t(){return i()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.onRequest();case 2:return t.next=4,e.$nextTick();case 4:case"end":return t.stop()}}),t)})))()},methods:{onApplicableMonthChange:function(){var e=this;this.$nextTick((function(){e.onRequest()}))},onRequest:function(e){var t=this;return u()(i()().mark((function a(){var n,r,s;return i()().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t.isLoading){a.next=2;break}return a.abrupt("return");case 2:return e||(e={pagination:t.pagination}),t.isLoading=!0,n={table_pagination:l()({},e.pagination||{}),table_search:l()({},t.search)},n.table_search.applicable_month.value&&(n.table_search.applicable_month={value:d["b"].formatDate(n.table_search.applicable_month.value,"YYYY-MM-15")}),a.prev=6,a.next=9,t.$api.get("/v1/reports",{params:n});case 9:r=a.sent,s=r.data,"success"===s.status&&(t.entries=s.data.reports,t.pagination=l()(l()({},t.pagination),s.pagination)),a.next=18;break;case 14:a.prev=14,a.t0=a["catch"](6),console.error(a.t0),t.$q.notify(a.t0);case 18:t.isLoading=!1;case 19:case"end":return a.stop()}}),a,null,[[6,14]])})))()},onAdvancedSearch:function(){this.advancedSearch=JSON.parse(JSON.stringify(this.search)),this.isAdvancedSearchVisible=!0},onAdvancedSearchSubmit:function(){this.search=this.$utils.merge({},this.advancedSearch),this.onRequest(),this.isAdvancedSearchVisible=!1},onFormEntryCreate:function(){this.formEntry={},this.isFormEntryReadonly=!1,this.isFormEntryVisible=!0},onFormEntrySuccess:function(){this.isFormEntryReadonly=!1,this.isFormEntryVisible=!1,this.onRequest()},onFormEntryCancel:function(){this.isFormEntryReadonly=!1,this.isFormEntryVisible=!1},onView:function(e){this.formEntry=l()({},e),this.isFormEntryReadonly=!0,this.isFormEntryVisible=!0},onEdit:function(e){this.formEntry=l()({},e),this.isFormEntryReadonly=!1,this.isFormEntryVisible=!0},onDelete:function(e){var t=this;this.isLoading||this.$q.dialog({title:this.$t("Confirm"),message:this.$t("Are you sure want to delete this {entity}?",{entity:this.$t("report")}),cancel:{label:this.$t("Cancel"),color:"dark",flat:!0},ok:{label:this.$t("Yes"),color:"primary",unelevated:!0,flat:!0,class:"text-weight-bold"},persistent:!0}).onOk(u()(i()().mark((function a(){var n,r;return i()().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$api.delete("/v1/reports/".concat(e.id));case 3:n=a.sent,r=n.data,r.message?(t.$q.notify({message:r.message}),t.onRequest()):"success"===r.status?(t.$q.notify({message:t.$t("{entity} deleted",{entity:t.$t("Report")})}),t.onRequest()):t.$t("Failed to delete {entity}",{entity:t.$t("report")}),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),t.$q.notify(a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))).onCancel((function(){t.isLoading=!1}))},onFormEntryExport:function(e){var t=this;return u()(i()().mark((function a(){var n,r,s;return i()().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t.isLoading&&!t.isExporting){a.next=2;break}return a.abrupt("return",!1);case 2:return e||(e={pagination:t.pagination}),t.isLoading=!0,t.isExporting=!0,n={table_pagination:l()({},e.pagination||{}),table_search:l()({},t.search),ext:e.ext||"xlsx"},n.table_search.applicable_month.value&&(n.table_search.applicable_month={value:d["b"].formatDate(n.table_search.applicable_month.value,"YYYY-MM-15")}),a.next=9,t.$store.dispatch("auth/getToken");case 9:return r=a.sent,s=r.access_token,n.api_token=s,t.$cookies.set("api_token",s,{expires:1}),t.exportUrl=t.$api.getUri({url:"/v1/reports/export",params:t.$api.defaults.paramsTransformer(n)}),console.log(t.exportUrl),a.next=17,t.$utils.delay(100);case 17:return t.$refs.exportHiddenLink.click(),a.next=20,t.$utils.delay(2e3);case 20:t.isLoading=!1,t.isExporting=!1,t.exportUrl=null;case 23:case"end":return a.stop()}}),a)})))()}}},Q=V,A=(a("1576"),a("9989")),R=a("6ac5"),z=a("65c6"),P=a("4e73"),I=a("05c0"),N=a("9f0a"),B=a("eaac"),O=a("db86"),U=a("24e8"),j=Object(y["a"])(Q,n,r,!1,null,null,null);t["default"]=j.exports;T()(j,"components",{QPage:A["a"],QBtn:k["a"],QToolbarTitle:R["a"],QCard:v["a"],QToolbar:z["a"],QInput:x["a"],QMenu:P["a"],QTooltip:I["a"],QOptionGroup:N["a"],QTable:B["a"],QTd:O["a"],QIcon:$["a"],QDialog:U["a"],QForm:_["a"],QCardSection:g["a"],QSeparator:E["a"],QCardActions:S["a"]}),T()(j,"directives",{ClosePopup:D["a"]})},c46b:function(e,t,a){}}]);