(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{"19a2":function(e,t,n){},"26d4":function(e,t,n){"use strict";n("19a2")},d28f:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e._self._c;return e.addable||!e.empty?t("div",{directives:[{name:"ripple",rawName:"v-ripple",value:!e.readonly,expression:"!readonly"},{name:"show",rawName:"v-show",value:!(e.readonly&&e.empty),expression:"!(readonly && empty)"}],staticClass:"upload-field",class:{readonly:e.readonly,empty:e.empty},on:{click:e.onWrapperClick}},[e.preview||e.internalPreview?["string"===typeof e.url?t("a",{staticClass:"attachment-image",attrs:{href:e.url,target:"_blank"}},[t("img",{attrs:{src:e.preview||e.internalPreview}})]):t("div",{staticClass:"attachment-image"},[t("img",{attrs:{src:e.preview||e.internalPreview}})])]:t("div",{staticClass:"icon-add",on:{click:e.onClick}},[t("q-icon",{attrs:{name:"add_a_photo"}})],1),!e.readonly&&!e.empty&&!e.url||e.editable&&!e.empty?t("div",{staticClass:"action"},[t("q-btn",{attrs:{flat:"",icon:"cancel",ripple:!1},on:{click:function(t){return t.preventDefault(),e.onDelete.apply(null,arguments)}}})],1):e._e(),e.uploading?t("div",{staticClass:"upload-loading"},[t("q-spinner-dots",{attrs:{color:"primary",size:"2em"}})],1):e._e(),t("q-file",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"file",attrs:{filled:"",rounded:"",label:"Restricted to images","max-file-size":e.maxFileSize,accept:e.acceptRules},on:{input:e.onChange,rejected:e.onRejected},model:{value:e.internalValue,callback:function(t){e.internalValue=t},expression:"internalValue"}})],2):e._e()},a=[],r=n("7ec2"),l=n.n(r),s=n("c973"),o=n.n(s),c=(n("a9e3"),n("d3b7"),n("e6cf"),n("e260"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),n("88a7"),n("271a"),n("5494"),n("99af"),{name:"UploadField",props:{value:{type:[String,Object,Array,File],default:function(){return null}},url:{type:[String,File],default:null},preview:{type:String,required:!1},initial:{type:String,required:!1},addable:{type:Boolean,default:!0},editable:{type:Boolean,default:!1},accept:{type:String,required:!1},readonly:{type:Boolean,default:!1},size:{type:String,required:!1},maxFileSize:{type:Number},minDimension:{type:Number},uploading:{type:Boolean}},data:function(){return{internalSize:"64px",internalValue:null,internalPreview:null,errorMessages:[]}},computed:{acceptRules:function(){return this.accept?this.accept:"image/png, image/jpeg, image/jpg, image/svg+xml, image/heic, image/heif"},avatarSize:function(){return this.size||this.internalSize},empty:function(){return!(this.preview||this.internalPreview)}},watch:{preview:function(e,t){e!==t&&e!==this.internalPreview&&(this.internalPreview=e,e||(this.internalValue=null))}},methods:{onWrapperClick:function(e){this.url&&this.$emit("click",e)},onClick:function(){if(!this.readonly){var e=this.$refs.file;document.getElementById(e.inputAttrs.id).click()}},onChange:function(e){var t=this;return o()(l()().mark((function n(){var i;return l()().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.errorMessages=[],e&&e.type){n.next=4;break}return t.internalValue=null,n.abrupt("return");case 4:return n.next=6,t.checkDimension(e);case 6:if(i=n.sent,i){n.next=9;break}return n.abrupt("return");case 9:return n.next=11,t.generateFilePreview(e);case 11:t.internalPreview=n.sent,t.internalValue=e,t.$emit("update:preview",t.internalPreview),t.$emit("input",e);case 15:case"end":return n.stop()}}),n)})))()},generateFilePreview:function(e){return new Promise((function(t){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsDataURL(e)}))},checkDimension:function(e){var t=this;return o()(l()().mark((function n(){var i;return l()().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.validateDimension(e);case 2:return i=n.sent,i||t.onRejected([{failedPropValidation:"max-dimension",file:e}]),n.abrupt("return",i);case 5:case"end":return n.stop()}}),n)})))()},validateDimension:function(e,t){var n=this;return o()(l()().mark((function i(){var a;return l()().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a=window.URL||window.webkitURL,a&&a.createObjectURL&&"Image"in window){i.next=3;break}return i.abrupt("return",Promise.resolve(!0));case 3:return t=t||n.minDimension,i.abrupt("return",new Promise((function(n){try{var i=new Image,r=a.createObjectURL(e);i.onload=function(){var e=i.width,l=i.height;a.revokeObjectURL(r),n(e>=t&&l>=t)},i.src=r}catch(l){n(!1);try{a.revokeObjectURL(objectUrl)}catch(s){}}})));case 5:case"end":return i.stop()}}),i)})))()},onRejected:function(e){var t,n=this.$t("Selected file is not accepted. Please use another one.");e&&e[0]&&e[0].failedPropValidation&&(t=e[0].failedPropValidation,"accept"===t?n=this.$t("The selected file is unsupported. Supported files: {entity}",{entity:".png, .jpg, .jpeg, .svg, .heic"}):"max-file-size"===t?n=this.$t("File size exceeds maximum limit: {max}",{max:this.$utils.humanStorageSize(this.maxFileSize)}):"max-dimension"===t&&(n=this.$t("Image resolution must be greater than {resolution}",{resolution:"".concat(this.minDimension,"x").concat(this.minDimension)}))),this.$q.notify({type:"negative",message:n})},onDelete:function(){this.internalValue=null,this.internalPreview=null,this.$emit("deleted")}}}),u=c,p=(n("26d4"),n("2877")),d=n("0016"),m=n("9c40"),f=n("8380"),h=n("cb32"),v=n("7d53"),w=n("8572"),g=n("714f"),y=n("eebe"),b=n.n(y),x=Object(p["a"])(u,i,a,!1,null,null,null);t["default"]=x.exports;b()(x,"components",{QIcon:d["a"],QBtn:m["a"],QSpinnerDots:f["a"],QAvatar:h["a"],QFile:v["a"],QField:w["a"]}),b()(x,"directives",{Ripple:g["a"]})}}]);