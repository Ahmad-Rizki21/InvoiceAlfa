(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[41],{"0e7e":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e._self._c;return t("form-print-preview",{attrs:{invoice:e.invoice,receipt:e.receipt,stores:e.stores,"template-settings":e.templateSettings}})},r=[],s=n("7ec2"),c=n.n(s),o=n("c973"),a=n.n(o),u=(n("14d9"),n("602a")),v={name:"PageInvoiceShow",components:{FormPrintPreview:u["a"]},meta:function(){return{title:this.$t("Invoice")}},breadcrumbs:function(){var e=["home",{text:this.$t("Invoices"),to:"/invoices"}];return this.invoice&&this.invoice.invoice_no&&e.push({text:this.invoice.invoice_no}),e},data:function(){return{isLoading:!1,invoice:{invoice_no:null},receipt:{receipt_no:null},stores:[],formInvoiceUpdated:{},templateSettings:{}}},created:function(){var e=this;return a()(c()().mark((function t(){return c()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.requestSettings();case 2:return t.next=4,e.requestInvoice();case 4:case"end":return t.stop()}}),t)})))()},methods:{requestInvoice:function(){var e=this;return a()(c()().mark((function t(){var n,i,r;return c()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isLoading){t.next=2;break}return t.abrupt("return");case 2:return e.isLoading=!0,n={edit:1,includes:"invoiceServices"},t.prev=4,t.next=7,e.$api.get("/v1/invoices/".concat(e.$route.params.id),{params:n});case 7:i=t.sent,r=i.data,"success"===r.status&&(e.invoice=r.data.invoice,e.receipt=r.data.invoice,"n"!==e.$route.query.store&&e.requestStores()),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](4),e.$q.notify(t.t0);case 15:e.isLoading=!1,window.doPrinting&&e.$nextTick((function(){setTimeout((function(){window.print(),window.doPrint&&setTimeout((function(){window.doPrint()}),500)}),100)}));case 17:case"end":return t.stop()}}),t,null,[[4,12]])})))()},requestStores:function(){var e=this;return a()(c()().mark((function t(){var n,i,r;return c()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.invoice.distribution_center_id){t.next=2;break}return t.abrupt("return");case 2:return n={distribution_center_id:e.invoice.distribution_center_id},t.prev=3,t.next=6,e.$api.get("/v1/stores",{params:n});case 6:i=t.sent,r=i.data,"success"===r.status&&(e.stores=r.data.stores),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](3),e.$q.notify(t.t0);case 14:case"end":return t.stop()}}),t,null,[[3,11]])})))()},requestSettings:function(){var e=this;return a()(c()().mark((function t(){var n,i;return c()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$api.get("/v1/settings");case 3:n=t.sent,i=n.data,"success"===i.status&&(e.templateSettings=i.data.settings),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$q.notify(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},onSuccess:function(e){},onPrint:function(){this.isFormPrintPreviewVisible=!1},onPreview:function(){this.isFormPrintPreviewVisible=!0}}},p=v,d=n("2877"),f=Object(d["a"])(p,i,r,!1,null,null,null);t["default"]=f.exports}}]);