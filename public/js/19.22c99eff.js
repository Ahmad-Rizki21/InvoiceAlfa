(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{5350:function(t,a,e){"use strict";e.r(a);e("b0c0");var s=function(){var t=this,a=t._self._c;return a("q-page",{staticClass:"page-account page-account-account"},[a("portal",{attrs:{to:"app-breadcrumbs"}},[a("breadcrumbs")],1),a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-3"},[a("q-list",{attrs:{bordered:"",separator:""}},[a("q-item",{attrs:{clickable:"",to:"/account/profile",exact:""}},[a("q-item-section",[a("q-item-label",[t._v(t._s(t.$t("Account")))])],1)],1),a("q-item",{attrs:{clickable:"",to:"/account/password",exact:""}},[a("q-item-section",[a("q-item-label",[t._v(t._s(t.$t("Change Password")))])],1)],1)],1)],1),a("div",{staticClass:"col-7"},[a("transition",{attrs:{"enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut",mode:"out-in"}},["password"===t.$route.params.tab?a("q-card",{key:"password",attrs:{flat:!t.$q.dark.mode,borderless:!t.$q.dark.mode}},[a("q-card-section",[a("div",{staticClass:"q-pb-lg"},[a("h3",{staticClass:"text-body1 text-weight-bold q-ma-none"},[t._v(t._s(t.$t("Change Password")))])]),a("q-form",{staticClass:"q-gutter-md",on:{submit:t.onPasswordSubmit,reset:t.onPasswordReset}},[a("q-input",{attrs:{filled:"",label:t.$t("New Password"),"lazy-rules":"",type:"password",rules:t.rules.password},model:{value:t.formPassword.password,callback:function(a){t.$set(t.formPassword,"password",a)},expression:"formPassword.password"}}),a("q-input",{attrs:{filled:"",label:t.$t("New Password Confirmation"),"lazy-rules":"",type:"password",rules:t.rules.password_confirmation,disabled:""},model:{value:t.formPassword.password_confirmation,callback:function(a){t.$set(t.formPassword,"password_confirmation",a)},expression:"formPassword.password_confirmation"}}),a("div",[a("q-btn",{attrs:{label:t.$t("Submit"),type:"submit",color:"primary",unelevated:""}}),a("q-btn",{staticClass:"q-ml-sm",attrs:{label:t.$t("Reset"),type:"reset",color:"primary",flat:""}})],1)],1)],1)],1):a("q-card",{key:"default",attrs:{flat:!t.$q.dark.mode,borderless:!t.$q.dark.mode}},[a("q-card-section",[a("div",{staticClass:"q-pb-lg"},[a("h3",{staticClass:"text-body1 text-weight-bold q-ma-none"},[t._v(t._s(t.$t("Update Account")))])]),a("q-form",{staticClass:"q-gutter-md",on:{submit:t.onAccountSubmit,reset:t.onAccountReset}},[a("avatar-field",{attrs:{initial:t.$utils.initials(t.$auth.user.name||t.$auth.user.username||t.$auth.user.email),readonly:""},model:{value:t.formAvatar.avatar,callback:function(a){t.$set(t.formAvatar,"avatar",a)},expression:"formAvatar.avatar"}}),a("q-input",{attrs:{filled:"",label:t.$t("Name"),"lazy-rules":"",rules:t.rules.name},model:{value:t.formAccount.name,callback:function(a){t.$set(t.formAccount,"name",a)},expression:"formAccount.name"}}),a("q-input",{attrs:{filled:"",label:t.$t("Username"),"lazy-rules":"",rules:t.rules.username},model:{value:t.formAccount.username,callback:function(a){t.$set(t.formAccount,"username",a)},expression:"formAccount.username"}}),a("q-input",{attrs:{filled:"",label:t.$t("Email"),"lazy-rules":"",rules:t.rules.email},model:{value:t.formAccount.email,callback:function(a){t.$set(t.formAccount,"email",a)},expression:"formAccount.email"}}),a("div",[a("q-btn",{attrs:{label:t.$t("Save"),type:"submit",color:"primary",unelevated:""}}),a("q-btn",{staticClass:"q-ml-sm",attrs:{label:t.$t("Reset"),type:"reset",color:"primary",flat:""}})],1)],1)],1)],1)],1)],1)])],1)},r=[],n=e("7ec2"),o=e.n(n),i=e("c973"),c=e.n(i),l=(e("ac1f"),e("00b4"),{name:"PageAccount",meta:function(){var t=this.$t("Update Account");return"password"===this.$route.params.tab&&(t=this.$t("Change Password")),{title:t+" - "+this.$t("Web Console")}},breadcrumbs:function(){var t=this.$t("Update Account");return"password"===this.$route.params.tab&&(t=this.$t("Change Password")),["home",{text:this.$t("My Account")},{text:t}]},data:function(){var t=this,a=this.$auth.user;return{formAccount:{name:a.name,username:a.username,email:a.email},formPassword:{password:null,password_confirmation:null},formAvatar:{avatar:a.avatar},rules:{name:[function(a){return!!a||t.$t("{field} is required",{field:t.$t("Name")})}],email:[function(a){return!!a||t.$t("{field} is required",{field:t.$t("Email")})}],username:[function(a){return!!a&&String(a).length>3||t.$t("{field} must be at least {length} characters",{field:t.$t("Username"),length:3})},function(a){return!!a&&String(a).length<=30||t.$t("{field} may not be greater than {max}.",{field:t.$t("Username"),max:30})},function(a){return!!a&&/^[a-zA-Z0-9_\.]+$/.test(String(a))||t.$t("{field} can only contain alphanumeric characters, underscores, and periods",{field:t.$t("Username")})}],password:[function(a){return!!a||t.$t("{field} is required",{field:t.$t("Password")})},function(a){return a&&a.length>=6||t.$t("{field} must be at least {length} characters",{field:t.$t("Password"),length:6})}],password_confirmation:[function(a){return!!a||t.$t("{field} is required",{field:t.$t("Password confirmation")})},function(a){return a===t.formPassword.password||t.$t("{field} does not match",{field:t.$t("Password confirmation")})}]}}},methods:{onAccountSubmit:function(){var t=this;return c()(o()().mark((function a(){var e,s,r;return o()().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e={name:t.formAccount.name,username:t.formAccount.username,email:t.formAccount.email},a.next=4,t.$api.patch("/v1/auth/me",e);case 4:if(s=a.sent,r=s.data,"success"!==r.status){a.next=10;break}return a.next=9,t.$utils.delay(500);case 9:t.$store.dispatch("auth/fetch");case 10:t.$q.notify({message:t.$t("success"===r.status?"Your account successfully updated":"Failed to update your account")}),a.next=16;break;case 13:a.prev=13,a.t0=a["catch"](0),t.$q.notify(a.t0);case 16:case"end":return a.stop()}}),a,null,[[0,13]])})))()},onAccountReset:function(){var t=this.$auth.user;this.formAccount={name:t.name,email:t.email}},onPasswordSubmit:function(){var t=this;return c()(o()().mark((function a(){var e,s,r;return o()().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e={password:t.formPassword.password,password_confirmation:t.formPassword.password_confirmation},a.next=4,t.$api.patch("/v1/auth/me",e);case 4:if(s=a.sent,r=s.data,"success"!==r.status){a.next=10;break}return a.next=9,t.$utils.delay(500);case 9:t.$store.dispatch("auth/fetch");case 10:t.$q.notify({message:t.$t("success"===r.status?"Your password successfully updated":"Failed to update your password")}),a.next=16;break;case 13:a.prev=13,a.t0=a["catch"](0),t.$q.notify(a.t0);case 16:case"end":return a.stop()}}),a,null,[[0,13]])})))()},onPasswordReset:function(){this.$auth.user;this.formPassword={password:null,password_confirmation:null}}}}),u=l,d=(e("e9f6"),e("2877")),m=e("9989"),f=e("1c1c"),p=e("66e5"),w=e("4074"),$=e("0170"),b=e("f09f"),h=e("a370"),v=e("0378"),q=e("27f9"),y=e("9c40"),g=e("eebe"),A=e.n(g),x=Object(d["a"])(u,s,r,!1,null,null,null);a["default"]=x.exports;A()(x,"components",{QPage:m["a"],QList:f["a"],QItem:p["a"],QItemSection:w["a"],QItemLabel:$["a"],QCard:b["a"],QCardSection:h["a"],QForm:v["a"],QInput:q["a"],QBtn:y["a"]})},e9f6:function(t,a,e){"use strict";e("eb3a")},eb3a:function(t,a,e){}}]);