(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"4b2f":function(e,t,n){"use strict";n("8932")},"521c":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("q-page",{staticClass:"page-invoices page-invoice-single page-invoice-show"},[t("portal",{attrs:{to:"app-breadcrumbs"}},[t("breadcrumbs")],1),t("portal",{attrs:{to:"app-toolbar"}},[t("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"arrow_back",to:"/invoices"}}),t("q-toolbar-title",[e.isCreate?[e._v("\n        "+e._s(e.$t("Create New {entity}",{entity:e.$t("Invoice")}))+"\n      ")]:[e._v("\n        "+e._s(e.$t("Invoice"))+"\n      ")]],2),t("div",{staticClass:"sep"}),e.$auth.can("create.invoice")?t("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"add"}}):e._e()],1),t("div",{staticClass:"page-header"},[t("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"arrow_back",to:"/invoices"}}),t("q-toolbar-title",[e.isCreate?[e._v("\n        "+e._s(e.$t("Create New {entity}",{entity:e.$t("Invoice")}))+"\n      ")]:[e._v("\n        "+e._s(e.$t("Invoice"))+"\n      ")]],2),t("div",{staticClass:"sep"}),e.formInvoice.invoice_no?t("invoice-status-chip",{staticClass:"q-btn-lg q-mr-md chip-page-invoices-single-invoice-status",attrs:{invoice:e.formInvoice}}):e._e(),e.isCreate&&e.formInvoice.invoice_no?t("q-btn",{staticClass:"q-btn-lg q-ml-sm btn-page-invoices-single-settings",attrs:{flat:"",padding:"sm",icon:"settings",disable:e.isLoading},on:{click:function(t){e.isFormTemplateSettingsVisible=!0}}},[t("q-tooltip",[e._v("\n        "+e._s(e.$t("Template Settings"))+"\n      ")])],1):e._e(),e.isCreate&&e.formInvoice.invoice_no?t("q-btn",{staticClass:"q-btn-lg q-ml-sm btn-page-invoices-single-preview",attrs:{color:"default",split:"",icon:"plagiarism",disable:e.isLoading},on:{click:e.onPreview}},[e._v("\n      "+e._s(e.$t("Preview"))+"\n    ")]):!e.isCreate&&e.formInvoice.invoice_no?t("q-btn-dropdown",{staticClass:"q-btn-lg q-ml-sm btn-page-invoices-single-print",attrs:{color:"default",split:"",icon:"print",disable:e.isLoading||e.isSyncing},on:{click:e.onPrint},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"q-ml-xs"},[e._v(e._s(e.$t("Print")))])]},proxy:!0}])},[t("q-list",[t("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"justify-center items-center",attrs:{clickable:"",disable:e.isSyncing},on:{click:e.onPreview}},[e._v("\n          "+e._s(e.$t("Preview"))+"\n        ")])],1)],1):e._e(),e.formInvoice.invoice_no&&e.isCreate?[t("q-btn",{staticClass:"q-btn-lg q-ml-sm btn-page-invoices-single-save",attrs:{color:"primary",icon:"check",disable:e.isLoading||e.isSyncing},on:{click:e.onSave}},[t("span",{staticClass:"q-ml-xs"},[e._v(e._s(e.$t("Save")))]),e._v("\n        "+e._s(e.isSyncing?"...":"")+"\n      ")])]:e.formInvoice.invoice_no?[e.isEditable?t("q-btn-dropdown",{staticClass:"q-btn-lg q-ml-sm btn-page-invoices-single-save",attrs:{split:"",color:"primary",icon:"check",disable:e.isLoading||e.isSyncing},on:{click:e.onSave},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"q-ml-xs"},[e._v(e._s(e.$t("Save")))]),e._v("\n          "+e._s(e.isSyncing?"...":"")+"\n        ")]},proxy:!0}],null,!1,1298575039)},[t("q-list",[t("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"justify-center items-center",attrs:{clickable:"",disable:e.isSyncing},on:{click:function(t){e.isEditable=!1}}},[e._v("\n            "+e._s(e.$t("Cancel Editing"))+"\n          ")])],1)],1):t("q-btn-dropdown",{staticClass:"q-btn-lg q-ml-sm btn-page-invoices-single-edit",attrs:{split:"",color:"secondary",icon:"edit",disable:e.isLoading||e.isSyncing},on:{click:function(t){e.isEditable=!0}},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"q-ml-xs"},[e._v(e._s(e.$t("Edit")))]),e._v("\n          "+e._s(e.isSyncing?"...":"")+"\n        ")]},proxy:!0}])},[t("q-list",[t("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"justify-center items-center",attrs:{clickable:"",disable:e.isSyncing},on:{click:e.onDelete}},[e._v("\n            "+e._s(e.$t("Delete"))+"\n          ")])],1)],1)]:e._e()],2),e.isCreate?e._e():t("div",{staticClass:"page-body page-body-form-page"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-xs-12"},[t("form-page",{ref:"formPage",attrs:{entry:e.formInvoice,fetching:e.isFetching,editable:e.isEditable,readonly:!e.isEditable},on:{"update:editable":function(t){e.isEditable=t},success:e.onSuccess,deleted:e.onDeleted}})],1)])]),t("div",{staticClass:"page-body"},[e.isCreate?t("div",{staticClass:"row q-mb-lg"},[t("div",{staticClass:"col-xs-12"},[t("div",{staticClass:"page-action q-pa-sm q-gutter-md"},[t("div",{staticClass:"page-action-customer"},[t("div",{staticClass:"page-action-customer-inner"},[t("autocomplete-distribution-center",{directives:[{name:"show",rawName:"v-show",value:"distribution_center"===e.customerToFind,expression:"customerToFind === 'distribution_center'"}],attrs:{readonly:e.isLoading||e.isSyncing,filled:"",label:e.$t("Select {entity}",{entity:e.$t("distribution center")})},model:{value:e.entry.distribution_center_id,callback:function(t){e.$set(e.entry,"distribution_center_id",t)},expression:"entry.distribution_center_id"}}),t("autocomplete-franchise",{directives:[{name:"show",rawName:"v-show",value:"franchise"===e.customerToFind,expression:"customerToFind === 'franchise'"}],attrs:{readonly:e.isLoading||e.isSyncing,filled:"",label:e.$t("Select {entity}",{entity:e.$t("franchise")})},model:{value:e.entry.franchise_id,callback:function(t){e.$set(e.entry,"franchise_id",t)},expression:"entry.franchise_id"}}),t("q-option-group",{attrs:{options:[{label:e.$t("Distribution Center"),value:"distribution_center"},{label:e.$t("Franchise"),value:"franchise"}],color:"primary",disable:e.isSyncing,inline:""},model:{value:e.customerToFind,callback:function(t){e.customerToFind=t},expression:"customerToFind"}})],1)])])])]):e._e(),t("div",{staticClass:"row"},[t("div",{staticClass:"col-xs-12"},[e.isLoading?t("div",{staticClass:"empty-distribution-center"},[t("q-spinner",{attrs:{color:"primary",size:"3em"}})],1):e.formInvoice.invoice_no?t("div",[t("div",[t("form-invoice",{ref:"formInvoice",attrs:{entry:e.formInvoice,loading:e.isLoading,"is-create":e.isCreate,syncing:e.isSyncing,editable:e.isEditable,"template-settings":e.formTemplateSettings,customer:e.selectedCustomer},on:{"update:loading":function(t){e.isLoading=t},"update:syncing":function(t){e.isSyncing=t},success:e.onSuccess,updated:e.onFormInvoiceUpdated}})],1),t("div",[t("form-receipt",{ref:"formReceipt",attrs:{entry:e.formReceipt,"is-create":e.isCreate,loading:e.isLoading,syncing:e.isSyncing,invoice:e.formInvoiceUpdated,editable:e.isEditable,"template-settings":e.formTemplateSettings},on:{"update:loading":function(t){e.isLoading=t},"update:syncing":function(t){e.isSyncing=t},success:e.onSuccess,updated:e.onFormReceiptUpdated}})],1),"distribution_center"===e.customerToFind&&e.formStores.length?t("div",[t("form-store",{ref:"formStores",attrs:{entries:e.formStores,"is-create":e.isCreate,loading:e.isLoading,syncing:e.isSyncing,invoice:e.formInvoiceUpdated,editable:e.isEditable,"template-settings":e.formTemplateSettings},on:{"update:loading":function(t){e.isLoading=t},"update:syncing":function(t){e.isSyncing=t}}})],1):e._e()]):t("div",{staticClass:"empty-distribution-center"},["distribution_center"===e.customerToFind?[e._v("\n          "+e._s(e.$t("Please select a distribution center to continue"))+"\n          ")]:[e._v("\n            "+e._s(e.$t("Please select a franchise to continue"))+"\n          ")]],2)])])]),t("q-dialog",{attrs:{persistent:""},model:{value:e.isFormTemplateSettingsVisible,callback:function(t){e.isFormTemplateSettingsVisible=t},expression:"isFormTemplateSettingsVisible"}},[t("form-template-settings",{attrs:{entry:e.formTemplateSettings},on:{success:e.onFormTemplateSettingsSuccess,cancel:e.onFormTemplateSettingsCancel}})],1),t("q-dialog",{attrs:{maximized:"","full-width":"","full-height":"","transition-show":"slide-down","transition-hide":"slide-down","content-class":"dialog-print-preview"},model:{value:e.isFormPrintPreviewVisible,callback:function(t){e.isFormPrintPreviewVisible=t},expression:"isFormPrintPreviewVisible"}},[t("form-print-preview",{attrs:{invoice:e.formInvoice,"invoice-updated":e.formInvoiceUpdated,stores:e.formStores,receipt:e.formReceipt,"template-settings":e.formTemplateSettings},on:{close:function(t){e.isFormPrintPreviewVisible=!1}}})],1),e.printUrl?t("iframe",{ref:"printIframe",staticStyle:{opacity:"0",visibility:"hidden",width:"0",height:"0"},attrs:{src:e.printUrl}}):e._e()],1)},i=[],r=n("ded3"),s=n.n(r),o=n("7ec2"),c=n.n(o),l=n("c973"),d=n.n(l),u=(n("14d9"),n("ac1f"),n("5319"),n("bd4c")),m=n("a8c8"),f=n("a6f8"),p=n("9226"),v=function(){var e=this,t=e._self._c;return t("q-card",{staticClass:"form-entry q-pa-sm",class:{readonly:e.readonly}},[t("q-form",{ref:"form",staticClass:"q-gutter-md",attrs:{greedy:""},on:{submit:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[e.readonly?e._e():t("div",{staticClass:"text-h6 q-px-md q-pt-sm"},[e._v("\n      "+e._s(e.$t("Template Settings"))+"\n    ")]),t("q-card-section",{staticClass:"q-mb-md scroll",staticStyle:{"max-height":"56vh"}},[t("div",{staticClass:"q-mb-md text-subtitle text-weight-bold"},[e._v(e._s(e.$t("Monetary")))]),t("div",{staticClass:"row q-col-gutter-sm"},[t("div",{staticClass:"col-xs-12 col-sm-6 col-md-3"},[t("q-input",{attrs:{label:e.$t("Stamp Duty"),filled:!e.readonly,borderless:e.readonly,readonly:e.readonly,dense:"","stack-label":"",name:""+e.constant.StampDuty,autocomplete:"off",rules:e.rules[e.constant.StampDuty],error:!!e.errors[e.constant.StampDuty],"error-message":e.errors[e.constant.StampDuty]},on:{keypress:function(t){return e.$globalListeners.onKeypressOnlyFloat(t)}},model:{value:e.formEntry[e.constant.StampDuty],callback:function(t){e.$set(e.formEntry,e.constant.StampDuty,t)},expression:"formEntry[constant.StampDuty]"}})],1),t("div",{staticClass:"col-xs-12 col-sm-6 col-md-3"},[t("q-input",{attrs:{label:e.$t("PPN Percentage"),filled:!e.readonly,borderless:e.readonly,readonly:e.readonly,name:""+e.constant.PpnPercentage,"stack-label":"",suffix:"%",autocomplete:"off",dense:"",rules:e.rules[e.constant.PpnPercentage],error:!!e.errors[e.constant.PpnPercentage],"error-message":e.errors[e.constant.PpnPercentage]},on:{keypress:function(t){return e.$globalListeners.onKeypressOnlyFloat(t)}},model:{value:e.formEntry[e.constant.PpnPercentage],callback:function(t){e.$set(e.formEntry,e.constant.PpnPercentage,t)},expression:"formEntry[constant.PpnPercentage]"}})],1)]),t("div",{staticClass:"q-mb-md text-subtitle text-weight-bold"},[e._v(e._s(e.$t("Signatory")))]),t("div",{staticClass:"row q-col-gutter-sm"},[t("div",{staticClass:"col-xs-12 col-sm-6 col-md-4"},[t("q-input",{attrs:{label:e.$t("Signatory Name")+"*",filled:!e.readonly,borderless:e.readonly,readonly:e.readonly,dense:"",name:""+e.constant.SignatoryName,"stack-label":"",autocomplete:"off",rules:e.rules[e.constant.SignatoryName],error:!!e.errors[e.constant.SignatoryName],"error-message":e.errors[e.constant.SignatoryName]},model:{value:e.formEntry[e.constant.SignatoryName],callback:function(t){e.$set(e.formEntry,e.constant.SignatoryName,t)},expression:"formEntry[constant.SignatoryName]"}})],1),t("div",{staticClass:"col-xs-12 col-sm-6 col-md-4"},[t("q-input",{attrs:{label:e.$t("Signatory Position")+"*",filled:!e.readonly,borderless:e.readonly,readonly:e.readonly,name:""+e.constant.SignatoryPosition,"stack-label":"",autocomplete:"off",dense:"",rules:e.rules[e.constant.SignatoryPosition],error:!!e.errors[e.constant.SignatoryPosition],"error-message":e.errors[e.constant.SignatoryPosition]},model:{value:e.formEntry[e.constant.SignatoryPosition],callback:function(t){e.$set(e.formEntry,e.constant.SignatoryPosition,t)},expression:"formEntry[constant.SignatoryPosition]"}})],1)]),t("div",{staticClass:"q-mb-md text-subtitle text-weight-bold"},[e._v(e._s(e.$t("Bank Transfer")))]),t("div",{staticClass:"row q-col-gutter-sm"},[t("div",{staticClass:"col-xs-12 col-sm-6 col-md-9"},[t("q-input",{attrs:{label:e.$t("Bank Name")+"*",filled:!e.readonly,borderless:e.readonly,readonly:e.readonly,dense:"",name:""+e.constant.BankTransferName,"stack-label":"",autocomplete:"off",rules:e.rules[e.constant.BankTransferName],error:!!e.errors[e.constant.BankTransferName],"error-message":e.errors[e.constant.BankTransferName]},model:{value:e.formEntry[e.constant.BankTransferName],callback:function(t){e.$set(e.formEntry,e.constant.BankTransferName,t)},expression:"formEntry[constant.BankTransferName]"}})],1)]),t("div",{staticClass:"row q-col-gutter-sm"},[t("div",{staticClass:"col-xs-12 col-sm-6 col-md-4"},[t("q-input",{attrs:{label:e.$t("Account Number")+"*",filled:!e.readonly,borderless:e.readonly,readonly:e.readonly,name:""+e.constant.BankTransferAccountNumber,"stack-label":"",autocomplete:"off",dense:"",rules:e.rules[e.constant.BankTransferAccountNumber],error:!!e.errors[e.constant.BankTransferAccountNumber],"error-message":e.errors[e.constant.BankTransferAccountNumber]},model:{value:e.formEntry[e.constant.BankTransferAccountNumber],callback:function(t){e.$set(e.formEntry,e.constant.BankTransferAccountNumber,t)},expression:"formEntry[constant.BankTransferAccountNumber]"}})],1),t("div",{staticClass:"col-xs-12 col-sm-6 col-md-5"},[t("q-input",{attrs:{label:e.$t("Account Name")+"*",filled:!e.readonly,borderless:e.readonly,readonly:e.readonly,name:""+e.constant.BankTransferAccountName,"stack-label":"",autocomplete:"off",dense:"",rules:e.rules[e.constant.BankTransferAccountName],error:!!e.errors[e.constant.BankTransferAccountName],"error-message":e.errors[e.constant.BankTransferAccountName]},model:{value:e.formEntry[e.constant.BankTransferAccountName],callback:function(t){e.$set(e.formEntry,e.constant.BankTransferAccountName,t)},expression:"formEntry[constant.BankTransferAccountName]"}})],1)]),t("div",{staticClass:"q-mb-md text-subtitle text-weight-bold"},[e._v(e._s(e.$t("Misc")))]),t("div",{staticClass:"row q-col-gutter-sm"},[t("div",{staticClass:"col-xs-12 col-md-8"},[t("text-editor",{attrs:{label:e.$t("Invoice Note"),filled:!e.readonly,borderless:e.readonly,readonly:e.readonly,dense:"",name:""+e.constant.InvoiceNote,"stack-label":"",autocomplete:"off",rules:e.rules[e.constant.InvoiceNote],error:!!e.errors[e.constant.InvoiceNote],"error-message":e.errors[e.constant.InvoiceNote]},model:{value:e.formEntry[e.constant.InvoiceNote],callback:function(t){e.$set(e.formEntry,e.constant.InvoiceNote,t)},expression:"formEntry[constant.InvoiceNote]"}})],1)])]),t("q-separator"),e.readonly?t("q-card-actions",{attrs:{align:"right"}},[t("q-btn",{attrs:{label:e.$t("Close"),flat:"",disable:e.loading||e.isLoading},on:{click:e.cancel}})],1):t("q-card-actions",{attrs:{align:"right"}},[t("q-btn",{attrs:{label:e.$t("Cancel"),flat:"",disable:e.loading||e.isLoading},on:{click:e.cancel}}),t("q-btn",{staticClass:"q-px-lg",attrs:{type:"submit",label:e.$t("".concat(e.isCreate?"Create":"Save")),color:e.isCreate?"positive":"primary",loading:e.loading||e.isLoading,unelevated:""}})],1)],1)],1)},y=[],b=n("9523"),g=n.n(b),_=(n("cb29"),n("00b4"),n("99af"),{name:"FormEntry",props:{loading:Boolean,closable:{type:Boolean,default:!0},entry:{type:Object,default:function(){return this.generateDefaultFormEntry()}},readonly:{type:Boolean,default:!1}},data:function(){var e=this;return{formEntry:this.generateDefaultFormEntry(),isLoading:!1,rules:{terminal_name:[function(t){return!!t||e.$t("{field} is required",{field:e.$t("Terminal name")})}],location:[function(t){return!!t||e.$t("{field} is required",{field:e.$t("Location")})}],online_at:[function(t){return!t||!!t&&e.$utils.isDateValid(t)||e.$t("{field} is invalid",{field:e.$t("Online at")})}],latitude:[],longitude:[],pic_name:[],pic_phone_number:[],sla:[]},errors:this.generateDefaultFormEntry()}},computed:{isCreate:function(){return!this.formEntry.id},constant:function(){return this.$constant.setting_key||{InvoiceNote:3}}},watch:{entry:{immediate:!0,handler:function(e){var t=this;this.$nextTick((function(){t.fill(e)}))}}},methods:{generateDefaultFormEntry:function(){var e,t=this.constant||{};return e={},g()(e,t.BankTransferAccountName,null),g()(e,t.BankTransferAccountNumber,null),g()(e,t.BankTransferName,null),g()(e,t.InvoiceNote||3,""),g()(e,t.PpnPercentage,null),g()(e,t.SignatoryName,null),g()(e,t.SignatoryPosition,null),g()(e,t.StampDuty,null),e},fill:function(e){e=s()(s()({},this.generateDefaultFormEntry()),e),e[this.constant.InvoiceNote||3]=e[this.constant.InvoiceNote||3]||"",this.formEntry=e,this.$refs.form.resetValidation()},onSubmit:function(){var e=this;return d()(c()().mark((function t(){var n,a,i,r;return c()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.loading&&!e.isLoading){t.next=2;break}return t.abrupt("return");case 2:if(!e.readonly){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.$refs.form.validate();case 6:if(n=t.sent,n){t.next=9;break}return t.abrupt("return");case 9:return a=s()({},e.formEntry),e.isLoading=!0,t.prev=11,t.next=14,e.$api.post("/v1/settings",a);case 14:i=t.sent,r=i.data,"success"===r.status&&e.$emit("success",r.data.settings),r.message?e.$q.notify({message:r.message}):"success"===r.status?e.$q.notify({message:e.$t("{entity} saved",{entity:e.$t("Settings")})}):e.$t("Failed to save {entity}",{entity:e.$t("settings")}),t.next=23;break;case 20:t.prev=20,t.t0=t["catch"](11),t.t0.validation?e.errors=s()(s()({},e.generateDefaultFormEntry()),t.t0.validation.errors):e.$q.notify(t.t0);case 23:e.isLoading=!1;case 24:case"end":return t.stop()}}),t,null,[[11,20]])})))()},cancel:function(){this.loading||this.isLoading||this.$emit("cancel")},onDoubleInputChildKeydown:function(e){var t=String(e.target.value).replace(/[^0-9]/g,""),n=/^[0-9]$/i.test(e.key);n&&(t="".concat(t).concat(e.key)),(t>59||String(t).length>2)&&n&&e.preventDefault()}}}),h=_,$=(n("4b2f"),n("2877")),w=n("f09f"),x=n("0378"),q=n("a370"),C=n("27f9"),k=n("eb85"),S=n("4b7e"),E=n("9c40"),D=n("eebe"),P=n.n(D),Y=Object($["a"])(h,v,y,!1,null,"210f3dbb",null),F=Y.exports;P()(Y,"components",{QCard:w["a"],QForm:x["a"],QCardSection:q["a"],QInput:C["a"],QSeparator:k["a"],QCardActions:S["a"],QBtn:E["a"]});var I=n("602a"),T=n("c1eb"),N=function(){var e=this,t=e._self._c;return t("div",{staticClass:"form-page form-invoice-page q-pa-sm q-gutter-md"},[t("q-card",{staticClass:"q-pa-sm",attrs:{flat:""}},[t("q-form",{ref:"form",staticClass:"form-entry",class:{readonly:e.readonly},attrs:{greedy:""},on:{submit:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[t("q-card-section",[t("div",{staticClass:"row"},[t("div",{class:{"col-xs-12":!e.readonly,"col-xs-11":e.readonly}},[t("div",{staticClass:"row q-col-gutter-x-sm q-col-gutter-y-md q-mb-md"},[t("div",{staticClass:"col-xs-12 col-sm-8 col-md-4 col-lg-3"},[e.fetching?t("q-skeleton",{attrs:{type:"rect"}}):e._e(),t("q-select",{directives:[{name:"show",rawName:"v-show",value:!e.fetching,expression:"!fetching"}],attrs:{label:e.$t("Status")+"*",filled:!e.readonly,borderless:e.readonly,readonly:e.readonly,"stack-label":"",placeholder:e.readonly?"-":"",name:"status",autocomplete:"off",options:e.statusOptions,"option-label":"label","option-disable":e.statusOptionDisable,"emit-value":"","display-value":e.selectedStatus,dense:!e.readonly,rules:e.rules.status,error:!!e.errors.status,"error-message":e.errors.status},model:{value:e.formEntry.status,callback:function(t){e.$set(e.formEntry,"status",t)},expression:"formEntry.status"}})],1)]),e.formEntry.status==e.$constant.invoice_status.Rejected?t("div",{staticClass:"row q-col-gutter-x-sm q-col-gutter-y-md q-mb-md"},[t("div",{staticClass:"col-xs-12"},[e.fetching?t("q-skeleton",{attrs:{type:"rect"}}):e._e(),t("q-input",{directives:[{name:"show",rawName:"v-show",value:!e.fetching,expression:"!fetching"}],attrs:{label:e.$t("Reject Reason"),filled:!e.readonly,borderless:e.readonly,readonly:e.readonly,"stack-label":"",placeholder:e.readonly?"-":"",name:"reject_reason",autocomplete:"off",dense:!e.readonly,rules:e.rules.reject_reason,error:!!e.errors.reject_reason,"error-message":e.errors.reject_reason},model:{value:e.formEntry.reject_reason,callback:function(t){e.$set(e.formEntry,"reject_reason",t)},expression:"formEntry.reject_reason"}})],1)]):e._e(),t("div",{staticClass:"row"},[t("div",{staticClass:"col-xs-12 col-md-3"},[t("q-input",{directives:[{name:"show",rawName:"v-show",value:!e.fetching&&e.formEntry.actual_payment_date,expression:"!fetching && formEntry.actual_payment_date"}],attrs:{value:e.formEntry.actual_payment_date,label:e.$t("Actual Payment Date"),borderless:"",readonly:"",dense:!e.readonly}})],1)]),(e.formEntry.invoice_payment_proofs&&e.formEntry.invoice_payment_proofs.length||e.editable)&&e.formEntry.status!=e.$constant.invoice_status.Draft&&e.formEntry.status!=e.$constant.invoice_status.Unpaid?t("div",{staticClass:"row q-col-gutter-x-sm q-col-gutter-y-md q-mb-md"},[t("div",{staticClass:"col-xs-12"},[t("q-field",{attrs:{label:e.$t("Payment Proof"),borderless:"",readonly:"","stack-label":""}},[t("card-payment-proof",{ref:"cardPaymentProof",attrs:{invoice:e.formEntry,uploadable:!1,editable:e.editable,flat:"",addable:e.editable},on:{updated:e.onPaymentProofUpdated}})],1)],1)]):e._e(),e.readonly?[t("div",{staticClass:"row"},[t("div",{staticClass:"col-xs-12 col-md-3"},[t("q-input",{directives:[{name:"show",rawName:"v-show",value:!e.fetching&&e.formEntry.unpaid_updated_at,expression:"!fetching && formEntry.unpaid_updated_at"}],attrs:{value:e.formEntry.unpaid_updated_at,label:e.$t("Published At"),borderless:"",readonly:"",dense:!e.readonly}})],1),t("div",{staticClass:"col-xs-12 col-md-3"},[t("q-input",{directives:[{name:"show",rawName:"v-show",value:!e.fetching&&e.formEntry.pending_review_updated_at,expression:"!fetching && formEntry.pending_review_updated_at"}],attrs:{value:e.formEntry.pending_review_updated_at,label:e.$t("Pending Review At"),borderless:"",readonly:"",dense:!e.readonly}})],1),t("div",{staticClass:"col-xs-12 col-md-3"},[t("q-input",{directives:[{name:"show",rawName:"v-show",value:!e.fetching&&e.formEntry.paid_at,expression:"!fetching && formEntry.paid_at"}],attrs:{value:e.formEntry.paid_at,label:e.$t("Paid At"),borderless:"",readonly:"",dense:!e.readonly}})],1),t("div",{staticClass:"col-xs-12 col-md-3"},[t("q-input",{directives:[{name:"show",rawName:"v-show",value:!e.fetching&&e.formEntry.rejected_at,expression:"!fetching && formEntry.rejected_at"}],attrs:{value:e.formEntry.rejected_at,label:e.$t("Rejected At"),borderless:"",readonly:"",dense:!e.readonly}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col-xs-12 col-md-3"},[t("q-input",{directives:[{name:"show",rawName:"v-show",value:!e.fetching,expression:"!fetching"}],attrs:{value:e.formEntry.created_at,label:e.$t("Created At"),borderless:"",readonly:"",dense:!e.readonly}})],1),t("div",{staticClass:"col-xs-12 col-md-3"},[t("q-input",{directives:[{name:"show",rawName:"v-show",value:!e.fetching,expression:"!fetching"}],attrs:{value:e.formEntry.updated_at,label:e.$t("Updated At"),borderless:"",readonly:"",dense:!e.readonly}})],1)])]:e._e()],2)])])],1)],1)],1)},M=[],L=(n("7db0"),n("d3b7"),n("4de4"),n("caad"),n("2532"),n("d81d"),n("5125")),B={id:null,invoice_no:null,receipt_no:null,created_at:null,updated_at:null,invoice_services:[],invoice_payment_proofs:[],status:null,reject_reason:null},j={name:"FormPage",components:{CardPaymentProof:L["a"]},props:{entry:{type:Object,default:function(){return{}}},loading:Boolean,fetching:Boolean,editable:Boolean,closable:{type:Boolean,default:!0}},data:function(){var e=this;return{formEntry:B,isLoading:!1,rules:{name:[function(t){return!!t||e.$t("{field} is required",{field:e.$t("Name")})}],username:[function(t){return!t||!!t&&t.length>3||e.$t("{field} must be at least {length} characters",{field:e.$t("Username"),length:3})},function(t){return!t||!!t&&/^[a-zA-Z0-9_\.]+$/.test(t)||e.$t("{field} can only contain alphanumeric characters, underscores, and periods",{field:e.$t("Username")})},function(t){return!t||!!t&&/^[^0-9][a-zA-Z0-9_\.]+$/.test(t)||e.$t("{field} must be starts with letter",{field:e.$t("Username")})}],email:[function(t){return!!t||e.$t("{field} is required",{field:e.$t("Email")})},function(t){return!!t&&e.$utils.isEmail(t)||e.$t("{field} is invalid",{field:e.$t("Email")})}],password:[function(t){return!!t||e.$t("{field} is required",{field:e.$t("Password")})},function(t){return t&&t.length>=6||e.$t("{field} must be at least {length} characters",{field:e.$t("Password"),length:6})}],password_confirmation:[function(t){return!!t||e.$t("{field} is required",{field:e.$t("Password confirmation")})},function(t){return t===e.formEntry.password||e.$t("{field} does not match",{field:e.$t("Password confirmation")})}]},errors:B,isEditable:!1,defaultFormEntry:B,childTab:"franchise"}},computed:{isCreate:function(){return!this.entry.id},readonly:function(){return!this.isEditable&&!this.isCreate},formattedApprovalDate:function(){if(this.readonly&&this.formEntry.approval_date)return u["b"].formatDate(u["b"].extractDate(this.formEntry.approval_date,"DD/MM/YYYY"),"DD MMM YYYY")},formattedFoApprovalDate:function(){if(this.readonly&&this.formEntry.fo_approval_date)return u["b"].formatDate(u["b"].extractDate(this.formEntry.fo_approval_date,"DD/MM/YYYY"),"DD MMM YYYY")},selectedStatus:function(){var e=this,t=this.statusOptions.find((function(t){return t.value==e.formEntry.status}));return t?t.label:""},statusOptions:function(){var e=this.$constant.invoice_status,t=[{value:e.Draft,label:this.$t("Draft")},{value:e.Unpaid,label:this.$t("Publish")+" ("+this.$t("Unpaid")+")"},{value:e.PendingReview,label:this.$t("Pending Review")},{value:e.Paid,label:this.$t("Paid")},{value:e.Rejected,label:this.$t("Rejected")}];if(this.readonly)return t;var n=this.entry.status;return n==e.Draft?t.filter((function(t){return[e.Draft,e.Unpaid].includes(t.value)})):n==e.Unpaid?t.filter((function(t){return[e.Draft,e.Unpaid,e.PendingReview].includes(t.value)})):n==e.PendingReview?t.filter((function(t){return[e.PendingReview,e.Paid,e.Rejected].includes(t.value)})):n==e.Paid?t.filter((function(t){return[e.Paid,e.Rejected].includes(t.value)})):n==e.Rejected?t.filter((function(t){return[e.Rejected,e.Paid,e.PendingReview].includes(t.value)})):t}},watch:{entry:{immediate:!0,deep:!0,handler:function(e){var t=this;this.$nextTick((function(){t.fill(e)}))}},editable:{immediate:!0,handler:function(e,t){e!==t&&e!==this.isEditable&&(this.isEditable=e,this.formEntry=s()(s()({},this.defaultFormEntry),{},{invoice_payment_proofs:(this.defaultFormEntry.invoice_payment_proofs||[]).map((function(e){return e.file=null,s()({},e)}))}),this.$refs.form&&this.$refs.form.resetValidation())}},isEditable:function(e,t){var n=this;e!==t&&e!==this.editable&&(this.$emit("update:editable",e),this.$nextTick((function(){setTimeout((function(){n.$forceUpdate()}),100)})))}},methods:{fill:function(e){e=s()(s()({},B),e),e.created_at&&(e.created_at=u["b"].formatDate(e.created_at,"DD MMM YYYY HH:mm"),e.updated_at=u["b"].formatDate(e.updated_at,"DD MMM YYYY HH:mm"),e.approval_date&&(e.approval_date=u["b"].formatDate(e.approval_date,"DD/MM/YYYY")),e.fo_approval_date&&(e.fo_approval_date=u["b"].formatDate(e.fo_approval_date,"DD/MM/YYYY"))),e.unpaid_updated_at=e.unpaid_updated_at?u["b"].formatDate(e.unpaid_updated_at,"DD MMM YYYY HH:mm"):null,e.pending_review_updated_at=e.pending_review_updated_at?u["b"].formatDate(e.pending_review_updated_at,"DD MMM YYYY HH:mm"):null,e.paid_at=e.paid_at?u["b"].formatDate(e.paid_at,"DD MMM YYYY HH:mm"):null,e.rejected_at=e.rejected_at?u["b"].formatDate(e.rejected_at,"DD MMM YYYY HH:mm"):null,e.actual_payment_date=e.actual_payment_date?u["b"].formatDate(e.actual_payment_date,"DD MMM YYYY"):null,e.invoice_payment_proofs&&(e.invoice_payment_proofs=(e.invoice_payment_proofs||[]).map((function(e){return e.file=null,s()({},e)})));var t={};for(var n in B)t[n]="invoice_payment_proofs"===n?(e[n]||[]).map((function(e){return e.file=null,s()({},e)})):e[n];this.defaultFormEntry=t,this.formEntry=e,this.$refs.form&&this.$refs.form.resetValidation()},uploadPaymentProofs:function(){var e=this;return d()(c()().mark((function t(){return c()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.cardPaymentProof.onUpload(!0);case 2:case"end":return t.stop()}}),t)})))()},onPaymentProofUpdated:function(e){this.formEntry.invoice_payment_proofs=e,this.formEntry.invoice_payment_proof_dirty=!0},statusOptionDisable:function(e){return this.readonly,e},isDirty:function(){return this.$utils.isDirty(this.defaultFormEntry,this.formEntry)},onSubmit:function(){var e=this;return d()(c()().mark((function t(){var n,a,i,r,o,l,d;return c()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.loading&&!e.isLoading){t.next=2;break}return t.abrupt("return");case 2:if(!e.readonly){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.$refs.form.validate();case 6:if(n=t.sent,n){t.next=9;break}return t.abrupt("return");case 9:return a=s()({},e.formEntry),a.approval_date&&(a.approval_date=u["b"].formatDate(u["b"].extractDate(a.approval_date,"DD/MM/YYYY"),"YYYY-MM-DD")),a.fo_approval_date&&(a.fo_approval_date=u["b"].formatDate(u["b"].extractDate(a.fo_approval_date,"DD/MM/YYYY"),"YYYY-MM-DD")),e.isLoading=!0,t.prev=13,i=a.id?"/v1/invoices/".concat(a.id):"/v1/invoices",r=a.id?"patch":"post",t.next=18,e.$api[r](i,a);case 18:o=t.sent,l=o.data,"success"===l.status&&(e.defaultFormEntry=s()({},e.formEntry),e.$emit("success",l.data.invoice),e.isEditable=!1),l.message?e.$q.notify({message:l.message}):"success"===l.status?e.$q.notify({message:e.$t("{entity} saved",{entity:e.$t("Invoice")})}):e.$t("Failed to save {entity}",{entity:e.$t("invoice")}),t.next=27;break;case 24:t.prev=24,t.t0=t["catch"](13),t.t0.validation?(d=s()(s()({},B),t.t0.validation.errors),e.errors=d):e.$q.notify(t.t0);case 27:e.isLoading=!1;case 28:case"end":return t.stop()}}),t,null,[[13,24]])})))()},cancel:function(){this.loading||this.isLoading||(this.isEditable=!1)},onEdit:function(){this.isEditable=!0},onDelete:function(){var e=this;this.isLoading||this.$q.dialog({title:this.$t("Confirm"),message:this.$t("Are you sure want to delete this {entity}?",{entity:this.$t("distribution center")}),cancel:{label:this.$t("Cancel"),color:"dark",flat:!0},ok:{label:this.$t("Yes"),color:"primary",unelevated:!0,flat:!0,class:"text-weight-bold"},persistent:!0}).onOk(d()(c()().mark((function t(){var n,a;return c()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$api.delete("/v1/distribution-centers/".concat(e.entry.id));case 3:n=t.sent,a=n.data,a.message?(e.$q.notify({message:a.message}),e.$emit("deleted",a)):"success"===a.status?(e.$q.notify({message:e.$t("{entity} deleted",{entity:e.$t("Distribution center")})}),e.$emit("deleted",a)):e.$t("Failed to delete {entity}",{entity:e.$t("distribution center")}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$q.notify(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).onCancel((function(){e.isLoading=!1}))},onTableRelationFranchiseCreate:function(){this.$router.push({path:"/franchises/create",query:{distribution_center_id:this.entry.id}})},onTableRelationStoreCreate:function(){this.$router.push({path:"/stores/create",query:{distribution_center_id:this.entry.id}})}}},R=j,A=(n("576f"),n("293e")),U=n("ddd8"),Q=n("8572"),V=Object($["a"])(R,N,M,!1,null,null,null),O=V.exports;P()(V,"components",{QCard:w["a"],QForm:x["a"],QCardSection:q["a"],QSkeleton:A["a"],QSelect:U["a"],QInput:C["a"],QField:Q["a"]});var H={name:"PageInvoiceShow",components:{FormInvoice:m["a"],FormReceipt:f["a"],FormStore:p["a"],FormTemplateSettings:F,FormPrintPreview:I["a"],InvoiceStatusChip:T["a"],FormPage:O},meta:function(){var e=this.$t("Create New {entity}",{entity:this.$t("Invoice")});return this.isCreate||(e=this.$t("Invoice")),{title:e+" - "+this.$t("Web Console")}},breadcrumbs:function(){var e=["home",{text:this.$t("Invoices"),to:"/invoices"}];return this.isCreate?e.push({text:this.$t("New {entity}",{entity:this.$t("Invoice")})}):this.formInvoice&&this.formInvoice.invoice_no&&e.push({text:this.formInvoice.invoice_no}),e},data:function(){return{isSyncing:!1,isLoading:!1,isFetching:!1,isFormTemplateSettingsVisible:!1,isFormPrintPreviewVisible:!1,entry:{distribution_center_id:null,franchise_id:null},formInvoice:{invoice_no:null},formReceipt:{receipt_no:null},formInvoiceUpdated:{},formTemplateSettings:{},formStores:[],customerToFind:"distribution_center",isEditable:!0,printUrl:null,selectedCustomer:{}}},computed:{isCreate:function(){return!this.$route.params.id}},watch:{"entry.distribution_center_id":function(e,t){var n=this;return d()(c()().mark((function a(){return c()().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e===t){a.next=4;break}return a.next=3,n.rebuildInvoice();case 3:e&&n.requestStores();case 4:case"end":return a.stop()}}),a)})))()},"entry.franchise_id":function(e,t){e!==t&&this.rebuildInvoice()}},created:function(){this.requestSettings(),this.isCreate||this.requestInvoice()},mounted:function(){this.isCreate||(this.isEditable=!1)},beforeRouteEnter:function(e,t,n){n((function(e){e.requestSettings(),e.isCreate||(e.isEditable=!1,e.requestInvoice())}))},methods:{requestInvoice:function(){var e=this;return d()(c()().mark((function t(){var n,a,i,r,s;return c()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isLoading&&!e.isFetching){t.next=2;break}return t.abrupt("return");case 2:return e.isLoading=!0,e.isFetching=!0,n={edit:1,includes:"invoiceServices|invoicePaymentProofs|distributionCenter|franchise"},t.prev=5,t.next=8,e.$api.get("/v1/invoices/".concat(e.$route.params.id),{params:n});case 8:a=t.sent,i=a.data,"success"===i.status&&(r=i.data.invoice.distribution_center,s=i.data.invoice.franchise,i.data.invoice.distribution_center=null,i.data.invoice.franchise=null,e.formInvoice=i.data.invoice,e.formReceipt=i.data.invoice,e.selectedCustomer=r||s,e.requestStores()),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](5),e.$q.notify(t.t0);case 16:e.isFetching=!1,e.isFetching=!1,e.isLoading=!1;case 19:case"end":return t.stop()}}),t,null,[[5,13]])})))()},requestSettings:function(){var e=this;return d()(c()().mark((function t(){var n,a;return c()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$api.get("/v1/settings");case 3:n=t.sent,a=n.data,"success"===a.status&&(e.formTemplateSettings=a.data.settings),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$q.notify(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},requestStores:function(){var e=this;return d()(c()().mark((function t(){var n,a,i;return c()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={distribution_center_id:e.entry.distribution_center_id},t.prev=1,t.next=4,e.$api.get("/v1/stores",{params:n});case 4:a=t.sent,i=a.data,"success"===i.status&&(e.formStores=i.data.stores),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),e.$q.notify(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},rebuildInvoice:function(){var e=this;return d()(c()().mark((function t(){var n,a,i,r,s;return c()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isCreate&&!e.isLoading){t.next=2;break}return t.abrupt("return");case 2:return e.isLoading=!0,n=e.entry,t.prev=4,t.next=7,e.$api.get("/v1/invoices/template",{params:n});case 7:a=t.sent,i=a.data,"success"===i.status&&(r=i.data.invoice.distribution_center,s=i.data.invoice.franchise,i.data.invoice.distribution_center=null,i.data.invoice.franchise=null,e.formInvoice=i.data.invoice,e.formReceipt=i.data.invoice,e.selectedCustomer=r||s),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](4),e.$q.notify(t.t0);case 15:e.isLoading=!1;case 16:case"end":return t.stop()}}),t,null,[[4,12]])})))()},onSuccess:function(e){this.isCreate&&this.$router.push("/invoices/".concat(e.id))},onDelete:function(){var e=this;this.isLoading||this.isSyncing||this.$q.dialog({title:this.$t("Confirm"),message:this.$t("Are you sure want to delete this {entity}?",{entity:this.$t("invoice")}),cancel:{label:this.$t("Cancel"),color:"dark",flat:!0},ok:{label:this.$t("Yes"),color:"primary",unelevated:!0,flat:!0,class:"text-weight-bold"},persistent:!0}).onOk(d()(c()().mark((function t(){var n,a;return c()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$api.delete("/v1/invoices/".concat(e.formInvoice.id));case 3:n=t.sent,a=n.data,a.message?(e.$q.notify({message:a.message}),e.$emit("deleted",a),e.onDeleted()):"success"===a.status?(e.$q.notify({message:e.$t("{entity} deleted",{entity:e.$t("Invoice")})}),e.$emit("deleted",a),e.onDeleted()):e.$t("Failed to delete {entity}",{entity:e.$t("invoice")}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$q.notify(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).onCancel((function(){e.isLoading=!1}))},onDeleted:function(){this.$router.replace("/invoices")},onPrint:function(){var e=this;this.isFormPrintPreviewVisible=!1,this.printUrl=this.$router.resolve("/invoices/".concat(this.$route.params.id,"/print")).href,this.$nextTick((function(){if(e.$refs.printIframe){var t=e.$refs.printIframe,n=t.contentWindow;n.doPrinting=!0,n.doPrint=function(){e.printUrl=null}}}))},onPreview:function(){this.isFormPrintPreviewVisible=!0},formatDateBeforeSubmit:function(e){if(e)return u["b"].formatDate(u["b"].extractDate(e,"DD/MM/YYYY"),"YYYY-MM-DD")},onSave:function(){var e=arguments,t=this;return d()(c()().mark((function n(){var a,i,r,o,l,u,m,f,p,v,y,b,g;return c()().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:{},i=!0,n.next=4,t.$refs.formInvoice.validate();case 4:return r=n.sent,"string"===typeof r&&(t.$q.notify({message:r}),i=!1),n.next=8,t.$refs.formReceipt.validate();case 8:if(o=n.sent,i&&"string"===typeof o&&(t.$q.notify({message:o}),i=!1),i){n.next=12;break}return n.abrupt("return");case 12:if(!t.isLoading){n.next=14;break}return n.abrupt("return");case 14:if(l=s()({},t.formInvoiceUpdated),u={distribution_center_id:l.distribution_center_id,franchise_id:l.franchise_id,published_at:t.formatDateBeforeSubmit(l.published_at),offering_letter_reference_number:l.offering_letter_reference_number,fo_offering_letter_reference_number:l.fo_offering_letter_reference_number,approval_date:t.formatDateBeforeSubmit(l.approval_date),fo_approval_date:t.formatDateBeforeSubmit(l.fo_approval_date),issuance_number:l.issuance_number,fo_issuance_number:l.fo_issuance_number,sub_total:l.sub_total,ppn_percentage:l.ppn_percentage,ppn_total:l.ppn_total||l.ppn,stamp_duty:l.stamp_duty?parseFloat(l.stamp_duty,10)||0:null,total:l.total||l.grand_total,due_at:t.formatDateBeforeSubmit(l.due_at),note:l.note,signatory_name:l.signatory_name,signatory_position:l.signatory_position,customer_name:l.customer_name,customer_address:l.customer_address,receipt_remark:t.formReceipt.receipt_remark,transfer_to_type:l.transfer_to_type,invoice_services:l.services||[]},console.log(u),m=t.$refs.formPage,!m){n.next=31;break}if(f=m.formEntry||{},u.status=f.status,u.status==t.$constant.invoice_status.Rejected?u.reject_reason=f.reject_reason:u.reject_reason=null,!f.invoice_payment_proof_dirty){n.next=31;break}return n.prev=23,n.next=26,m.uploadPaymentProofs();case 26:n.next=31;break;case 28:return n.prev=28,n.t0=n["catch"](23),n.abrupt("return");case 31:return p={},a&&a.force&&(p.force=1),t.isLoading=!0,n.prev=34,v=t.isCreate?"/v1/invoices":"/v1/invoices/".concat(t.$route.params.id),y=t.isCreate?"post":"patch",n.next=39,t.$api[y](v,u,{params:p});case 39:b=n.sent,g=b.data,"success"===g.status&&(t.isCreate?t.$router.replace("/invoices/".concat(g.data.invoice.id)):(t.formInvoiceUpdated={},t.formInvoice={},t.formReceipt={},t.isEditable=!1),t.$emit("success",g.data.invoice)),g.message?t.$q.notify({message:g.message}):"success"===g.status?t.$q.notify({message:t.$t("{entity} saved",{entity:t.$t("Invoice")})}):t.$t("Failed to save {entity}",{entity:t.$t("invoice")}),n.next=54;break;case 45:if(n.prev=45,n.t1=n["catch"](34),!(n.t1.response&&n.t1.response.data&&n.t1.response.data&&4==n.t1.response.data.code)){n.next=53;break}return t.$q.dialog({title:t.$t("Confirm"),message:n.t1.response.data.message+". "+t.$t("Are you sure want to continue?"),cancel:{label:t.$t("Cancel"),color:"dark",flat:!0},ok:{label:t.$t("Yes"),color:"primary",unelevated:!0,flat:!0,class:"text-weight-bold"},persistent:!0}).onOk(d()(c()().mark((function e(){return c()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.onSave({force:!0});case 2:case"end":return e.stop()}}),e)})))).onCancel((function(){t.isLoading=!1})),t.isLoading=!1,n.abrupt("return");case 53:t.$q.notify(n.t1);case 54:t.isLoading=!1,t.isCreate||t.requestInvoice();case 56:case"end":return n.stop()}}),n,null,[[23,28],[34,45]])})))()},onFormInvoiceUpdated:function(e){this.formInvoiceUpdated=e},onFormReceiptUpdated:function(e){this.formReceipt=e},onFormTemplateSettingsSuccess:function(e){this.isFormTemplateSettingsVisible=!1,this.formTemplateSettings=e},onFormTemplateSettingsCancel:function(){this.isFormTemplateSettingsVisible=!1}}},z=H,K=(n("951e"),n("9989")),J=n("6ac5"),W=n("05c0"),Z=n("f20b"),G=n("1c1c"),X=n("66e5"),ee=n("9f0a"),te=n("0d59"),ne=n("24e8"),ae=n("7f67"),ie=Object($["a"])(z,a,i,!1,null,null,null);t["default"]=ie.exports;P()(ie,"components",{QPage:K["a"],QBtn:E["a"],QToolbarTitle:J["a"],QTooltip:W["a"],QBtnDropdown:Z["a"],QList:G["a"],QItem:X["a"],QOptionGroup:ee["a"],QSpinner:te["a"],QDialog:ne["a"]}),P()(ie,"directives",{ClosePopup:ae["a"]})},"576f":function(e,t,n){"use strict";n("e363")},8932:function(e,t,n){},"951e":function(e,t,n){"use strict";n("c5b8")},c5b8:function(e,t,n){},e363:function(e,t,n){}}]);