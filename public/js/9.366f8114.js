(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{"0684":function(e,t,a){},"2c30":function(e,t,a){"use strict";a("0684")},"3f68":function(e,t,a){"use strict";a.r(t);a("ac1f"),a("841c"),a("4de4"),a("d3b7"),a("d81d"),a("b0c0"),a("e260"),a("ddb0");var r=function(){var e=this,t=e._self._c;return t("q-page",{staticClass:"page-users"},[t("portal",{attrs:{to:"app-breadcrumbs"}},[t("breadcrumbs")],1),t("portal",{attrs:{to:"app-toolbar"}},[t("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"menu"},on:{click:function(t){return e.$store.dispatch("app/toggleSidebar")}}}),t("q-toolbar-title",[e._v("\n      "+e._s(e.$t("Users"))+"\n    ")]),t("div",{staticClass:"sep"}),e.$auth.can("create.users")?t("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"add"}}):e._e()],1),t("div",{staticClass:"page-header"},[t("q-toolbar-title",[e._v(e._s(e.$t("Users")))]),t("div",{staticClass:"sep"}),e.$auth.can("create.users")?t("q-btn",{staticClass:"q-ml-sm q-btn-lg btn-page-users-create",attrs:{color:"primary",icon:"add"},on:{click:e.onFormEntryCreate}},[e._v("\n      "+e._s(e.$t("New {entity}",{entity:e.$t("User")}))+"\n    ")]):e._e()],1),t("div",{staticClass:"page-body"},[t("q-card",[t("q-toolbar",[t("div",{staticClass:"col col-md-9 col-lg-8"},[t("div",{staticClass:"row q-col-gutter-md quick-search-datatable"},[t("div",{staticClass:"col col-md-4 col-lg-3"},[t("q-input",{attrs:{label:e.$t("Search {entity}",{entity:e.$t("name, email or username")}),"stack-label":"",debounce:300,dense:"",clearable:"","clear-icon":"close"},model:{value:e.search.fuzzy.value,callback:function(t){e.$set(e.search.fuzzy,"value",t)},expression:"search.fuzzy.value"}})],1),t("div",{staticClass:"col col-md-4 col-lg-3"},[t("autocomplete-role",{attrs:{label:e.$t("Search {entity}",{entity:e.$t("role")}),"stack-label":"",dense:"",clearable:"","clear-icon":"close"},on:{input:function(t){return e.onRequest()}},model:{value:e.search.role_id.value,callback:function(t){e.$set(e.search.role_id,"value",t)},expression:"search.role_id.value"}})],1)])]),t("div",{staticClass:"col col-md-3 col-lg-2 q-ml-auto row"},[t("q-btn",{staticClass:"q-ml-auto btn-datatable-advanced-search",attrs:{unelevated:"",color:"default",size:"sm",icon:"search",disable:e.isLoading},on:{click:e.onAdvancedSearch}},[e._v("\n            "+e._s(e.$t("Advanced Search"))+"\n          ")]),t("q-btn",{staticClass:"q-ml-sm btn-datatable-view-columns",attrs:{unelevated:"",color:"default",size:"sm",padding:"xs",icon:"view_column"}},[t("q-tooltip",[e._v("\n              "+e._s(e.$t("View Column"))+"\n            ")]),t("q-menu",[t("div",{staticClass:"row no-wrap q-pa-md",staticStyle:{"min-width":"10em"}},[t("div",{staticClass:"column"},[t("q-option-group",{staticStyle:{"margin-left":"-16px"},attrs:{options:e.columns.map((function(e){return{label:e.realLabel||e.label,value:e.name}})).filter((function(e){return e.label})),type:"checkbox",size:"xs"},model:{value:e.visibleColumns,callback:function(t){e.visibleColumns=t},expression:"visibleColumns"}})],1)])])],1)],1)]),t("q-table",{attrs:{data:e.entries,columns:e.columns,"visible-columns":e.visibleColumns,loading:e.isLoading,pagination:e.pagination,"binary-state-sort":"","row-key":"id"},on:{"update:pagination":function(t){e.pagination=t},request:e.onRequest},scopedSlots:e._u([{key:"body-cell-id",fn:function(a){var r=a.rowIndex;return[t("q-td",[e._v(e._s(r+1))])]}},{key:"body-cell-action",fn:function(a){var r=a.row;return[t("q-td",{staticClass:"text-right table-cell-action"},[t("q-btn",{staticClass:"btn-datatable-view-user",attrs:{unelevated:"",color:"default",size:"sm",padding:"xs",icon:"visibility"},on:{click:function(t){return t.preventDefault(),e.onView(r)}}},[t("q-tooltip",[e._v("\n                "+e._s(e.$t("View"))+"\n              ")])],1),e.$auth.can("edit.users")?t("q-btn",{staticClass:"q-ml-xs btn-datatable-edit-user",attrs:{unelevated:"",color:"default",size:"sm",padding:"xs",icon:"edit"},on:{click:function(t){return t.preventDefault(),e.onEdit(r)}}},[t("q-tooltip",[e._v("\n                "+e._s(e.$t("Edit"))+"\n              ")])],1):e._e(),e.$auth.can("edit.users")?t("q-btn",{staticClass:"q-ml-xs btn-datatable-update-password-user",attrs:{unelevated:"",color:"default",size:"sm",padding:"xs",icon:"lock_open"},on:{click:function(t){return t.preventDefault(),e.onEditPassword(r)}}},[t("q-tooltip",[e._v("\n                "+e._s(e.$t("Update {entity}",{entity:e.$t("Password")}))+"\n              ")])],1):e._e(),e.$auth.can("delete.users")?t("q-btn",{staticClass:"q-ml-xs btn-datatable-delete-user",attrs:{disable:1===parseInt(r.id,10),unelevated:"",color:"default",size:"sm",padding:"xs",icon:"delete"},on:{click:function(t){return t.preventDefault(),e.onDelete(r)}}},[t("q-tooltip",[e._v("\n                "+e._s(e.$t("Delete"))+"\n              ")])],1):e._e()],1)]}},{key:"no-data",fn:function(a){var r=a.icon,s=a.message,n=a.filter;return[t("div",{staticClass:"full-width row flex-center text-center q-gutter-sm"},[t("q-icon",{attrs:{size:"2em",name:n?"filter_b_and_w":r}}),t("span",[e._v("\n              "+e._s(s)+"\n            ")])],1)]}}])})],1)],1),t("q-dialog",{model:{value:e.isAdvancedSearchVisible,callback:function(t){e.isAdvancedSearchVisible=t},expression:"isAdvancedSearchVisible"}},[t("q-card",{staticClass:"q-pa-sm"},[t("q-form",{on:{submit:function(t){return t.preventDefault(),e.onAdvancedSearchSubmit.apply(null,arguments)}}},[t("q-card-section",{staticClass:"q-pb-xs"},[t("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("Search")))])]),t("q-card-section",{staticClass:"q-col-gutter-md"},[t("q-input",{attrs:{label:e.$t("Search {entity}",{entity:e.$t("name")}),outlined:"",dense:"",clearable:""},model:{value:e.advancedSearch.name.value,callback:function(t){e.$set(e.advancedSearch.name,"value",t)},expression:"advancedSearch.name.value"}}),t("autocomplete-role",{attrs:{label:e.$t("Search {entity}",{entity:e.$t("role")}),outlined:"",dense:"",clearable:""},model:{value:e.advancedSearch.role_id.value,callback:function(t){e.$set(e.advancedSearch.role_id,"value",t)},expression:"advancedSearch.role_id.value"}}),t("q-input",{attrs:{label:e.$t("Search {entity}",{entity:e.$t("email")}),outlined:"",dense:"",clearable:""},model:{value:e.advancedSearch.email.value,callback:function(t){e.$set(e.advancedSearch.email,"value",t)},expression:"advancedSearch.email.value"}}),t("q-input",{attrs:{label:e.$t("Search {entity}",{entity:e.$t("username")}),outlined:"",dense:"",clearable:""},model:{value:e.advancedSearch.username.value,callback:function(t){e.$set(e.advancedSearch.username,"value",t)},expression:"advancedSearch.username.value"}})],1),t("q-separator"),t("q-card-actions",{attrs:{align:"right"}},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:e.$t("Cancel"),flat:""}}),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{type:"submit",label:e.$t("Search"),color:"default",unelevated:""}})],1)],1)],1)],1),t("q-dialog",{attrs:{persistent:!e.isFormEntryReadonly},model:{value:e.isFormEntryVisible,callback:function(t){e.isFormEntryVisible=t},expression:"isFormEntryVisible"}},[t("form-entry",{attrs:{entry:e.formEntry,readonly:e.isFormEntryReadonly,loading:e.isLoading},on:{success:e.onFormEntrySuccess,cancel:e.onFormEntryCancel}})],1),t("q-dialog",{attrs:{persistent:""},model:{value:e.isFormPasswordVisible,callback:function(t){e.isFormPasswordVisible=t},expression:"isFormPasswordVisible"}},[t("form-password",{attrs:{entry:e.formPassword,loading:e.isLoading},on:{success:e.onFormPasswordSuccess,cancel:e.onFormPasswordCancel}})],1)],1)},s=[],n=a("ded3"),i=a.n(n),l=a("7ec2"),o=a.n(l),c=a("c973"),d=a.n(c),u=(a("b64b"),a("e9c4"),a("bd4c")),m=function(){var e=this,t=e._self._c;return t("q-card",{staticClass:"form-entry q-pa-sm",class:{readonly:e.readonly}},[t("q-form",{ref:"form",staticClass:"q-gutter-md",attrs:{greedy:""},on:{submit:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[e.readonly?e._e():t("div",{staticClass:"text-h6 q-px-md q-pt-sm"},[e._v("\n      "+e._s(e.$t("".concat(e.isCreate?"Create":"Update"," {entity}"),{entity:e.$t("User")}))+"\n    ")]),t("q-card-section",{staticClass:"q-mb-md scroll",style:{maxHeight:e.isCreate?"60vh":""}},[t("div",{staticClass:"row q-col-gutter-sm"},[t("div",{staticClass:"col-xs-12"},[t("q-input",{attrs:{label:e.$t("Name")+"*",filled:!e.readonly,borderless:e.readonly,readonly:e.readonly,placeholder:e.readonly?"-":"","stack-label":"",rules:e.rules.name,error:!!e.errors.name,"error-message":e.errors.name},model:{value:e.formEntry.name,callback:function(t){e.$set(e.formEntry,"name",t)},expression:"formEntry.name"}})],1),t("div",{staticClass:"col-xs-12"},[t("autocomplete-role",{attrs:{label:e.$t("Role")+"*",filled:!e.readonly,borderless:e.readonly,readonly:e.readonly,placeholder:e.readonly?"-":"","stack-label":"",rules:e.rules.role_id,error:!!e.errors.role_id,"error-message":e.errors.role_id},model:{value:e.formEntry.role_id,callback:function(t){e.$set(e.formEntry,"role_id",t)},expression:"formEntry.role_id"}})],1),t("div",{staticClass:"col-xs-12"},[t("q-input",{attrs:{type:"email",label:e.$t("Email")+"*",filled:!e.readonly,borderless:e.readonly,readonly:e.readonly,placeholder:e.readonly?"-":"","stack-label":"",rules:e.rules.email,error:!!e.errors.email,"error-message":e.errors.email},model:{value:e.formEntry.email,callback:function(t){e.$set(e.formEntry,"email",t)},expression:"formEntry.email"}})],1),t("div",{staticClass:"col-xs-12"},[t("q-input",{attrs:{type:"username",label:e.$t("Username"),filled:!e.readonly,borderless:e.readonly,readonly:e.readonly,placeholder:e.readonly?"-":"","stack-label":"",rules:e.rules.username,error:!!e.errors.username,"error-message":e.errors.username},model:{value:e.formEntry.username,callback:function(t){e.$set(e.formEntry,"username",t)},expression:"formEntry.username"}})],1),e.isCreate&&!e.readonly?[t("div",{staticClass:"col-xs-12"},[t("q-input",{attrs:{type:"password",label:e.$t("Password")+"*",filled:!e.readonly,borderless:e.readonly,readonly:e.readonly,"stack-label":"",rules:e.rules.password,error:!!e.errors.password,"error-message":e.errors.password},model:{value:e.formEntry.password,callback:function(t){e.$set(e.formEntry,"password",t)},expression:"formEntry.password"}})],1),t("div",{staticClass:"col-xs-12"},[t("q-input",{attrs:{type:"password",label:e.$t("Confirm Password")+"*",filled:!e.readonly,borderless:e.readonly,readonly:e.readonly,"stack-label":"",rules:e.rules.password_confirmation,error:!!e.errors.password_confirmation,"error-message":e.errors.password_confirmation},model:{value:e.formEntry.password_confirmation,callback:function(t){e.$set(e.formEntry,"password_confirmation",t)},expression:"formEntry.password_confirmation"}})],1)]:e._e(),e.readonly?[t("div",{staticClass:"col-xs-12"},[t("q-input",{attrs:{value:e.formEntry.created_at,label:e.$t("Created At"),borderless:"",readonly:""}})],1),t("div",{staticClass:"col-xs-12"},[t("q-input",{attrs:{value:e.formEntry.updated_at,label:e.$t("Updated At"),borderless:"",readonly:""}})],1)]:e._e()],2)]),t("q-separator"),e.readonly?t("q-card-actions",{attrs:{align:"right"}},[t("q-btn",{attrs:{label:e.$t("Close"),flat:"",disable:e.loading||e.isLoading},on:{click:e.cancel}})],1):t("q-card-actions",{attrs:{align:"right"}},[t("q-btn",{attrs:{label:e.$t("Cancel"),flat:"",disable:e.loading||e.isLoading},on:{click:e.cancel}}),t("q-btn",{staticClass:"q-px-lg",attrs:{type:"submit",label:e.$t("".concat(e.isCreate?"Create":"Save")),color:e.isCreate?"positive":"primary",loading:e.loading||e.isLoading,unelevated:""}})],1)],1)],1)},f=[],p=(a("00b4"),a("cb29"),{name:null,role_id:null,username:null,email:null,password:null,password_confirmation:null}),b={name:"FormEntry",props:{loading:Boolean,closable:{type:Boolean,default:!0},entry:{type:Object,default:function(){return p}},readonly:{type:Boolean,default:!1}},data:function(){var e=this;return{formEntry:p,isLoading:!1,rules:{name:[function(t){return!!t||e.$t("{field} is required",{field:e.$t("Name")})}],role_id:[function(t){return!!t||e.$t("{field} is required",{field:e.$t("Role")})}],username:[function(t){return!t||!!t&&/^[a-zA-Z0-9_\.]+$/.test(t)||e.$t("{field} can only contain alphanumeric characters, underscores, and periods",{field:e.$t("Username")})}],email:[function(t){return!!t||e.$t("{field} is required",{field:e.$t("Email")})},function(t){return!!t&&e.$utils.isEmail(t)||e.$t("{field} is invalid",{field:e.$t("Email")})}],password:[function(t){return!!t||e.$t("{field} is required",{field:e.$t("Password")})},function(t){return t&&t.length>=6||e.$t("{field} must be at least {length} characters",{field:e.$t("Password"),length:6})}],password_confirmation:[function(t){return!!t||e.$t("{field} is required",{field:e.$t("Password confirmation")})},function(t){return t===e.formEntry.password||e.$t("{field} does not match",{field:e.$t("Password confirmation")})}]},errors:p}},computed:{isCreate:function(){return!this.formEntry.id}},watch:{entry:{immediate:!0,handler:function(e){var t=this;this.$nextTick((function(){t.fill(e)}))}}},methods:{fill:function(e){e=i()(i()({},p),e),e.created_at&&(e.created_at=u["b"].formatDate(e.created_at,"DD MMM YYYY HH:mm")),e.updated_at&&(e.updated_at=u["b"].formatDate(e.updated_at,"DD MMM YYYY HH:mm")),this.formEntry=e,this.$refs.form&&this.$refs.form.resetValidation()},onSubmit:function(){var e=this;return d()(o()().mark((function t(){var a,r,s,n,l,c;return o()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.loading&&!e.isLoading){t.next=2;break}return t.abrupt("return");case 2:if(!e.readonly){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.$refs.form.validate();case 6:if(a=t.sent,a){t.next=9;break}return t.abrupt("return");case 9:return r=i()({},e.formEntry),e.isLoading=!0,t.prev=11,s=r.id?"/v1/users/".concat(r.id):"/v1/users",n=r.id?"patch":"post",t.next=16,e.$api[n](s,r);case 16:l=t.sent,c=l.data,"success"===c.status&&e.$emit("success"),c.message?e.$q.notify({message:c.message}):"success"===c.status?e.$q.notify({message:e.$t("{entity} saved",{entity:e.$t("User")})}):e.$t("Failed to save {entity}",{entity:e.$t("user")}),t.next=25;break;case 22:t.prev=22,t.t0=t["catch"](11),t.t0.validation?e.errors=i()(i()({},p),t.t0.validation.errors):e.$q.notify(t.t0);case 25:e.isLoading=!1;case 26:case"end":return t.stop()}}),t,null,[[11,22]])})))()},cancel:function(){this.loading||this.isLoading||this.$emit("cancel")}}},h=b,y=(a("2c30"),a("2877")),v=a("f09f"),$=a("0378"),g=a("a370"),w=a("27f9"),q=a("eb85"),_=a("4b7e"),C=a("9c40"),x=a("eebe"),E=a.n(x),k=Object(y["a"])(h,m,f,!1,null,"17a61ef3",null),S=k.exports;E()(k,"components",{QCard:v["a"],QForm:$["a"],QCardSection:g["a"],QInput:w["a"],QSeparator:q["a"],QCardActions:_["a"],QBtn:C["a"]});var F=function(){var e=this,t=e._self._c;return t("q-card",{staticClass:"form-entry q-pa-sm"},[t("q-form",{ref:"form",staticClass:"q-gutter-md",attrs:{greedy:""},on:{submit:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[t("div",{staticClass:"text-h6 q-px-md q-pt-sm"},[e._v("\n      "+e._s(e.$t("Update {entity}",{entity:e.$t("Password")}))+"\n    ")]),t("q-card-section",{staticClass:"q-mb-md"},[t("div",{staticClass:"row q-col-gutter-sm"},[t("div",{staticClass:"col-xs-12"},[t("q-input",{attrs:{type:"password",label:e.$t("Password")+"*",filled:"",dense:"","stack-label":"",rules:e.rules.password,error:!!e.errors.password,"error-message":e.errors.password},model:{value:e.formEntry.password,callback:function(t){e.$set(e.formEntry,"password",t)},expression:"formEntry.password"}})],1),t("div",{staticClass:"col-xs-12"},[t("q-input",{attrs:{type:"password",label:e.$t("Confirm Password")+"*",filled:"",dense:"","stack-label":"",rules:e.rules.password_confirmation,error:!!e.errors.password_confirmation,"error-message":e.errors.password_confirmation},model:{value:e.formEntry.password_confirmation,callback:function(t){e.$set(e.formEntry,"password_confirmation",t)},expression:"formEntry.password_confirmation"}})],1)])]),t("q-separator"),t("q-card-actions",{attrs:{align:"right"}},[t("q-btn",{attrs:{label:e.$t("Cancel"),flat:"",disable:e.loading||e.isLoading},on:{click:e.cancel}}),t("q-btn",{staticClass:"q-px-lg",attrs:{type:"submit",label:e.$t("Update"),color:"primary",loading:e.loading||e.isLoading,unelevated:""}})],1)],1)],1)},P=[],Q={name:null,password:null,password_confirmation:null},V={name:"FormEntry",props:{loading:Boolean,closable:{type:Boolean,default:!0},entry:{type:Object,default:function(){return Q}},asView:{type:Boolean,default:!1}},data:function(){var e=this;return{formEntry:Q,isLoading:!1,rules:{name:[function(t){return!!t||e.$t("{field} is required",{field:e.$t("Name")})}],email:[function(t){return!!t||e.$t("{field} is required",{field:e.$t("Email")})},function(t){return!!t&&e.$utils.isEmail(t)||e.$t("{field} is invalid",{field:e.$t("Email")})}],password:[function(t){return!!t||e.$t("{field} is required",{field:e.$t("Password")})},function(t){return t&&t.length>=6||e.$t("{field} must be at least {length} characters",{field:e.$t("Password"),length:6})}],password_confirmation:[function(t){return!!t||e.$t("{field} is required",{field:e.$t("Password confirmation")})},function(t){return t===e.formEntry.password||e.$t("{field} does not match",{field:e.$t("Password confirmation")})}]},errors:Q}},computed:{isCreate:function(){return!this.formEntry.id}},watch:{entry:{immediate:!0,handler:function(e){var t=this;this.$nextTick((function(){t.fill(e)}))}}},methods:{fill:function(e){e=i()(i()({},Q),e),this.formEntry=e,this.$refs.form.resetValidation()},onSubmit:function(){var e=this;return d()(o()().mark((function t(){var a,r,s,n;return o()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.loading&&!e.isLoading){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$refs.form.validate();case 4:if(a=t.sent,a){t.next=7;break}return t.abrupt("return");case 7:return r={password:e.formEntry.password,password_confirmation:e.formEntry.password_confirmation},e.isLoading=!0,t.prev=9,t.next=12,e.$api.patch("/v1/users/".concat(e.formEntry.id),r);case 12:s=t.sent,n=s.data,"success"===n.status&&e.$emit("success"),"success"===n.status?e.$q.notify({message:e.$t("{entity} updated",{entity:e.$t("Password")})}):e.$t("Failed to update {entity}",{entity:e.$t("user")}),t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](9),t.t0.validation?e.errors=i()(i()({},Q),t.t0.validation.errors):e.$q.notify(t.t0);case 21:e.isLoading=!1;case 22:case"end":return t.stop()}}),t,null,[[9,18]])})))()},cancel:function(){this.loading||this.isLoading||this.$emit("cancel")}}},L=V,z=(a("7434"),Object(y["a"])(L,F,P,!1,null,"094d79bc",null)),D=z.exports;E()(z,"components",{QCard:v["a"],QForm:$["a"],QCardSection:g["a"],QInput:w["a"],QSeparator:q["a"],QCardActions:_["a"],QBtn:C["a"]});var R=a("05c2"),A={name:"PageUsers",components:{FormEntry:S,FormPassword:D},meta:function(){return{title:this.$t("Users")+" - "+this.$t("Web Console")}},breadcrumbs:function(){return["home",{text:this.$t("Users")}]},mixins:[R["a"]],data:function(){var e={fuzzy:{value:null},role_id:{value:null},name:{value:null,operator:"like"},email:{value:null,operator:"like"},username:{value:null,operator:"like"}};return{entries:[],columns:[{name:"id",field:"id",label:"#",realLabel:this.$t("ID"),align:"left",style:"max-width: 25px",headerClasses:"table-header-id",classes:"table-cell-id",sortable:!0},{name:"name",field:"name",label:this.$t("Name"),align:"left",headerClasses:"table-header-name",classes:"table-cell-name",sortable:!0},{name:"email",field:"email",label:this.$t("Email"),align:"left",headerClasses:"table-header-email",classes:"table-cell-email",sortable:!0},{name:"username",field:"username",label:this.$t("Username"),align:"left",headerClasses:"table-header-username",classes:"table-cell-username",sortable:!0},{name:"role_id",field:function(e){return e.role?e.role.name:""},label:this.$t("Role"),align:"left",headerClasses:"table-header-role_id",classes:"table-cell-role_id",sortable:!0},{name:"created_at",field:"created_at",label:this.$t("Created At"),align:"left",headerClasses:"table-header-created_at",classes:"table-cell-created_at",format:function(e){return u["b"].formatDate(e,"DD MMM YYYY HH:mm")},sortable:!0},{name:"action",label:"",align:"right",headerClasses:"table-header-action",classes:"table-cell-action",required:!0}],visibleColumns:["id","name","email","username","role_id","created_at"],isLoading:!1,isAdvancedSearchVisible:!1,isFormEntryVisible:!1,isFormEntryReadonly:!1,formEntry:{},isFormPasswordVisible:!1,formPassword:{},pagination:{sortBy:"id",descending:!1,page:1,rowsPerPage:15,rowsNumber:0},search:e,advancedSearch:e}},watch:{"search.fuzzy.value":function(e,t){e!==t&&e&&(this.search.name.value=null,this.search.email.value=null,this.search.username.value=null,this.onRequest())}},mounted:function(){var e=this;return d()(o()().mark((function t(){return o()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.onRequest();case 2:return t.next=4,e.$nextTick();case 4:e.$store.getters["tourGuide/finishedGroups"].users||e.$tourGuide.open("users");case 5:case"end":return t.stop()}}),t)})))()},methods:{onRequest:function(e){var t=this;return d()(o()().mark((function a(){var r,s,n;return o()().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t.isLoading){a.next=2;break}return a.abrupt("return");case 2:return e||(e={pagination:t.pagination}),t.isLoading=!0,r={table_pagination:i()({},e.pagination||{}),table_search:i()({},t.search),includes:"role"},a.prev=5,a.next=8,t.$api.get("/v1/users",{params:r});case 8:s=a.sent,n=s.data,"success"===n.status&&(t.entries=n.data.users,t.pagination=i()(i()({},t.pagination),n.pagination)),a.next=16;break;case 13:a.prev=13,a.t0=a["catch"](5),t.$q.notify(a.t0);case 16:t.isLoading=!1;case 17:case"end":return a.stop()}}),a,null,[[5,13]])})))()},onAdvancedSearch:function(){this.advancedSearch=JSON.parse(JSON.stringify(this.search)),this.search.fuzzy.value&&(this.advancedSearch.name.value=null,this.advancedSearch.email.value=null,this.advancedSearch.username.value=null),this.isAdvancedSearchVisible=!0},onAdvancedSearchSubmit:function(){this.search=this.$utils.merge({},this.advancedSearch),(this.advancedSearch.name.value||this.advancedSearch.email.value||this.advancedSearch.username.value)&&(this.search.fuzzy.value=null),this.onRequest(),this.isAdvancedSearchVisible=!1},onFormEntryCreate:function(){this.formEntry={},this.isFormEntryReadonly=!1,this.isFormEntryVisible=!0},onFormEntrySuccess:function(){this.isFormEntryReadonly=!1,this.isFormEntryVisible=!1,this.onRequest()},onFormEntryCancel:function(){this.isFormEntryReadonly=!1,this.isFormEntryVisible=!1},onFormPasswordSuccess:function(){this.isFormPasswordVisible=!1},onFormPasswordCancel:function(){this.isFormPasswordVisible=!1},onView:function(e){this.formEntry=i()({},e),this.isFormEntryReadonly=!0,this.isFormEntryVisible=!0},onEdit:function(e){this.formEntry=i()({},e),this.isFormEntryReadonly=!1,this.isFormEntryVisible=!0},onEditPassword:function(e){this.formPassword=i()({},e),this.isFormPasswordVisible=!0},onDelete:function(e){var t=this;this.isLoading||this.$q.dialog({title:this.$t("Confirm"),message:this.$t("Are you sure want to delete this {entity}?",{entity:this.$t("user")}),cancel:{label:this.$t("Cancel"),color:"dark",flat:!0},ok:{label:this.$t("Yes"),color:"primary",unelevated:!0,flat:!0,class:"text-weight-bold"},persistent:!0}).onOk(d()(o()().mark((function a(){var r,s;return o()().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$api.delete("/v1/users/".concat(e.id));case 3:r=a.sent,s=r.data,s.message?(t.$q.notify({message:s.message}),t.onRequest()):"success"===s.status?(t.$q.notify({message:t.$t("{entity} deleted",{entity:t.$t("User")})}),t.onRequest()):t.$t("Failed to delete {entity}",{entity:t.$t("user")}),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),t.$q.notify(a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))).onCancel((function(){t.isLoading=!1}))}}},U=A,Y=(a("ce22"),a("9989")),B=a("6ac5"),M=a("65c6"),N=a("05c0"),O=a("4e73"),T=a("9f0a"),H=a("eaac"),I=a("db86"),j=a("0016"),G=a("24e8"),J=a("7f67"),W=Object(y["a"])(U,r,s,!1,null,null,null);t["default"]=W.exports;E()(W,"components",{QPage:Y["a"],QBtn:C["a"],QToolbarTitle:B["a"],QCard:v["a"],QToolbar:M["a"],QInput:w["a"],QTooltip:N["a"],QMenu:O["a"],QOptionGroup:T["a"],QTable:H["a"],QTd:I["a"],QIcon:j["a"],QDialog:G["a"],QForm:$["a"],QCardSection:g["a"],QSeparator:q["a"],QCardActions:_["a"]}),E()(W,"directives",{ClosePopup:J["a"]})},7434:function(e,t,a){"use strict";a("902e")},"902e":function(e,t,a){},bb8e:function(e,t,a){},ce22:function(e,t,a){"use strict";a("bb8e")}}]);