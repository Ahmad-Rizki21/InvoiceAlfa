(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[22],{"41a8":function(t,e,n){"use strict";n("bef4")},a763:function(t,e,n){"use strict";n.r(e);n("ac1f"),n("5319");var a=function(){var t=this,e=t._self._c;return e("q-page",{staticClass:"page-cust page-cust-bill container"},[e("div",{staticClass:"page-cust-header"},[e("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"arrow_back"},on:{click:t.onGoBack}}),e("q-toolbar-title",[t._v("\n      "+t._s(t.$t("Bill Payment"))+"\n    ")])],1),t.entry.status==t.$constant.invoice_status.Rejected&&t.entry.reject_reason?e("div",{staticClass:"row q-col-gutter-lg q-mb-md"},[e("div",{staticClass:"col-xs-12 col-md-10"},[e("q-banner",{staticClass:"text-white bg-red",attrs:{dense:""},scopedSlots:t._u([{key:"avatar",fn:function(){return[e("q-icon",{attrs:{name:"warning",color:"white"}})]},proxy:!0}],null,!1,894313219)},[t._v("\n        Bukti pembayaran Anda ditolak dengan alasan: "),e("strong",[t._v(t._s(t.entry.reject_reason))])])],1)]):t._e(),t.pageErrorCode?e("div",{staticClass:"row q-col-gutter-sm row-bill-detail"},[404===t.pageErrorCode?e("div",{staticClass:"error-box"},[e("q-icon",{attrs:{name:"fmd_bad"}}),e("div",{staticClass:"error-message"},[t._v("\n        "+t._s(t.$t("Invoice could not be found"))+"\n      ")]),e("q-btn",{attrs:{color:"secondary",outline:""},on:{click:function(e){return e.preventDefault(),t.$router.replace("/")}}},[t._v("\n        "+t._s(t.$t("Back to home"))+"\n      ")])],1):e("div",{staticClass:"error-box"},[e("q-icon",{attrs:{name:"sentiment_very_dissatisfied"}}),e("div",{staticClass:"error-message"},[t._v("\n        "+t._s(t.$t("An error occurred while trying to get bill data"))+"\n      ")]),e("q-btn",{attrs:{color:"secondary",outline:""},on:{click:function(e){return e.preventDefault(),t.onRequest()}}},[t._v("\n        "+t._s(t.$t("Refresh"))+"\n      ")])],1)]):e("div",{staticClass:"row q-col-gutter-lg row-bill-detail"},[e("div",{staticClass:"col-xs-12 col-md-10"},[e("card-bill-detail",{attrs:{invoice:t.entry,fetching:t.isFetching}}),t.entry.status!=t.$constant.invoice_status.Paid?e("card-payment-detail",{attrs:{invoice:t.entry,customer:t.customer}}):t._e(),e("card-payment-proof",{attrs:{invoice:t.entry,editable:t.isPaymentProofsEditable,addable:t.entry.status!=t.$constant.invoice_status.Paid,uploadable:t.entry.status!=t.$constant.invoice_status.Paid,"show-payment-date":""},on:{uploaded:t.onPaymentProofUploaded}})],1),e("div",{staticClass:"col-md-2"},[e("q-btn",{staticClass:"font-weight-bold q-mb-sm btn-print-invoice",attrs:{to:"/c/invoice/".concat(t.entry.uid),target:"_blank",flat:"",color:"primary"}},[t._v("\n        "+t._s(t.$t("View {entity}",{entity:t.$t("Invoice")+" & "+t.$t("Kwitansi")}))+"\n      ")])],1)])])},r=[],i=n("ded3"),s=n.n(i),o=n("7ec2"),c=n.n(o),u=n("c973"),l=n.n(u),d=(n("caad"),n("2532"),n("14d9"),n("21f1")),f=n("f834"),p=n("5125"),v={name:"PageCustomerCust",components:{CardBillDetail:d["a"],CardPaymentDetail:f["a"],CardPaymentProof:p["a"]},meta:function(){return{title:this.$t("Bill Payment")}},breadcrumbs:function(){return["Dashboard"]},data:function(){return{entry:{},customer:{},isFetching:!0,isLoading:!1,pageErrorCode:null}},computed:{emptyInvoice:function(){return!this.isFetching&&!this.entry},isPaymentProofsEditable:function(){var t=this.$constant.invoice_status;return![t.Paid,t.PendingReview].includes(this.entry.status)}},created:function(){"u"===this.$auth.authType&&this.$router.replace("/")},mounted:function(){var t=this;return l()(c()().mark((function e(){return c()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.onRequest();case 1:case"end":return e.stop()}}),e)})))()},methods:{onRequest:function(t){var e=this;return l()(c()().mark((function n(){var a,r,i,o;return c()().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e.isLoading){n.next=2;break}return n.abrupt("return");case 2:return t||(t={pagination:999999999}),e.pageErrorCode=null,e.isFetching=!0,e.isLoading=!0,a={table_pagination:s()({},t.pagination||{}),includes:"invoiceServices|invoicePaymentProofs|distributionCenter|franchise"},n.prev=7,n.next=10,e.$api.get("/v1/invoices/".concat(e.$route.params.id),{params:a});case 10:if(r=n.sent,i=r.data,"success"!==i.status){n.next=19;break}if(e.customer=i.data.invoice.distribution_center||i.data.invoice.franchise,i.data.invoice.distribution_center=null,e.entry=i.data.invoice,e.entry){n.next=19;break}return e.$router.replace("/"),n.abrupt("return");case 19:n.next=25;break;case 21:n.prev=21,n.t0=n["catch"](7),o=n.t0.response||{},404===o.status?e.pageErrorCode=404:e.pageErrorCode=500;case 25:e.isFetching=!1,e.isLoading=!1;case 27:case"end":return n.stop()}}),n,null,[[7,21]])})))()},formatMonth:function(t){var e=date.extractDate(t.due_at||t.published_at,"YYYY-MM-DD");return date.formatDate(e,"MMMM")},formatDueAt:function(t){var e=date.extractDate(t.due_at,"YYYY-MM-DD");return date.formatDate(e,"DD MMM YYYY")},formatTotal:function(t){return this.$utils.currency(t.total,{decimal:".",thousand:",",symbol:"Rp. "})||"-"},onGoBack:function(){this.$router.push("/")},onPaymentProofUploaded:function(){this.onRequest()}}},m=v,b=(n("41a8"),n("2877")),h=n("9989"),g=n("9c40"),y=n("6ac5"),_=n("54e1"),w=n("0016"),C=n("eebe"),P=n.n(C),$=Object(b["a"])(m,a,r,!1,null,null,null);e["default"]=$.exports;P()($,"components",{QPage:h["a"],QBtn:g["a"],QToolbarTitle:y["a"],QBanner:_["a"],QIcon:w["a"]})},bef4:function(t,e,n){}}]);