(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"2f790":function(t,e,n){"use strict";n("ed1a")},"4bd7":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t._self._c;return e("q-page",{staticClass:"page-remote-locations page-remote-location-single page-remote-location-show"},[e("portal",{attrs:{to:"app-breadcrumbs"}},[e("breadcrumbs")],1),e("portal",{attrs:{to:"app-toolbar"}},[e("q-toolbar-title",[t._v("\n      "+t._s(t.$t("Settings"))+"\n    ")]),e("div",{staticClass:"sep"}),t.$auth.can("create.remote-location")?e("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"add"}}):t._e()],1),e("div",{staticClass:"page-header"},[e("q-toolbar-title",[t._v("\n      "+t._s(t.$t("Settings"))+"\n    ")]),e("div",{staticClass:"sep"}),t.entry.id?e("small",{staticClass:"entry-id"},[e("span",{staticClass:"user-select-none"},[t._v("ID: #")]),t._v(t._s(t.entry.id))]):t._e()],1),e("div",{staticClass:"page-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-12 col-md-12"},[e("form-template-settings",{attrs:{entry:t.entry,fetching:t.isFetching,editable:t.isEditable},on:{"update:editable":function(e){t.isEditable=e},success:t.onSuccess,deleted:t.onDeleted}})],1)])])],1)},r=[],s=n("7ec2"),o=n.n(s),i=n("ded3"),l=n.n(i),c=n("c973"),u=n.n(c),m=(n("ac1f"),n("5319"),function(){var t=this,e=t._self._c;return e("q-card",{staticClass:"form-entry q-pa-sm form-template-settings",class:{readonly:t.readonly}},[e("q-form",{ref:"form",staticClass:"q-gutter-md",attrs:{greedy:""},on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[e("q-card-section",[e("div",{staticClass:"q-mb-md text-subtitle text-weight-bold"},[t._v(t._s(t.$t("Monetary")))]),e("div",{staticClass:"row q-col-gutter-sm"},[e("div",{staticClass:"col-xs-12 col-sm-6 col-md-3"},[e("q-input",{attrs:{label:t.$t("Stamp Duty"),filled:!t.readonly,borderless:t.readonly,readonly:t.readonly,dense:"","stack-label":"",name:""+t.constant.StampDuty,autocomplete:"off",rules:t.rules[t.constant.StampDuty],error:!!t.errors[t.constant.StampDuty],"error-message":t.errors[t.constant.StampDuty]},on:{keypress:function(e){return t.$globalListeners.onKeypressOnlyFloat(e)}},model:{value:t.formEntry[t.constant.StampDuty],callback:function(e){t.$set(t.formEntry,t.constant.StampDuty,e)},expression:"formEntry[constant.StampDuty]"}})],1),e("div",{staticClass:"col-xs-12 col-sm-6 col-md-3"},[e("q-input",{attrs:{label:t.$t("PPN Percentage"),filled:!t.readonly,borderless:t.readonly,readonly:t.readonly,name:""+t.constant.PpnPercentage,"stack-label":"",suffix:"%",autocomplete:"off",dense:"",rules:t.rules[t.constant.PpnPercentage],error:!!t.errors[t.constant.PpnPercentage],"error-message":t.errors[t.constant.PpnPercentage]},on:{keypress:function(e){return t.$globalListeners.onKeypressOnlyFloat(e)}},model:{value:t.formEntry[t.constant.PpnPercentage],callback:function(e){t.$set(t.formEntry,t.constant.PpnPercentage,e)},expression:"formEntry[constant.PpnPercentage]"}})],1)]),e("div",{staticClass:"q-mb-md text-subtitle text-weight-bold"},[t._v(t._s(t.$t("Signatory")))]),e("div",{staticClass:"row q-col-gutter-sm"},[e("div",{staticClass:"col-xs-12 col-sm-6 col-md-4"},[e("q-input",{attrs:{label:t.$t("Signatory Name")+"*",filled:!t.readonly,borderless:t.readonly,readonly:t.readonly,dense:"",name:""+t.constant.SignatoryName,"stack-label":"",autocomplete:"off",rules:t.rules[t.constant.SignatoryName],error:!!t.errors[t.constant.SignatoryName],"error-message":t.errors[t.constant.SignatoryName]},model:{value:t.formEntry[t.constant.SignatoryName],callback:function(e){t.$set(t.formEntry,t.constant.SignatoryName,e)},expression:"formEntry[constant.SignatoryName]"}})],1),e("div",{staticClass:"col-xs-12 col-sm-6 col-md-4"},[e("q-input",{attrs:{label:t.$t("Signatory Position")+"*",filled:!t.readonly,borderless:t.readonly,readonly:t.readonly,name:""+t.constant.SignatoryPosition,"stack-label":"",autocomplete:"off",dense:"",rules:t.rules[t.constant.SignatoryPosition],error:!!t.errors[t.constant.SignatoryPosition],"error-message":t.errors[t.constant.SignatoryPosition]},model:{value:t.formEntry[t.constant.SignatoryPosition],callback:function(e){t.$set(t.formEntry,t.constant.SignatoryPosition,e)},expression:"formEntry[constant.SignatoryPosition]"}})],1),e("div",{staticClass:"col-xs-12 col-sm-8 col-md-8"},[e("q-field",{attrs:{label:t.$t("Signature")+"*",filled:!t.readonly,borderless:t.readonly,readonly:t.readonly,name:""+t.constant.SignatureImage,"stack-label":"",autocomplete:"off",dense:"",rules:t.rules[t.constant.SignatureImage],error:!!t.errors[t.constant.SignatureImage],"error-message":t.errors[t.constant.SignatureImage]}},[e("div",{staticClass:"signature-image-wrapper"},[e("div",{staticClass:"q-btns q-ml-auto"},[e("q-btn",{class:{"font-weight-bold":"upload"===t.signatureImageMode},attrs:{label:t.$t("Upload"),color:"upload"===t.signatureImageMode?"primary":"secondary",padding:"xs",flat:""},on:{click:function(e){t.signatureImageMode="upload"}}}),e("q-btn",{class:{"font-weight-bold":"draw"===t.signatureImageMode},attrs:{label:t.$t("Draw"),color:"draw"===t.signatureImageMode?"primary":"secondary",padding:"xs",flat:""},on:{click:function(e){t.signatureImageMode="draw"}}})],1),"upload"===t.signatureImageMode?e("upload-field",{attrs:{preview:t.signatureImagePreview,"min-dimension":t.signatureImageRules.minDimension,"max-file-size":t.signatureImageRules.maxFileSize,accept:t.signatureImageRules.accept,url:t.formEntry[t.constant.SignatureImage],readonly:!1,editable:!0,addable:!t.signatureImagePreview,uploading:!1},on:{"update:preview":function(e){t.signatureImagePreview=e},deleted:function(e){t.signatureImagePreview=null}},model:{value:t.formEntry[t.constant.SignatureImage],callback:function(e){t.$set(t.formEntry,t.constant.SignatureImage,e)},expression:"formEntry[constant.SignatureImage]"}}):e("signature-pad",{ref:"signaturePad",attrs:{url:t.formEntry[t.constant.SignatureImage]}})],1)])],1),e("div",{staticClass:"col-xs-12 col-sm-8 col-md-8"},[e("q-field",{attrs:{label:t.$t("Stamp")+"*",filled:!t.readonly,borderless:t.readonly,readonly:t.readonly,name:""+t.constant.StampImage,"stack-label":"",autocomplete:"off",dense:"",rules:t.rules[t.constant.StampImage],error:!!t.errors[t.constant.StampImage],"error-message":t.errors[t.constant.StampImage]}},[e("div",{staticClass:"stamp-image-wrapper"},[e("upload-field",{attrs:{preview:t.stampImagePreview,"min-dimension":t.signatureImageRules.minDimension,"max-file-size":t.signatureImageRules.maxFileSize,accept:t.signatureImageRules.accept,url:t.formEntry[t.constant.StampImage],readonly:!1,editable:!0,addable:!t.stampImagePreview,uploading:!1},on:{"update:preview":function(e){t.stampImagePreview=e},deleted:function(e){t.stampImagePreview=null}},model:{value:t.formEntry[t.constant.StampImage],callback:function(e){t.$set(t.formEntry,t.constant.StampImage,e)},expression:"formEntry[constant.StampImage]"}})],1)])],1)]),e("div",{staticClass:"q-mb-md text-subtitle text-weight-bold"},[t._v(t._s(t.$t("Bank Transfer")))]),e("div",{staticClass:"row q-col-gutter-sm"},[e("div",{staticClass:"col-xs-12 col-sm-6 col-md-9"},[e("q-input",{attrs:{label:t.$t("Bank Name")+"*",filled:!t.readonly,borderless:t.readonly,readonly:t.readonly,dense:"",name:""+t.constant.BankTransferName,"stack-label":"",autocomplete:"off",rules:t.rules[t.constant.BankTransferName],error:!!t.errors[t.constant.BankTransferName],"error-message":t.errors[t.constant.BankTransferName]},model:{value:t.formEntry[t.constant.BankTransferName],callback:function(e){t.$set(t.formEntry,t.constant.BankTransferName,e)},expression:"formEntry[constant.BankTransferName]"}})],1)]),e("div",{staticClass:"row q-col-gutter-sm"},[e("div",{staticClass:"col-xs-12 col-sm-6 col-md-4"},[e("q-input",{attrs:{label:t.$t("Account Number")+"*",filled:!t.readonly,borderless:t.readonly,readonly:t.readonly,name:""+t.constant.BankTransferAccountNumber,"stack-label":"",autocomplete:"off",dense:"",rules:t.rules[t.constant.BankTransferAccountNumber],error:!!t.errors[t.constant.BankTransferAccountNumber],"error-message":t.errors[t.constant.BankTransferAccountNumber]},model:{value:t.formEntry[t.constant.BankTransferAccountNumber],callback:function(e){t.$set(t.formEntry,t.constant.BankTransferAccountNumber,e)},expression:"formEntry[constant.BankTransferAccountNumber]"}})],1),e("div",{staticClass:"col-xs-12 col-sm-6 col-md-5"},[e("q-input",{attrs:{label:t.$t("Account Name")+"*",filled:!t.readonly,borderless:t.readonly,readonly:t.readonly,name:""+t.constant.BankTransferAccountName,"stack-label":"",autocomplete:"off",dense:"",rules:t.rules[t.constant.BankTransferAccountName],error:!!t.errors[t.constant.BankTransferAccountName],"error-message":t.errors[t.constant.BankTransferAccountName]},model:{value:t.formEntry[t.constant.BankTransferAccountName],callback:function(e){t.$set(t.formEntry,t.constant.BankTransferAccountName,e)},expression:"formEntry[constant.BankTransferAccountName]"}})],1)]),e("div",{staticClass:"q-mb-md text-subtitle text-weight-bold"},[t._v(t._s(t.$t("Misc")))]),e("div",{staticClass:"row q-col-gutter-sm"},[e("div",{staticClass:"col-xs-12 col-md-8"},[e("text-editor",{attrs:{label:t.$t("Invoice Note"),filled:!t.readonly,borderless:t.readonly,readonly:t.readonly,dense:"",name:""+t.constant.InvoiceNote,"stack-label":"",autocomplete:"off",rules:t.rules[t.constant.InvoiceNote],error:!!t.errors[t.constant.InvoiceNote],"error-message":t.errors[t.constant.InvoiceNote]},model:{value:t.formEntry[t.constant.InvoiceNote],callback:function(e){t.$set(t.formEntry,t.constant.InvoiceNote,e)},expression:"formEntry[constant.InvoiceNote]"}})],1)]),e("div",{staticClass:"row q-col-gutter-sm"},[e("div",{staticClass:"col-xs-12 col-md-4 col-lg-3"},[e("q-input",{attrs:{label:t.$t("Last Invoice No"),filled:!t.readonly,borderless:t.readonly,readonly:t.readonly,name:""+t.constant.InjectInvoiceNo,"stack-label":"",autocomplete:"off",dense:"",rules:t.rules[t.constant.InjectInvoiceNo],error:!!t.errors[t.constant.InjectInvoiceNo],"error-message":t.errors[t.constant.InjectInvoiceNo]},on:{keypress:function(e){return t.$globalListeners.onKeypressOnlyUnsignedNumber(e)}},model:{value:t.formEntry[t.constant.InjectInvoiceNo],callback:function(e){t.$set(t.formEntry,t.constant.InjectInvoiceNo,e)},expression:"formEntry[constant.InjectInvoiceNo]"}})],1)])]),e("q-separator"),t.readonly?e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{attrs:{label:t.$t("Close"),flat:"",disable:t.loading||t.isLoading},on:{click:t.cancel}})],1):e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{attrs:{label:t.$t("Reset"),flat:"",disable:t.loading||t.isLoading},on:{click:t.cancel}}),e("q-btn",{staticClass:"q-px-lg",attrs:{type:"submit",label:t.$t("Save"),color:"primary",loading:t.loading||t.isLoading,unelevated:""}})],1)],1)],1)}),d=[],g=n("9523"),f=n.n(g),p=(n("cb29"),n("00b4"),n("99af"),{name:"FormEntry",props:{loading:Boolean,closable:{type:Boolean,default:!0},entry:{type:Object,default:function(){return this.generateDefaultFormEntry()}},readonly:{type:Boolean,default:!1}},data:function(){var t=this;return{formEntry:this.generateDefaultFormEntry(),isLoading:!1,rules:{terminal_name:[function(e){return!!e||t.$t("{field} is required",{field:t.$t("Terminal name")})}],location:[function(e){return!!e||t.$t("{field} is required",{field:t.$t("Location")})}],online_at:[function(e){return!e||!!e&&t.$utils.isDateValid(e)||t.$t("{field} is invalid",{field:t.$t("Online at")})}],latitude:[],longitude:[],pic_name:[],pic_phone_number:[],sla:[]},errors:this.generateDefaultFormEntry(),signatureImageRules:{maxFileSize:3145728,minDimension:100,accept:"image/png"},signatureImagePreview:null,stampImagePreview:null,signatureImageDrawing:null,signatureImageMode:"upload",originalEntry:{}}},computed:{isCreate:function(){return!this.formEntry.id},constant:function(){return this.$constant.setting_key||{InvoiceNote:3}}},watch:{entry:{immediate:!0,handler:function(t){var e=this;this.$nextTick((function(){e.fill(t)}))}}},methods:{generateDefaultFormEntry:function(){var t,e=this.constant||{};return t={},f()(t,e.BankTransferAccountName,null),f()(t,e.BankTransferAccountNumber,null),f()(t,e.BankTransferName,null),f()(t,e.InvoiceNote||3,""),f()(t,e.PpnPercentage,null),f()(t,e.SignatoryName,null),f()(t,e.SignatoryPosition,null),f()(t,e.StampDuty,null),f()(t,e.SignatureImage,null),f()(t,e.StampImage,null),f()(t,e.InjectInvoiceNo,null),t},fill:function(t){t=l()(l()({},this.generateDefaultFormEntry()),t),t[this.constant.InvoiceNote||3]=t[this.constant.InvoiceNote||3]||"",this.originalEntry=l()({},t),this.formEntry=t,this.signatureImagePreview=t[this.constant.SignatureImage]||null,this.stampImagePreview=t[this.constant.StampImage]||null,this.signatureImageMode="upload",this.$refs.form.resetValidation()},onSubmit:function(){var t=this;return u()(o()().mark((function e(){var n,a,r,s,i,c,u;return o()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.loading&&!t.isLoading){e.next=2;break}return e.abrupt("return");case 2:if(!t.readonly){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,t.$refs.form.validate();case 6:if(n=e.sent,n){e.next=9;break}return e.abrupt("return");case 9:for(i in a=t.$constant.setting_key,r=l()({},t.formEntry),s=new FormData,"draw"===t.signatureImageMode&&(t.$refs.signaturePad?t.$refs.signaturePad.isEmpty()?r[a.SignatureImage]="":r[a.SignatureImage]=t.$refs.signaturePad.toBlob():r[a.SignatureImage]=""),r)null!==r[i]&&void 0!==r[i]||(r[i]=""),s.append(i,r[i]);return t.isLoading=!0,e.prev=15,e.next=18,t.$api.post("/v1/settings",s,{headers:{"Content-Type":"multipart/form-data"}});case 18:c=e.sent,u=c.data,"success"===u.status&&t.$emit("success",u.data.settings),u.message?t.$q.notify({message:u.message}):"success"===u.status?t.$q.notify({message:t.$t("{entity} saved",{entity:t.$t("Settings")})}):t.$t("Failed to save {entity}",{entity:t.$t("settings")}),e.next=27;break;case 24:e.prev=24,e.t0=e["catch"](15),e.t0.validation?t.errors=l()(l()({},t.generateDefaultFormEntry()),e.t0.validation.errors):t.$q.notify(e.t0);case 27:t.isLoading=!1;case 28:case"end":return e.stop()}}),e,null,[[15,24]])})))()},cancel:function(){this.loading||this.isLoading||(this.$emit("cancel"),this.signatureImagePreview=null,this.stampImagePreview=null,this.fill(this.originalEntry))},onDoubleInputChildKeydown:function(t){var e=String(t.target.value).replace(/[^0-9]/g,""),n=/^[0-9]$/i.test(t.key);n&&(e="".concat(e).concat(t.key)),(e>59||String(e).length>2)&&n&&t.preventDefault()}}}),y=p,b=(n("2f790"),n("2877")),v=n("f09f"),I=n("0378"),S=n("a370"),h=n("27f9"),k=n("8572"),$=n("9c40"),N=n("eb85"),w=n("4b7e"),x=n("eebe"),E=n.n(x),q=Object(b["a"])(y,m,d,!1,null,null,null),P=q.exports;E()(q,"components",{QCard:v["a"],QForm:I["a"],QCardSection:S["a"],QInput:h["a"],QField:k["a"],QBtn:$["a"],QSeparator:N["a"],QCardActions:w["a"]});var C={name:"PageSettingsShow",components:{FormTemplateSettings:P},meta:function(){return{title:this.$t("Settings")+" - "+this.$t("Web Console")}},breadcrumbs:function(){var t=["home",{text:this.$t("Settings"),to:"/remote-locations"}];return t},data:function(){return{isLoading:!1,isFetching:!1,isEditable:!1,entry:{}}},computed:{isCreate:function(){return!Boolean(this.entry.id)}},mounted:function(){this.onRequest()},methods:{onRequest:function(t){var e=this;return u()(o()().mark((function n(){var a,r;return o()().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e.isLoading&&!e.isFetching){n.next=2;break}return n.abrupt("return");case 2:return t||(t={id:e.$route.params.id}),e.isLoading=!0,e.isFetching=!0,{table_pagination:l()({},t.pagination||{}),includes:"customer"},n.prev=6,n.next=9,e.$api.get("/v1/settings");case 9:a=n.sent,r=a.data,"success"===r.status&&(e.entry=r.data.settings),n.next=17;break;case 14:n.prev=14,n.t0=n["catch"](6),e.$q.notify(n.t0);case 17:e.isLoading=!1,e.isFetching=!1;case 19:case"end":return n.stop()}}),n,null,[[6,14]])})))()},onSuccess:function(t){this.entry=l()({},t)},onDeleted:function(){this.$router.replace("/remote-locations")}}},B=C,T=(n("502f"),n("9989")),_=n("6ac5"),D=Object(b["a"])(B,a,r,!1,null,null,null);e["default"]=D.exports;E()(D,"components",{QPage:T["a"],QToolbarTitle:_["a"],QBtn:$["a"]})},"502f":function(t,e,n){"use strict";n("b9d8")},b9d8:function(t,e,n){},ed1a:function(t,e,n){}}]);