(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{1973:function(e,r,n){"use strict";n.r(r);var t=function(){var e=this,r=e._self._c;return r("q-dialog",{attrs:{persistent:"","full-width":"fix"===e.status,"full-height":"fix"===e.status},model:{value:e.value,callback:function(r){e.value=r},expression:"value"}},[e.status?"uploaded"===e.status?r("form-import-cache",{attrs:{"import-type":e.importType,status:e.status,"import-path":e.importPath},on:{success:e.onFormImportCacheSuccess}}):"cached"===e.status?r("form-import-process",{attrs:{"import-type":e.importType,status:e.status,"import-path":e.importPath,"processing-page":e.processingPage},on:{updated:e.onFormImportProcessUpdated,success:e.onFormImportProcessSuccess}}):"fix"===e.status?r("form-import-fix",{attrs:{"import-type":e.importType,status:e.status,"import-path":e.importPath,"processing-page":e.processingPage},on:{success:e.onFormImportFixSuccess}}):e._e():r("form-import-upload",{attrs:{"import-type":e.importType,"template-url":e.templateUrl},on:{success:e.onFormImportUploadSuccess,cancel:e.onFormImportUploadCancel}})],1)},o=[],s=(n("a9e3"),n("a15b"),function(){var e=this,r=e._self._c;return r("q-card",{staticClass:"form-import-upload q-pa-sm"},[r("q-form",{ref:"form",staticClass:"q-gutter-md",attrs:{greedy:""},on:{submit:function(r){return r.preventDefault(),e.onSubmit.apply(null,arguments)}}},[r("div",{staticClass:"text-h6 q-px-md q-pt-sm"},[e._v("\n      "+e._s(e.$t("Import"))+"\n    ")]),r("q-card-section",{staticClass:"q-mb-md"},[e.templateUrl?r("div",{staticClass:"row q-col-gutter-sm q-mb-lg"},[r("div",{staticClass:"col-xs-12"},[r("small",[r("a",{attrs:{href:e.templateUrl,download:""}},[e._v(e._s(e.$t("Download template")))])])])]):e._e(),r("div",{staticClass:"row q-col-gutter-sm"},[r("div",{staticClass:"col-xs-12"},[r("q-file",{attrs:{label:e.$t("File")+"*",filled:"",accept:e.xlsMimeType.join(","),dense:"","stack-label":"","max-file-size":e.maxFileSize,rules:e.rules.file,error:!!e.errors.file,"error-message":e.errors.file},on:{input:e.onChange,rejected:e.onRejected},model:{value:e.internalValue,callback:function(r){e.internalValue=r},expression:"internalValue"}})],1)])]),r("q-separator"),r("q-card-actions",{attrs:{align:"right"}},[r("q-btn",{attrs:{label:e.$t("Cancel"),flat:"",disable:e.loading||e.isLoading},on:{click:e.cancel}}),r("q-btn",{staticClass:"q-px-lg",attrs:{type:"submit",label:e.$t("Import"),color:"primary",loading:e.loading||e.isLoading,unelevated:""}})],1)],1)],1)}),i=[],a=n("7ec2"),l=n.n(a),c=n("ded3"),d=n.n(c),u=n("c973"),f=n.n(u),m=(n("99af"),{name:"FormImportUpload",props:{loading:Boolean,importType:{type:[String,Number]},templateUrl:{type:String}},data:function(){var e=this;return{internalValue:null,isLoading:!1,rules:{file:[function(r){return!!r||e.$t("{field} is required",{field:e.$t("File")})}],email:[function(r){return!!r||e.$t("{field} is required",{field:e.$t("Email")})},function(r){return!!r&&e.$utils.isEmail(r)||e.$t("{field} is invalid",{field:e.$t("Email")})}],password:[function(r){return!!r||e.$t("{field} is required",{field:e.$t("Password")})},function(r){return r&&r.length>=6||e.$t("{field} must be at least {length} characters",{field:e.$t("Password"),length:6})}],password_confirmation:[function(r){return!!r||e.$t("{field} is required",{field:e.$t("Password confirmation")})},function(r){return r===e.formEntry.password||e.$t("{field} does not match",{field:e.$t("Password confirmation")})}]},errors:{},xlsMimeType:["application/vnd.ms-excel","application/msexcel","application/x-msexcel","application/x-ms-excel","application/x-excel","application/x-dos_ms_excel","application/xls","application/x-xls","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],maxFileSize:512e3}},computed:{isCreate:function(){return!this.formEntry.id}},methods:{onSubmit:function(){var e=this;return f()(l()().mark((function r(){var n,t,o,s,i,a,c;return l()().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e.loading&&!e.isLoading){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,e.$refs.form.validate();case 4:if(n=r.sent,n){r.next=7;break}return r.abrupt("return");case 7:if(t=new FormData,t.append("file",e.internalValue),e.isLoading=!0,o=null,s=e.importType,i=e.$constant.import_type,s===i.DistributionCenter?o="/v1/distribution-centers/import/upload":s===i.Store?(o="/v1/stores/import/upload",t.append("distribution_center_id",e.$route.params.id)):s===i.Franchise&&(o="/v1/franchises/import/upload",t.append("distribution_center_id",e.$route.params.id)),o){r.next=18;break}return e.$q.notify({message:e.$t("Fatal error occurred. No import type given. Please try again."),type:"error"}),e.isLoading=!1,r.abrupt("return");case 18:return r.prev=18,r.next=21,e.$api.post(o,t,{headers:{"Content-Type":"multipart/form-data"}});case 21:a=r.sent,c=a.data,"success"!==c.status?e.$q.notify({message:c.message||e.$t("Failed to upload import file")}):e.$emit("success",c.data.import_path),r.next=29;break;case 26:r.prev=26,r.t0=r["catch"](18),r.t0.validation?e.errors=d()({},r.t0.validation.errors):e.$q.notify(r.t0);case 29:e.isLoading=!1;case 30:case"end":return r.stop()}}),r,null,[[18,26]])})))()},cancel:function(){this.loading||this.isLoading||this.$emit("cancel")},onChange:function(e){this.errorMessages=[],e&&e.type?this.internalValue=e:this.internalValue=null},onRejected:function(e){var r,n=this.$t("Selected file is not accepted. Please use another one.");e&&e[0]&&e[0].failedPropValidation&&(r=e[0].failedPropValidation,"accept"===r?n=this.$t("The selected file is unsupported. Supported files: {entity}",{entity:".png, .jpg, .jpeg, .svg, .heic"}):"max-file-size"===r?n=this.$t("File size exceeds maximum limit: {max}",{max:this.$utils.humanStorageSize(this.maxFileSize)}):"max-dimension"===r&&(n=this.$t("Image resolution must be greater than {resolution}",{resolution:"".concat(this.minDimension,"x").concat(this.minDimension)}))),this.$q.notify({type:"negative",message:n})}}}),p=m,_=(n("70f7"),n("2877")),g=n("f09f"),b=n("0378"),w=n("a370"),h=n("7d53"),v=n("eb85"),x=n("4b7e"),E=n("9c40"),R=n("eebe"),y=n.n(R),I=Object(_["a"])(p,s,i,!1,null,"392fcc4b",null),q=I.exports;y()(I,"components",{QCard:g["a"],QForm:b["a"],QCardSection:w["a"],QFile:h["a"],QSeparator:v["a"],QCardActions:x["a"],QBtn:E["a"]});var $=function(){var e=this,r=e._self._c;return r("q-card",{staticClass:"form-import-cache q-pa-sm"},[r("q-form",{ref:"form",staticClass:"q-gutter-md"},[r("div",{staticClass:"text-h6 q-px-md q-pt-sm"},[e._v("\n      "+e._s(e.$t("Import"))+"\n    ")]),r("q-card-section",{staticClass:"q-mb-md"},[r("div",{staticClass:"row q-col-gutter-sm"},[r("div",{staticClass:"col-xs-12"},[r("div",{staticClass:"importing"},[r("q-spinner",{attrs:{color:"primary",size:"3em",thickness:2}}),r("p",[e._v(e._s(e.$t("Caching import data"))+"…")])],1)])])]),r("q-separator"),r("q-card-actions",{attrs:{align:"right"}},[r("q-btn",{attrs:{label:e.$t("Cancel"),flat:"",disable:""},on:{click:e.cancel}})],1)],1)],1)},k=[],C={name:"FormImportCache",props:{loading:Boolean,importType:{type:[String,Number]},status:{type:String},importPath:{type:String}},data:function(){return{isLoading:!1}},mounted:function(){this.onSubmit()},methods:{onSubmit:function(){var e=this;return f()(l()().mark((function r(){var n,t,o,s,i,a,c,u;return l()().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e.loading&&!e.isLoading){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,e.$refs.form.validate();case 4:if(n=r.sent,n){r.next=7;break}return r.abrupt("return");case 7:if(e.isLoading=!0,t=null,o=e.importType,s=e.$constant.import_type,i=e.importPath,a={import_path:i},i){r.next=17;break}return e.$q.notify({message:e.$t("Fatal error occurred. No import path given. Please try again."),type:"error"}),e.isLoading=!1,r.abrupt("return");case 17:if(o===s.DistributionCenter?t="/v1/distribution-centers/import/cache":o===s.Store?(t="/v1/stores/import/cache",a.distribution_center_id=e.$route.params.id):o===s.Franchise&&(t="/v1/franchises/import/cache",a.distribution_center_id=e.$route.params.id),t){r.next=22;break}return e.$q.notify({message:e.$t("Fatal error occurred. No import type given. Please try again."),type:"error"}),e.isLoading=!1,r.abrupt("return");case 22:return r.prev=22,r.next=25,e.$api.post(t,a);case 25:c=r.sent,u=c.data,"success"!==u.status?(e.$q.notify({message:u.message||e.$t("Failed to cache import file")}),setTimeout((function(){e.$store.dispatch("imports/reset")}),2e3)):e.$emit("success",u.data.import_path),r.next=33;break;case 30:r.prev=30,r.t0=r["catch"](22),r.t0.validation?e.errors=d()({},r.t0.validation.errors):e.$q.notify(r.t0);case 33:e.isLoading=!1;case 34:case"end":return r.stop()}}),r,null,[[22,30]])})))()},cancel:function(){this.loading||this.isLoading||this.$emit("cancel")}}},F=C,S=(n("19c6"),n("0d59")),P=Object(_["a"])(F,$,k,!1,null,"234f146c",null),B=P.exports;y()(P,"components",{QCard:g["a"],QForm:b["a"],QCardSection:w["a"],QSpinner:S["a"],QSeparator:v["a"],QCardActions:x["a"],QBtn:E["a"]});var D=function(){var e=this,r=e._self._c;return r("q-card",{staticClass:"form-import-process q-pa-sm"},[r("q-form",{ref:"form",staticClass:"q-gutter-md"},[r("div",{staticClass:"text-h6 q-px-md q-pt-sm"},[e._v("\n      "+e._s(e.$t("Import"))+"\n    ")]),r("q-card-section",{staticClass:"q-mb-md"},[r("div",{staticClass:"row q-col-gutter-sm"},[r("div",{staticClass:"col-xs-12"},[r("div",{staticClass:"importing"},[r("q-spinner",{attrs:{color:"primary",size:"3em",thickness:2}}),r("p",[e._v(e._s(e.$t("Validating rows"))+"…")])],1)])])]),r("q-separator"),r("q-card-actions",{attrs:{align:"right"}},[r("q-btn",{attrs:{label:e.$t("Cancel"),flat:"",disable:""},on:{click:e.cancel}})],1)],1)],1)},N=[],V={name:"FormImportProcess",props:{loading:Boolean,importType:{type:[String,Number]},status:{type:String},importPath:{type:String},processingPage:{type:[String,Number],default:function(){return 1}}},data:function(){return{isLoading:!1}},mounted:function(){this.onSubmit()},methods:{onSubmit:function(){var e=this;return f()(l()().mark((function r(){var n,t,o,s,i,a,c,u;return l()().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e.loading&&!e.isLoading){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,e.$refs.form.validate();case 4:if(n=r.sent,n){r.next=7;break}return r.abrupt("return");case 7:if(e.isLoading=!0,t=null,o=e.importType,s=e.$constant.import_type,i=e.importPath,i){r.next=16;break}return e.$q.notify({message:e.$t("Fatal error occurred. No import path given. Please try again."),type:"error"}),e.isLoading=!1,r.abrupt("return");case 16:if(a={import_path:i},o===s.DistributionCenter?t="/v1/distribution-centers/import/process":o===s.Store?(t="/v1/stores/import/process",a.distribution_center_id=e.$route.params.id):o===s.Franchise&&(t="/v1/franchises/import/process",a.distribution_center_id=e.$route.params.id),t){r.next=22;break}return e.$q.notify({message:e.$t("Fatal error occurred. No import type given. Please try again."),type:"error"}),e.isLoading=!1,r.abrupt("return");case 22:return r.prev=22,r.next=25,e.$api.post(t,a,{params:{page:e.processingPage}});case 25:c=r.sent,u=c.data,"success"!==u.status?(e.$q.notify({message:u.message||e.$t("Failed to process import file")}),setTimeout((function(){e.$store.dispatch("imports/reset")}),2e3)):u.meta&&u.meta.has_more_page?(e.$emit("updated",{page:e.processingPage+1,hasError:u.data.has_error}),e.$nextTick((function(){setTimeout((function(){e.isLoading=!1,e.onSubmit()}),300)}))):e.$emit("success",{hasError:u.data.has_error}),r.next=33;break;case 30:r.prev=30,r.t0=r["catch"](22),r.t0.validation?e.errors=d()({},r.t0.validation.errors):e.$q.notify(r.t0);case 33:e.isLoading=!1;case 34:case"end":return r.stop()}}),r,null,[[22,30]])})))()},cancel:function(){this.loading||this.isLoading||this.$emit("cancel")}}},L=V,T=(n("3072"),Object(_["a"])(L,D,N,!1,null,"a021d4e2",null)),Q=T.exports;y()(T,"components",{QCard:g["a"],QForm:b["a"],QCardSection:w["a"],QSpinner:S["a"],QSeparator:v["a"],QCardActions:x["a"],QBtn:E["a"]});var O=function(){var e=this,r=e._self._c;return r("q-card",{staticClass:"form-import-fix q-pa-sm"},[e.importType==e.$constant.import_type.DistributionCenter?r("table-distribution-center",{attrs:{"import-type":e.importType,"import-path":e.importPath},on:{success:function(r){return e.$emit("success")}}}):e.importType==e.$constant.import_type.Store?r("table-store",{attrs:{"import-type":e.importType,"import-path":e.importPath},on:{success:function(r){return e.$emit("success")}}}):e.importType==e.$constant.import_type.Franchise?r("table-franchise",{attrs:{"import-type":e.importType,"import-path":e.importPath},on:{success:function(r){return e.$emit("success")}}}):e._e()],1)},A=[],j=(n("e260"),n("d3b7"),n("ddb0"),n("b0c0"),n("4de4"),function(){var e=this,r=e._self._c;return r("q-card",{staticClass:"form-import-fix-table-distribution-center",attrs:{flat:""}},[r("q-table",{attrs:{data:e.entries,columns:e.columns,loading:e.isLoading,pagination:e.pagination,"binary-state-sort":"","row-key":"id",title:e.$t("Fix the errors to continue"),dense:"","hide-pagination":"",flat:"",bordered:""},on:{"update:pagination":function(r){e.pagination=r},request:e.onRequest},scopedSlots:e._u([{key:"top-right",fn:function(n){return[r("q-btn",{staticClass:"q-btn-lg",attrs:{color:"primary",unelevated:""},on:{click:e.onSubmit}},[n.isLastPage?r("span",[e._v(e._s(e.$t("Done")))]):r("span",[e._v(e._s(e.$t("Next")))])])]}},{key:"body-cell-id",fn:function(n){var t=n.rowIndex;return[r("q-td",[e._v(e._s(t+1))])]}},{key:"body-cell-name",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-name"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("name"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'name' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.name&&t&&t.errors&&t.errors.name[0]||"",error:Boolean(t&&t.errors&&t.errors.name&&t&&t.errors&&t.errors.name[0]||!1)},on:{click:function(r){e.isEditingRow="name",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.name,callback:function(r){e.$set(e.entries[o].content,"name",r)},expression:"entries[rowIndex].content.name"}}),"name"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.name,"error-message":t&&t.errors&&t.errors.name&&t&&t.errors&&t.errors.name[0]||"",error:Boolean(t&&t.errors&&t.errors.name&&t&&t.errors&&t.errors.name[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"name",o)}}}):e._e()],1)]}},{key:"body-cell-code",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-code"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("code"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'code' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.code&&t&&t.errors&&t.errors.code[0]||"",error:Boolean(t&&t.errors&&t.errors.code&&t&&t.errors&&t.errors.code[0]||!1)},on:{click:function(r){e.isEditingRow="code",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.code,callback:function(r){e.$set(e.entries[o].content,"code",r)},expression:"entries[rowIndex].content.code"}}),"code"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.code,"error-message":t&&t.errors&&t.errors.code&&t&&t.errors&&t.errors.code[0]||"",error:Boolean(t&&t.errors&&t.errors.code&&t&&t.errors&&t.errors.code[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"code",o)}}}):e._e()],1)]}},{key:"body-cell-location",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-location"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("location"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'location' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.location&&t&&t.errors&&t.errors.location[0]||"",error:Boolean(t&&t.errors&&t.errors.location&&t&&t.errors&&t.errors.location[0]||!1)},on:{click:function(r){e.isEditingRow="location",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.location,callback:function(r){e.$set(e.entries[o].content,"location",r)},expression:"entries[rowIndex].content.location"}}),"location"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.location,"error-message":t&&t.errors&&t.errors.location&&t&&t.errors&&t.errors.location[0]||"",error:Boolean(t&&t.errors&&t.errors.location&&t&&t.errors&&t.errors.location[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"location",o)}}}):e._e()],1)]}},{key:"body-cell-address",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-address"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("address"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'address' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.address&&t&&t.errors&&t.errors.address[0]||"",error:Boolean(t&&t.errors&&t.errors.address&&t&&t.errors&&t.errors.address[0]||!1)},on:{click:function(r){e.isEditingRow="address",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.address,callback:function(r){e.$set(e.entries[o].content,"address",r)},expression:"entries[rowIndex].content.address"}}),"address"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.address,"error-message":t&&t.errors&&t.errors.address&&t&&t.errors&&t.errors.address[0]||"",error:Boolean(t&&t.errors&&t.errors.address&&t&&t.errors&&t.errors.address[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"address",o)}}}):e._e()],1)]}},{key:"body-cell-approval_date",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-approval_date"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("approval_date"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'approval_date' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"",mask:"##/##/####","error-message":t&&t.errors&&t.errors.approval_date&&t&&t.errors&&t.errors.approval_date[0]||"",error:Boolean(t&&t.errors&&t.errors.approval_date&&t&&t.errors&&t.errors.approval_date[0]||!1)},on:{click:function(r){e.isEditingRow="approval_date",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.approval_date,callback:function(r){e.$set(e.entries[o].content,"approval_date",r)},expression:"entries[rowIndex].content.approval_date"}}),"approval_date"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.approval_date,"error-message":t&&t.errors&&t.errors.approval_date&&t&&t.errors&&t.errors.approval_date[0]||"",error:Boolean(t&&t.errors&&t.errors.approval_date&&t&&t.errors&&t.errors.approval_date[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"approval_date",o)}}}):e._e()],1)]}},{key:"body-cell-fo_approval_date",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-fo_approval_date"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("fo_approval_date"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'fo_approval_date' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"",mask:"##/##/####","error-message":t&&t.errors&&t.errors.fo_approval_date&&t&&t.errors&&t.errors.fo_approval_date[0]||"",error:Boolean(t&&t.errors&&t.errors.fo_approval_date&&t&&t.errors&&t.errors.fo_approval_date[0]||!1)},on:{click:function(r){e.isEditingRow="fo_approval_date",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.fo_approval_date,callback:function(r){e.$set(e.entries[o].content,"fo_approval_date",r)},expression:"entries[rowIndex].content.fo_approval_date"}}),"fo_approval_date"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.fo_approval_date,"error-message":t&&t.errors&&t.errors.fo_approval_date&&t&&t.errors&&t.errors.fo_approval_date[0]||"",error:Boolean(t&&t.errors&&t.errors.fo_approval_date&&t&&t.errors&&t.errors.fo_approval_date[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"fo_approval_date",o)}}}):e._e()],1)]}},{key:"body-cell-offering_letter_reference_number",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-offering_letter_reference_number"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("offering_letter_reference_number"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'offering_letter_reference_number' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.offering_letter_reference_number&&t&&t.errors&&t.errors.offering_letter_reference_number[0]||"",error:Boolean(t&&t.errors&&t.errors.offering_letter_reference_number&&t&&t.errors&&t.errors.offering_letter_reference_number[0]||!1)},on:{click:function(r){e.isEditingRow="offering_letter_reference_number",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.offering_letter_reference_number,callback:function(r){e.$set(e.entries[o].content,"offering_letter_reference_number",r)},expression:"entries[rowIndex].content.offering_letter_reference_number"}}),"offering_letter_reference_number"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.offering_letter_reference_number,"error-message":t&&t.errors&&t.errors.offering_letter_reference_number&&t&&t.errors&&t.errors.offering_letter_reference_number[0]||"",error:Boolean(t&&t.errors&&t.errors.offering_letter_reference_number&&t&&t.errors&&t.errors.offering_letter_reference_number[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"offering_letter_reference_number",o)}}}):e._e()],1)]}},{key:"body-cell-fo_offering_letter_reference_number",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-fo_offering_letter_reference_number"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("fo_offering_letter_reference_number"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'fo_offering_letter_reference_number' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.fo_offering_letter_reference_number&&t&&t.errors&&t.errors.fo_offering_letter_reference_number[0]||"",error:Boolean(t&&t.errors&&t.errors.fo_offering_letter_reference_number&&t&&t.errors&&t.errors.fo_offering_letter_reference_number[0]||!1)},on:{click:function(r){e.isEditingRow="fo_offering_letter_reference_number",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.fo_offering_letter_reference_number,callback:function(r){e.$set(e.entries[o].content,"fo_offering_letter_reference_number",r)},expression:"entries[rowIndex].content.fo_offering_letter_reference_number"}}),"fo_offering_letter_reference_number"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.fo_offering_letter_reference_number,"error-message":t&&t.errors&&t.errors.fo_offering_letter_reference_number&&t&&t.errors&&t.errors.fo_offering_letter_reference_number[0]||"",error:Boolean(t&&t.errors&&t.errors.fo_offering_letter_reference_number&&t&&t.errors&&t.errors.fo_offering_letter_reference_number[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"fo_offering_letter_reference_number",o)}}}):e._e()],1)]}},{key:"body-cell-issuance_number",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-issuance_number"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("issuance_number"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'issuance_number' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.issuance_number&&t&&t.errors&&t.errors.issuance_number[0]||"",error:Boolean(t&&t.errors&&t.errors.issuance_number&&t&&t.errors&&t.errors.issuance_number[0]||!1)},on:{click:function(r){e.isEditingRow="issuance_number",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.issuance_number,callback:function(r){e.$set(e.entries[o].content,"issuance_number",r)},expression:"entries[rowIndex].content.issuance_number"}}),"issuance_number"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.issuance_number,"error-message":t&&t.errors&&t.errors.issuance_number&&t&&t.errors&&t.errors.issuance_number[0]||"",error:Boolean(t&&t.errors&&t.errors.issuance_number&&t&&t.errors&&t.errors.issuance_number[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"issuance_number",o)}}}):e._e()],1)]}},{key:"body-cell-fo_issuance_number",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-fo_issuance_number"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("fo_issuance_number"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'fo_issuance_number' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.fo_issuance_number&&t&&t.errors&&t.errors.fo_issuance_number[0]||"",error:Boolean(t&&t.errors&&t.errors.fo_issuance_number&&t&&t.errors&&t.errors.fo_issuance_number[0]||!1)},on:{click:function(r){e.isEditingRow="fo_issuance_number",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.fo_issuance_number,callback:function(r){e.$set(e.entries[o].content,"fo_issuance_number",r)},expression:"entries[rowIndex].content.fo_issuance_number"}}),"fo_issuance_number"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.fo_issuance_number,"error-message":t&&t.errors&&t.errors.fo_issuance_number&&t&&t.errors&&t.errors.fo_issuance_number[0]||"",error:Boolean(t&&t.errors&&t.errors.fo_issuance_number&&t&&t.errors&&t.errors.fo_issuance_number[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"fo_issuance_number",o)}}}):e._e()],1)]}},{key:"body-cell-email",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-email"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("email"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'email' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.email&&t&&t.errors&&t.errors.email[0]||"",error:Boolean(t&&t.errors&&t.errors.email&&t&&t.errors&&t.errors.email[0]||!1)},on:{click:function(r){e.isEditingRow="email",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.email,callback:function(r){e.$set(e.entries[o].content,"email",r)},expression:"entries[rowIndex].content.email"}}),"email"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.email,"error-message":t&&t.errors&&t.errors.email&&t&&t.errors&&t.errors.email[0]||"",error:Boolean(t&&t.errors&&t.errors.email&&t&&t.errors&&t.errors.email[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"email",o)}}}):e._e()],1)]}},{key:"body-cell-username",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-username"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("username"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'username' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.username&&t&&t.errors&&t.errors.username[0]||"",error:Boolean(t&&t.errors&&t.errors.username&&t&&t.errors&&t.errors.username[0]||!1)},on:{click:function(r){e.isEditingRow="username",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.username,callback:function(r){e.$set(e.entries[o].content,"username",r)},expression:"entries[rowIndex].content.username"}}),"username"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.username,"error-message":t&&t.errors&&t.errors.username&&t&&t.errors&&t.errors.username[0]||"",error:Boolean(t&&t.errors&&t.errors.username&&t&&t.errors&&t.errors.username[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"username",o)}}}):e._e()],1)]}},{key:"body-cell-password",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-password"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("password"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'password' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.password&&t&&t.errors&&t.errors.password[0]||"",error:Boolean(t&&t.errors&&t.errors.password&&t&&t.errors&&t.errors.password[0]||!1)},on:{click:function(r){e.isEditingRow="password",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.password,callback:function(r){e.$set(e.entries[o].content,"password",r)},expression:"entries[rowIndex].content.password"}}),"password"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.password,"error-message":t&&t.errors&&t.errors.password&&t&&t.errors&&t.errors.password[0]||"",error:Boolean(t&&t.errors&&t.errors.password&&t&&t.errors&&t.errors.password[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"password",o)}}}):e._e()],1)]}},{key:"body-cell-action",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"text-right table-cell-action"},[e.$auth.can("delete.distribution_center")?r("q-btn",{staticClass:"q-ml-xs btn-datatable-delete-distribution-center",attrs:{unelevated:"",color:"default",size:"sm",padding:"xs",icon:"delete"},on:{click:function(r){return r.preventDefault(),e.onDelete(t,o)}}},[r("q-tooltip",[e._v("\n            "+e._s(e.$t("Delete"))+"\n          ")])],1):e._e()],1)]}},{key:"no-data",fn:function(n){var t=n.icon,o=n.message,s=n.filter;return[r("div",{staticClass:"full-width row flex-center text-center q-gutter-sm"},[r("q-icon",{attrs:{size:"2em",name:s?"filter_b_and_w":t}}),r("span",[e._v("\n          "+e._s(o)+"\n        ")])],1)]}}])})],1)}),z=[],U=(n("ac1f"),n("841c"),n("b64b"),n("e9c4"),n("14d9"),n("1c16")),J=n("05c2"),M={name:"TableDistributionCenter",props:{customer:{type:Object,default:function(){return{}}},importType:{type:[String,Number]},importPath:{type:String},status:{type:String}},mixins:[J["a"]],data:function(){var e={fuzzy:{value:null}};return{isEditingRow:null,isEditingRowIndex:null,formEditing:{},entries:[],columns:[{name:"name",field:function(e){return e.content.name},label:this.$t("Name"),headerClasses:"table-header-name",classes:"table-cell-name",align:"left",sortable:!1},{name:"code",field:"code",label:this.$t("Code"),headerClasses:"table-header-code",classes:"table-cell-code",align:"left",sortable:!1},{name:"location",field:"location",label:this.$t("Location"),headerClasses:"table-header-location",classes:"table-cell-location",align:"left",sortable:!1},{name:"address",field:"address",label:this.$t("Address"),headerClasses:"table-header-address",classes:"table-cell-address",align:"left",sortable:!1},{name:"approval_date",field:"approval_date",label:this.$t("SAT-HO Approval Date"),headerClasses:"table-header-approval_date",classes:"table-cell-approval_date",align:"left",sortable:!1},{name:"fo_approval_date",field:"fo_approval_date",label:this.$t("SAT-HO Approval Date for FO"),headerClasses:"table-header-fo_approval_date",classes:"table-cell-fo_approval_date",align:"left",sortable:!1},{name:"offering_letter_reference_number",field:"offering_letter_reference_number",label:this.$t("Offering Letter"),headerClasses:"table-header-offering_letter_reference_number",classes:"table-cell-offering_letter_reference_number",align:"left",sortable:!1},{name:"fo_offering_letter_reference_number",field:"fo_offering_letter_reference_number",label:this.$t("FO Offering Letter"),headerClasses:"table-header-fo_offering_letter_reference_number",classes:"table-cell-fo_offering_letter_reference_number",align:"left",sortable:!1},{name:"issuance_number",field:"issuance_number",label:this.$t("Basis for issuing invoice"),headerClasses:"table-header-issuance_number",classes:"table-cell-issuance_number",align:"left",sortable:!1},{name:"fo_issuance_number",field:"fo_issuance_number",label:this.$t("Basis for issuing FO invoice"),headerClasses:"table-header-fo_issuance_number",classes:"table-cell-fo_issuance_number",align:"left",sortable:!1},{name:"email",field:"email",label:this.$t("Email"),headerClasses:"table-header-email",classes:"table-cell-email",align:"left",sortable:!1},{name:"username",field:"username",label:this.$t("Username"),headerClasses:"table-header-username",classes:"table-cell-username",align:"left",sortable:!1},{name:"password",field:"password",label:this.$t("Password"),headerClasses:"table-header-password",classes:"table-cell-password",align:"left",sortable:!1},{name:"action",label:"",align:"right",headerClasses:"table-header-action",classes:"table-cell-action",required:!0}],visibleColumns:["id","code","location","name","created_at"],isLoading:!1,isAdvancedSearchVisible:!1,isFormEntryVisible:!1,isFormEntryReadonly:!1,isFormPasswordVisible:!1,formEntry:{},formPassword:{},pagination:{sortBy:"id",descending:!1,page:1,rowsPerPage:15,rowsNumber:0},search:e,advancedSearch:e,onEditingRowInputDebounced:Object(U["a"])(this.onEditingRowInput,250)}},mounted:function(){var e=this;return f()(l()().mark((function r(){return l()().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.onRequest();case 2:return r.next=4,e.$nextTick();case 4:case"end":return r.stop()}}),r)})))()},methods:{onEditingRowInput:function(e,r,n){this.entries[n].content[r]=e,delete this.entries[n].errors[r]},onRequest:function(e){var r=this;return f()(l()().mark((function n(){var t,o,s;return l()().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!r.isLoading){n.next=2;break}return n.abrupt("return");case 2:return e||(e={pagination:r.pagination}),r.isLoading=!0,t={table_pagination:d()({},e.pagination||{}),table_search:d()({},r.search),import_path:r.importPath},n.prev=5,n.next=8,r.$api.get("/v1/distribution-centers/import/errors",{params:t});case 8:o=n.sent,s=o.data,"success"===s.status&&(r.entries=s.data.import_cache,r.pagination=d()(d()({},r.pagination),s.pagination)),n.next=16;break;case 13:n.prev=13,n.t0=n["catch"](5),r.$q.notify(n.t0);case 16:r.isLoading=!1;case 17:case"end":return n.stop()}}),n,null,[[5,13]])})))()},onSubmit:function(){var e=this;return f()(l()().mark((function r(){var n,t,o,s;return l()().wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=!1,t=0;case 2:if(!(t<e.entries.length)){r.next=9;break}if(!e.entries[t].errors||!Object.keys(e.entries[t].errors).length){r.next=6;break}return n=!0,r.abrupt("break",9);case 6:t++,r.next=2;break;case 9:if(!n){r.next=12;break}return e.$q.notify({message:e.$t("Please fix all errors first to continue"),type:"negative"}),r.abrupt("return");case 12:return r.prev=12,r.next=15,e.$api.post("/v1/distribution-centers/import/fix",{import_cache:e.entries});case 15:o=r.sent,s=o.data,"success"===s.status?e.pagination.hasMorePage?e.onRequest():e.$emit("success"):e.onRequest(),r.next=23;break;case 20:r.prev=20,r.t0=r["catch"](12),r.t0.validation?e.errors=d()({},r.t0.validation.errors):e.$q.notify(r.t0);case 23:case"end":return r.stop()}}),r,null,[[12,20]])})))()},onAdvancedSearch:function(){this.advancedSearch=JSON.parse(JSON.stringify(this.search)),this.isAdvancedSearchVisible=!0},onAdvancedSearchSubmit:function(){this.search=this.$utils.merge({},this.advancedSearch),this.onRequest(),this.isAdvancedSearchVisible=!1},onFormEntryCreate:function(){this.$router.push("/distribution-centers/create"),this.formEntry={},this.isFormEntryReadonly=!1,this.isFormEntryVisible=!1},onFormEntrySuccess:function(){this.isFormEntryReadonly=!1,this.isFormEntryVisible=!1,this.onRequest()},onFormEntryCancel:function(){this.isFormEntryReadonly=!1,this.isFormEntryVisible=!1},onFormPasswordSuccess:function(){this.isFormPasswordVisible=!1},onFormPasswordCancel:function(){this.isFormPasswordVisible=!1},onView:function(e){this.customer.id?this.$router.push({path:"/distribution-centers/".concat(e.id),query:{customer_id:this.customer.id}}):this.$router.push("/distribution-centers/".concat(e.id)),this.formEntry=d()({},e),this.isFormEntryReadonly=!0,this.isFormEntryVisible=!1},onEdit:function(e){this.formEntry=d()({},e),this.isFormEntryReadonly=!1,this.isFormEntryVisible=!0},onEditPassword:function(e){this.formPassword=d()({},e),this.isFormPasswordVisible=!0},onDelete:function(e,r){var n=this;return f()(l()().mark((function t(){var o,s;return l()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.$api.delete("/v1/distribution-centers/import/row/".concat(e.id));case 3:o=t.sent,s=o.data,"success"!==s.status?n.$q.notify({message:n.$t("Failed to delete row")}):(n.entries=n.entries.filter((function(e,n){return n!==r})),console.log(n.entries.length)),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),n.$q.notify(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},H=M,G=(n("321a"),n("eaac")),K=n("db86"),W=n("27f9"),X=n("05c0"),Y=n("0016"),Z=n("8572"),ee=Object(_["a"])(H,j,z,!1,null,null,null),re=ee.exports;y()(ee,"components",{QCard:g["a"],QTable:G["a"],QBtn:E["a"],QTd:K["a"],QInput:W["a"],QTooltip:X["a"],QIcon:Y["a"],QField:Z["a"]});var ne=function(){var e=this,r=e._self._c;return r("q-card",{staticClass:"form-import-fix-table-store",attrs:{flat:""}},[r("q-table",{attrs:{data:e.entries,columns:e.columns,loading:e.isLoading,pagination:e.pagination,"binary-state-sort":"","row-key":"id",title:e.$t("Fix the errors to continue"),dense:"","hide-pagination":"",flat:"",bordered:""},on:{"update:pagination":function(r){e.pagination=r},request:e.onRequest},scopedSlots:e._u([{key:"top-right",fn:function(n){return[r("q-btn",{staticClass:"q-btn-lg",attrs:{color:"primary",unelevated:""},on:{click:e.onSubmit}},[n.isLastPage?r("span",[e._v(e._s(e.$t("Done")))]):r("span",[e._v(e._s(e.$t("Next")))])])]}},{key:"body-cell-id",fn:function(n){var t=n.rowIndex;return[r("q-td",[e._v(e._s(t+1))])]}},{key:"body-cell-name",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-name"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("name"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'name' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.name&&t&&t.errors&&t.errors.name[0]||"",error:Boolean(t&&t.errors&&t.errors.name&&t&&t.errors&&t.errors.name[0]||!1)},on:{click:function(r){e.isEditingRow="name",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.name,callback:function(r){e.$set(e.entries[o].content,"name",r)},expression:"entries[rowIndex].content.name"}}),"name"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.name,"error-message":t&&t.errors&&t.errors.name&&t&&t.errors&&t.errors.name[0]||"",error:Boolean(t&&t.errors&&t.errors.name&&t&&t.errors&&t.errors.name[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"name",o)}}}):e._e()],1)]}},{key:"body-cell-code",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-code"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("code"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'code' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.code&&t&&t.errors&&t.errors.code[0]||"",error:Boolean(t&&t.errors&&t.errors.code&&t&&t.errors&&t.errors.code[0]||!1)},on:{click:function(r){e.isEditingRow="code",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.code,callback:function(r){e.$set(e.entries[o].content,"code",r)},expression:"entries[rowIndex].content.code"}}),"code"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.code,"error-message":t&&t.errors&&t.errors.code&&t&&t.errors&&t.errors.code[0]||"",error:Boolean(t&&t.errors&&t.errors.code&&t&&t.errors&&t.errors.code[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"code",o)}}}):e._e()],1)]}},{key:"body-cell-location",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-location"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("location"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'location' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.location&&t&&t.errors&&t.errors.location[0]||"",error:Boolean(t&&t.errors&&t.errors.location&&t&&t.errors&&t.errors.location[0]||!1)},on:{click:function(r){e.isEditingRow="location",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.location,callback:function(r){e.$set(e.entries[o].content,"location",r)},expression:"entries[rowIndex].content.location"}}),"location"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.location,"error-message":t&&t.errors&&t.errors.location&&t&&t.errors&&t.errors.location[0]||"",error:Boolean(t&&t.errors&&t.errors.location&&t&&t.errors&&t.errors.location[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"location",o)}}}):e._e()],1)]}},{key:"body-cell-address",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-address"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("address"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'address' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.address&&t&&t.errors&&t.errors.address[0]||"",error:Boolean(t&&t.errors&&t.errors.address&&t&&t.errors&&t.errors.address[0]||!1)},on:{click:function(r){e.isEditingRow="address",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.address,callback:function(r){e.$set(e.entries[o].content,"address",r)},expression:"entries[rowIndex].content.address"}}),"address"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.address,"error-message":t&&t.errors&&t.errors.address&&t&&t.errors&&t.errors.address[0]||"",error:Boolean(t&&t.errors&&t.errors.address&&t&&t.errors&&t.errors.address[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"address",o)}}}):e._e()],1)]}},{key:"body-cell-approval_date",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-approval_date"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("approval_date"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'approval_date' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"",mask:"##/##/####","error-message":t&&t.errors&&t.errors.approval_date&&t&&t.errors&&t.errors.approval_date[0]||"",error:Boolean(t&&t.errors&&t.errors.approval_date&&t&&t.errors&&t.errors.approval_date[0]||!1)},on:{click:function(r){e.isEditingRow="approval_date",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.approval_date,callback:function(r){e.$set(e.entries[o].content,"approval_date",r)},expression:"entries[rowIndex].content.approval_date"}}),"approval_date"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.approval_date,"error-message":t&&t.errors&&t.errors.approval_date&&t&&t.errors&&t.errors.approval_date[0]||"",error:Boolean(t&&t.errors&&t.errors.approval_date&&t&&t.errors&&t.errors.approval_date[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"approval_date",o)}}}):e._e()],1)]}},{key:"body-cell-fo_approval_date",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-fo_approval_date"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("fo_approval_date"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'fo_approval_date' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"",mask:"##/##/####","error-message":t&&t.errors&&t.errors.fo_approval_date&&t&&t.errors&&t.errors.fo_approval_date[0]||"",error:Boolean(t&&t.errors&&t.errors.fo_approval_date&&t&&t.errors&&t.errors.fo_approval_date[0]||!1)},on:{click:function(r){e.isEditingRow="fo_approval_date",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.fo_approval_date,callback:function(r){e.$set(e.entries[o].content,"fo_approval_date",r)},expression:"entries[rowIndex].content.fo_approval_date"}}),"fo_approval_date"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.fo_approval_date,"error-message":t&&t.errors&&t.errors.fo_approval_date&&t&&t.errors&&t.errors.fo_approval_date[0]||"",error:Boolean(t&&t.errors&&t.errors.fo_approval_date&&t&&t.errors&&t.errors.fo_approval_date[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"fo_approval_date",o)}}}):e._e()],1)]}},{key:"body-cell-offering_letter_reference_number",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-offering_letter_reference_number"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("offering_letter_reference_number"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'offering_letter_reference_number' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.offering_letter_reference_number&&t&&t.errors&&t.errors.offering_letter_reference_number[0]||"",error:Boolean(t&&t.errors&&t.errors.offering_letter_reference_number&&t&&t.errors&&t.errors.offering_letter_reference_number[0]||!1)},on:{click:function(r){e.isEditingRow="offering_letter_reference_number",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.offering_letter_reference_number,callback:function(r){e.$set(e.entries[o].content,"offering_letter_reference_number",r)},expression:"entries[rowIndex].content.offering_letter_reference_number"}}),"offering_letter_reference_number"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.offering_letter_reference_number,"error-message":t&&t.errors&&t.errors.offering_letter_reference_number&&t&&t.errors&&t.errors.offering_letter_reference_number[0]||"",error:Boolean(t&&t.errors&&t.errors.offering_letter_reference_number&&t&&t.errors&&t.errors.offering_letter_reference_number[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"offering_letter_reference_number",o)}}}):e._e()],1)]}},{key:"body-cell-fo_offering_letter_reference_number",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-fo_offering_letter_reference_number"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("fo_offering_letter_reference_number"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'fo_offering_letter_reference_number' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.fo_offering_letter_reference_number&&t&&t.errors&&t.errors.fo_offering_letter_reference_number[0]||"",error:Boolean(t&&t.errors&&t.errors.fo_offering_letter_reference_number&&t&&t.errors&&t.errors.fo_offering_letter_reference_number[0]||!1)},on:{click:function(r){e.isEditingRow="fo_offering_letter_reference_number",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.fo_offering_letter_reference_number,callback:function(r){e.$set(e.entries[o].content,"fo_offering_letter_reference_number",r)},expression:"entries[rowIndex].content.fo_offering_letter_reference_number"}}),"fo_offering_letter_reference_number"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.fo_offering_letter_reference_number,"error-message":t&&t.errors&&t.errors.fo_offering_letter_reference_number&&t&&t.errors&&t.errors.fo_offering_letter_reference_number[0]||"",error:Boolean(t&&t.errors&&t.errors.fo_offering_letter_reference_number&&t&&t.errors&&t.errors.fo_offering_letter_reference_number[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"fo_offering_letter_reference_number",o)}}}):e._e()],1)]}},{key:"body-cell-issuance_number",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-issuance_number"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("issuance_number"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'issuance_number' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.issuance_number&&t&&t.errors&&t.errors.issuance_number[0]||"",error:Boolean(t&&t.errors&&t.errors.issuance_number&&t&&t.errors&&t.errors.issuance_number[0]||!1)},on:{click:function(r){e.isEditingRow="issuance_number",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.issuance_number,callback:function(r){e.$set(e.entries[o].content,"issuance_number",r)},expression:"entries[rowIndex].content.issuance_number"}}),"issuance_number"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.issuance_number,"error-message":t&&t.errors&&t.errors.issuance_number&&t&&t.errors&&t.errors.issuance_number[0]||"",error:Boolean(t&&t.errors&&t.errors.issuance_number&&t&&t.errors&&t.errors.issuance_number[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"issuance_number",o)}}}):e._e()],1)]}},{key:"body-cell-fo_issuance_number",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-fo_issuance_number"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("fo_issuance_number"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'fo_issuance_number' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.fo_issuance_number&&t&&t.errors&&t.errors.fo_issuance_number[0]||"",error:Boolean(t&&t.errors&&t.errors.fo_issuance_number&&t&&t.errors&&t.errors.fo_issuance_number[0]||!1)},on:{click:function(r){e.isEditingRow="fo_issuance_number",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.fo_issuance_number,callback:function(r){e.$set(e.entries[o].content,"fo_issuance_number",r)},expression:"entries[rowIndex].content.fo_issuance_number"}}),"fo_issuance_number"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.fo_issuance_number,"error-message":t&&t.errors&&t.errors.fo_issuance_number&&t&&t.errors&&t.errors.fo_issuance_number[0]||"",error:Boolean(t&&t.errors&&t.errors.fo_issuance_number&&t&&t.errors&&t.errors.fo_issuance_number[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"fo_issuance_number",o)}}}):e._e()],1)]}},{key:"body-cell-email",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-email"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("email"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'email' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.email&&t&&t.errors&&t.errors.email[0]||"",error:Boolean(t&&t.errors&&t.errors.email&&t&&t.errors&&t.errors.email[0]||!1)},on:{click:function(r){e.isEditingRow="email",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.email,callback:function(r){e.$set(e.entries[o].content,"email",r)},expression:"entries[rowIndex].content.email"}}),"email"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.email,"error-message":t&&t.errors&&t.errors.email&&t&&t.errors&&t.errors.email[0]||"",error:Boolean(t&&t.errors&&t.errors.email&&t&&t.errors&&t.errors.email[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"email",o)}}}):e._e()],1)]}},{key:"body-cell-username",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-username"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("username"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'username' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.username&&t&&t.errors&&t.errors.username[0]||"",error:Boolean(t&&t.errors&&t.errors.username&&t&&t.errors&&t.errors.username[0]||!1)},on:{click:function(r){e.isEditingRow="username",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.username,callback:function(r){e.$set(e.entries[o].content,"username",r)},expression:"entries[rowIndex].content.username"}}),"username"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.username,"error-message":t&&t.errors&&t.errors.username&&t&&t.errors&&t.errors.username[0]||"",error:Boolean(t&&t.errors&&t.errors.username&&t&&t.errors&&t.errors.username[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"username",o)}}}):e._e()],1)]}},{key:"body-cell-password",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-password"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("password"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'password' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.password&&t&&t.errors&&t.errors.password[0]||"",error:Boolean(t&&t.errors&&t.errors.password&&t&&t.errors&&t.errors.password[0]||!1)},on:{click:function(r){e.isEditingRow="password",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.password,callback:function(r){e.$set(e.entries[o].content,"password",r)},expression:"entries[rowIndex].content.password"}}),"password"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.password,"error-message":t&&t.errors&&t.errors.password&&t&&t.errors&&t.errors.password[0]||"",error:Boolean(t&&t.errors&&t.errors.password&&t&&t.errors&&t.errors.password[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"password",o)}}}):e._e()],1)]}},{key:"body-cell-action",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"text-right table-cell-action"},[e.$auth.can("delete.distribution_center")?r("q-btn",{staticClass:"q-ml-xs btn-datatable-delete-distribution-center",attrs:{unelevated:"",color:"default",size:"sm",padding:"xs",icon:"delete"},on:{click:function(r){return r.preventDefault(),e.onDelete(t,o)}}},[r("q-tooltip",[e._v("\n            "+e._s(e.$t("Delete"))+"\n          ")])],1):e._e()],1)]}},{key:"no-data",fn:function(n){var t=n.icon,o=n.message,s=n.filter;return[r("div",{staticClass:"full-width row flex-center text-center q-gutter-sm"},[r("q-icon",{attrs:{size:"2em",name:s?"filter_b_and_w":t}}),r("span",[e._v("\n          "+e._s(o)+"\n        ")])],1)]}}])})],1)},te=[],oe={name:"TableStore",props:{customer:{type:Object,default:function(){return{}}},importType:{type:[String,Number]},importPath:{type:String},status:{type:String}},mixins:[J["a"]],data:function(){var e={fuzzy:{value:null}};return{isEditingRow:null,isEditingRowIndex:null,formEditing:{},entries:[],columns:[{name:"name",field:function(e){return e.content.name},label:this.$t("Name"),headerClasses:"table-header-name",classes:"table-cell-name",align:"left",sortable:!1},{name:"code",field:"code",label:this.$t("Code"),headerClasses:"table-header-code",classes:"table-cell-code",align:"left",sortable:!1},{name:"location",field:"location",label:this.$t("Location"),headerClasses:"table-header-location",classes:"table-cell-location",align:"left",sortable:!1},{name:"address",field:"address",label:this.$t("Address"),headerClasses:"table-header-address",classes:"table-cell-address",align:"left",sortable:!1},{name:"approval_date",field:"approval_date",label:this.$t("SAT-HO Approval Date"),headerClasses:"table-header-approval_date",classes:"table-cell-approval_date",align:"left",sortable:!1},{name:"fo_approval_date",field:"fo_approval_date",label:this.$t("SAT-HO Approval Date for FO"),headerClasses:"table-header-fo_approval_date",classes:"table-cell-fo_approval_date",align:"left",sortable:!1},{name:"offering_letter_reference_number",field:"offering_letter_reference_number",label:this.$t("Offering Letter"),headerClasses:"table-header-offering_letter_reference_number",classes:"table-cell-offering_letter_reference_number",align:"left",sortable:!1},{name:"fo_offering_letter_reference_number",field:"fo_offering_letter_reference_number",label:this.$t("FO Offering Letter"),headerClasses:"table-header-fo_offering_letter_reference_number",classes:"table-cell-fo_offering_letter_reference_number",align:"left",sortable:!1},{name:"issuance_number",field:"issuance_number",label:this.$t("Basis for issuing invoice"),headerClasses:"table-header-issuance_number",classes:"table-cell-issuance_number",align:"left",sortable:!1},{name:"fo_issuance_number",field:"fo_issuance_number",label:this.$t("Basis for issuing FO invoice"),headerClasses:"table-header-fo_issuance_number",classes:"table-cell-fo_issuance_number",align:"left",sortable:!1},{name:"email",field:"email",label:this.$t("Email"),headerClasses:"table-header-email",classes:"table-cell-email",align:"left",sortable:!1},{name:"action",label:"",align:"right",headerClasses:"table-header-action",classes:"table-cell-action",required:!0}],visibleColumns:["id","code","location","name","created_at"],isLoading:!1,isAdvancedSearchVisible:!1,isFormEntryVisible:!1,isFormEntryReadonly:!1,isFormPasswordVisible:!1,formEntry:{},formPassword:{},pagination:{sortBy:"id",descending:!1,page:1,rowsPerPage:15,rowsNumber:0},search:e,advancedSearch:e,onEditingRowInputDebounced:Object(U["a"])(this.onEditingRowInput,250)}},mounted:function(){var e=this;return f()(l()().mark((function r(){return l()().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.onRequest();case 2:return r.next=4,e.$nextTick();case 4:case"end":return r.stop()}}),r)})))()},methods:{onEditingRowInput:function(e,r,n){this.entries[n].content[r]=e,delete this.entries[n].errors[r]},onRequest:function(e){var r=this;return f()(l()().mark((function n(){var t,o,s;return l()().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!r.isLoading){n.next=2;break}return n.abrupt("return");case 2:return e||(e={pagination:r.pagination}),r.isLoading=!0,t={table_pagination:d()({},e.pagination||{}),table_search:d()({},r.search),import_path:r.importPath,distribution_center_id:r.$route.params.id},n.prev=5,n.next=8,r.$api.get("/v1/stores/import/errors",{params:t});case 8:o=n.sent,s=o.data,"success"===s.status&&(r.entries=s.data.import_cache,r.pagination=d()(d()({},r.pagination),s.pagination)),n.next=16;break;case 13:n.prev=13,n.t0=n["catch"](5),r.$q.notify(n.t0);case 16:r.isLoading=!1;case 17:case"end":return n.stop()}}),n,null,[[5,13]])})))()},onSubmit:function(){var e=this;return f()(l()().mark((function r(){var n,t,o,s;return l()().wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=!1,t=0;case 2:if(!(t<e.entries.length)){r.next=9;break}if(!e.entries[t].errors||!Object.keys(e.entries[t].errors).length){r.next=6;break}return n=!0,r.abrupt("break",9);case 6:t++,r.next=2;break;case 9:if(!n){r.next=12;break}return e.$q.notify({message:e.$t("Please fix all errors first to continue"),type:"negative"}),r.abrupt("return");case 12:return r.prev=12,r.next=15,e.$api.post("/v1/stores/import/fix",{import_cache:e.entries,distribution_center_id:e.$route.params.id});case 15:o=r.sent,s=o.data,"success"===s.status?e.pagination.hasMorePage?e.onRequest():e.$emit("success"):e.onRequest(),r.next=23;break;case 20:r.prev=20,r.t0=r["catch"](12),r.t0.validation?e.errors=d()({},r.t0.validation.errors):e.$q.notify(r.t0);case 23:case"end":return r.stop()}}),r,null,[[12,20]])})))()},onAdvancedSearch:function(){this.advancedSearch=JSON.parse(JSON.stringify(this.search)),this.isAdvancedSearchVisible=!0},onAdvancedSearchSubmit:function(){this.search=this.$utils.merge({},this.advancedSearch),this.onRequest(),this.isAdvancedSearchVisible=!1},onFormEntryCreate:function(){this.$router.push("/distribution-centers/create"),this.formEntry={},this.isFormEntryReadonly=!1,this.isFormEntryVisible=!1},onFormEntrySuccess:function(){this.isFormEntryReadonly=!1,this.isFormEntryVisible=!1,this.onRequest()},onFormEntryCancel:function(){this.isFormEntryReadonly=!1,this.isFormEntryVisible=!1},onFormPasswordSuccess:function(){this.isFormPasswordVisible=!1},onFormPasswordCancel:function(){this.isFormPasswordVisible=!1},onView:function(e){this.customer.id?this.$router.push({path:"/distribution-centers/".concat(e.id),query:{customer_id:this.customer.id}}):this.$router.push("/distribution-centers/".concat(e.id)),this.formEntry=d()({},e),this.isFormEntryReadonly=!0,this.isFormEntryVisible=!1},onEdit:function(e){this.formEntry=d()({},e),this.isFormEntryReadonly=!1,this.isFormEntryVisible=!0},onEditPassword:function(e){this.formPassword=d()({},e),this.isFormPasswordVisible=!0},onDelete:function(e,r){var n=this;return f()(l()().mark((function t(){var o,s;return l()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.$api.delete("/v1/stores/import/row/".concat(e.id),{params:{distribution_center_id:n.$route.params.id}});case 3:o=t.sent,s=o.data,"success"!==s.status?n.$q.notify({message:n.$t("Failed to delete row")}):(n.entries=n.entries.filter((function(e,n){return n!==r})),console.log(n.entries.length)),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),n.$q.notify(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},se=oe,ie=(n("a815"),Object(_["a"])(se,ne,te,!1,null,null,null)),ae=ie.exports;y()(ie,"components",{QCard:g["a"],QTable:G["a"],QBtn:E["a"],QTd:K["a"],QInput:W["a"],QTooltip:X["a"],QIcon:Y["a"],QField:Z["a"]});var le=function(){var e=this,r=e._self._c;return r("q-card",{staticClass:"form-import-fix-table-franchise",attrs:{flat:""}},[r("q-table",{attrs:{data:e.entries,columns:e.columns,loading:e.isLoading,pagination:e.pagination,"binary-state-sort":"","row-key":"id",title:e.$t("Fix the errors to continue"),dense:"","hide-pagination":"",flat:"",bordered:""},on:{"update:pagination":function(r){e.pagination=r},request:e.onRequest},scopedSlots:e._u([{key:"top-right",fn:function(n){return[r("q-btn",{staticClass:"q-btn-lg",attrs:{color:"primary",unelevated:""},on:{click:e.onSubmit}},[n.isLastPage?r("span",[e._v(e._s(e.$t("Done")))]):r("span",[e._v(e._s(e.$t("Next")))])])]}},{key:"body-cell-id",fn:function(n){var t=n.rowIndex;return[r("q-td",[e._v(e._s(t+1))])]}},{key:"body-cell-name",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-name"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("name"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'name' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.name&&t&&t.errors&&t.errors.name[0]||"",error:Boolean(t&&t.errors&&t.errors.name&&t&&t.errors&&t.errors.name[0]||!1)},on:{click:function(r){e.isEditingRow="name",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.name,callback:function(r){e.$set(e.entries[o].content,"name",r)},expression:"entries[rowIndex].content.name"}}),"name"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.name,"error-message":t&&t.errors&&t.errors.name&&t&&t.errors&&t.errors.name[0]||"",error:Boolean(t&&t.errors&&t.errors.name&&t&&t.errors&&t.errors.name[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"name",o)}}}):e._e()],1)]}},{key:"body-cell-code",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-code"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("code"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'code' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.code&&t&&t.errors&&t.errors.code[0]||"",error:Boolean(t&&t.errors&&t.errors.code&&t&&t.errors&&t.errors.code[0]||!1)},on:{click:function(r){e.isEditingRow="code",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.code,callback:function(r){e.$set(e.entries[o].content,"code",r)},expression:"entries[rowIndex].content.code"}}),"code"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.code,"error-message":t&&t.errors&&t.errors.code&&t&&t.errors&&t.errors.code[0]||"",error:Boolean(t&&t.errors&&t.errors.code&&t&&t.errors&&t.errors.code[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"code",o)}}}):e._e()],1)]}},{key:"body-cell-location",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-location"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("location"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'location' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.location&&t&&t.errors&&t.errors.location[0]||"",error:Boolean(t&&t.errors&&t.errors.location&&t&&t.errors&&t.errors.location[0]||!1)},on:{click:function(r){e.isEditingRow="location",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.location,callback:function(r){e.$set(e.entries[o].content,"location",r)},expression:"entries[rowIndex].content.location"}}),"location"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.location,"error-message":t&&t.errors&&t.errors.location&&t&&t.errors&&t.errors.location[0]||"",error:Boolean(t&&t.errors&&t.errors.location&&t&&t.errors&&t.errors.location[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"location",o)}}}):e._e()],1)]}},{key:"body-cell-address",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-address"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("address"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'address' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.address&&t&&t.errors&&t.errors.address[0]||"",error:Boolean(t&&t.errors&&t.errors.address&&t&&t.errors&&t.errors.address[0]||!1)},on:{click:function(r){e.isEditingRow="address",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.address,callback:function(r){e.$set(e.entries[o].content,"address",r)},expression:"entries[rowIndex].content.address"}}),"address"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.address,"error-message":t&&t.errors&&t.errors.address&&t&&t.errors&&t.errors.address[0]||"",error:Boolean(t&&t.errors&&t.errors.address&&t&&t.errors&&t.errors.address[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"address",o)}}}):e._e()],1)]}},{key:"body-cell-approval_date",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-approval_date"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("approval_date"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'approval_date' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"",mask:"##/##/####","error-message":t&&t.errors&&t.errors.approval_date&&t&&t.errors&&t.errors.approval_date[0]||"",error:Boolean(t&&t.errors&&t.errors.approval_date&&t&&t.errors&&t.errors.approval_date[0]||!1)},on:{click:function(r){e.isEditingRow="approval_date",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.approval_date,callback:function(r){e.$set(e.entries[o].content,"approval_date",r)},expression:"entries[rowIndex].content.approval_date"}}),"approval_date"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.approval_date,"error-message":t&&t.errors&&t.errors.approval_date&&t&&t.errors&&t.errors.approval_date[0]||"",error:Boolean(t&&t.errors&&t.errors.approval_date&&t&&t.errors&&t.errors.approval_date[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"approval_date",o)}}}):e._e()],1)]}},{key:"body-cell-fo_approval_date",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-fo_approval_date"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("fo_approval_date"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'fo_approval_date' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"",mask:"##/##/####","error-message":t&&t.errors&&t.errors.fo_approval_date&&t&&t.errors&&t.errors.fo_approval_date[0]||"",error:Boolean(t&&t.errors&&t.errors.fo_approval_date&&t&&t.errors&&t.errors.fo_approval_date[0]||!1)},on:{click:function(r){e.isEditingRow="fo_approval_date",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.fo_approval_date,callback:function(r){e.$set(e.entries[o].content,"fo_approval_date",r)},expression:"entries[rowIndex].content.fo_approval_date"}}),"fo_approval_date"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.fo_approval_date,"error-message":t&&t.errors&&t.errors.fo_approval_date&&t&&t.errors&&t.errors.fo_approval_date[0]||"",error:Boolean(t&&t.errors&&t.errors.fo_approval_date&&t&&t.errors&&t.errors.fo_approval_date[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"fo_approval_date",o)}}}):e._e()],1)]}},{key:"body-cell-offering_letter_reference_number",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-offering_letter_reference_number"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("offering_letter_reference_number"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'offering_letter_reference_number' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.offering_letter_reference_number&&t&&t.errors&&t.errors.offering_letter_reference_number[0]||"",error:Boolean(t&&t.errors&&t.errors.offering_letter_reference_number&&t&&t.errors&&t.errors.offering_letter_reference_number[0]||!1)},on:{click:function(r){e.isEditingRow="offering_letter_reference_number",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.offering_letter_reference_number,callback:function(r){e.$set(e.entries[o].content,"offering_letter_reference_number",r)},expression:"entries[rowIndex].content.offering_letter_reference_number"}}),"offering_letter_reference_number"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.offering_letter_reference_number,"error-message":t&&t.errors&&t.errors.offering_letter_reference_number&&t&&t.errors&&t.errors.offering_letter_reference_number[0]||"",error:Boolean(t&&t.errors&&t.errors.offering_letter_reference_number&&t&&t.errors&&t.errors.offering_letter_reference_number[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"offering_letter_reference_number",o)}}}):e._e()],1)]}},{key:"body-cell-fo_offering_letter_reference_number",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-fo_offering_letter_reference_number"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("fo_offering_letter_reference_number"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'fo_offering_letter_reference_number' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.fo_offering_letter_reference_number&&t&&t.errors&&t.errors.fo_offering_letter_reference_number[0]||"",error:Boolean(t&&t.errors&&t.errors.fo_offering_letter_reference_number&&t&&t.errors&&t.errors.fo_offering_letter_reference_number[0]||!1)},on:{click:function(r){e.isEditingRow="fo_offering_letter_reference_number",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.fo_offering_letter_reference_number,callback:function(r){e.$set(e.entries[o].content,"fo_offering_letter_reference_number",r)},expression:"entries[rowIndex].content.fo_offering_letter_reference_number"}}),"fo_offering_letter_reference_number"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.fo_offering_letter_reference_number,"error-message":t&&t.errors&&t.errors.fo_offering_letter_reference_number&&t&&t.errors&&t.errors.fo_offering_letter_reference_number[0]||"",error:Boolean(t&&t.errors&&t.errors.fo_offering_letter_reference_number&&t&&t.errors&&t.errors.fo_offering_letter_reference_number[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"fo_offering_letter_reference_number",o)}}}):e._e()],1)]}},{key:"body-cell-issuance_number",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-issuance_number"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("issuance_number"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'issuance_number' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.issuance_number&&t&&t.errors&&t.errors.issuance_number[0]||"",error:Boolean(t&&t.errors&&t.errors.issuance_number&&t&&t.errors&&t.errors.issuance_number[0]||!1)},on:{click:function(r){e.isEditingRow="issuance_number",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.issuance_number,callback:function(r){e.$set(e.entries[o].content,"issuance_number",r)},expression:"entries[rowIndex].content.issuance_number"}}),"issuance_number"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.issuance_number,"error-message":t&&t.errors&&t.errors.issuance_number&&t&&t.errors&&t.errors.issuance_number[0]||"",error:Boolean(t&&t.errors&&t.errors.issuance_number&&t&&t.errors&&t.errors.issuance_number[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"issuance_number",o)}}}):e._e()],1)]}},{key:"body-cell-fo_issuance_number",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-fo_issuance_number"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("fo_issuance_number"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'fo_issuance_number' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.fo_issuance_number&&t&&t.errors&&t.errors.fo_issuance_number[0]||"",error:Boolean(t&&t.errors&&t.errors.fo_issuance_number&&t&&t.errors&&t.errors.fo_issuance_number[0]||!1)},on:{click:function(r){e.isEditingRow="fo_issuance_number",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.fo_issuance_number,callback:function(r){e.$set(e.entries[o].content,"fo_issuance_number",r)},expression:"entries[rowIndex].content.fo_issuance_number"}}),"fo_issuance_number"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.fo_issuance_number,"error-message":t&&t.errors&&t.errors.fo_issuance_number&&t&&t.errors&&t.errors.fo_issuance_number[0]||"",error:Boolean(t&&t.errors&&t.errors.fo_issuance_number&&t&&t.errors&&t.errors.fo_issuance_number[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"fo_issuance_number",o)}}}):e._e()],1)]}},{key:"body-cell-email",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-email"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("email"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'email' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.email&&t&&t.errors&&t.errors.email[0]||"",error:Boolean(t&&t.errors&&t.errors.email&&t&&t.errors&&t.errors.email[0]||!1)},on:{click:function(r){e.isEditingRow="email",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.email,callback:function(r){e.$set(e.entries[o].content,"email",r)},expression:"entries[rowIndex].content.email"}}),"email"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.email,"error-message":t&&t.errors&&t.errors.email&&t&&t.errors&&t.errors.email[0]||"",error:Boolean(t&&t.errors&&t.errors.email&&t&&t.errors&&t.errors.email[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"email",o)}}}):e._e()],1)]}},{key:"body-cell-username",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-username"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("username"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'username' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.username&&t&&t.errors&&t.errors.username[0]||"",error:Boolean(t&&t.errors&&t.errors.username&&t&&t.errors&&t.errors.username[0]||!1)},on:{click:function(r){e.isEditingRow="username",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.username,callback:function(r){e.$set(e.entries[o].content,"username",r)},expression:"entries[rowIndex].content.username"}}),"username"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.username,"error-message":t&&t.errors&&t.errors.username&&t&&t.errors&&t.errors.username[0]||"",error:Boolean(t&&t.errors&&t.errors.username&&t&&t.errors&&t.errors.username[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"username",o)}}}):e._e()],1)]}},{key:"body-cell-password",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"table-cell-password"},[r("q-input",{directives:[{name:"show",rawName:"v-show",value:!("password"===e.isEditingRow&&e.isEditingRowIndex===o),expression:"!(isEditingRow === 'password' && isEditingRowIndex === rowIndex)"}],attrs:{dense:"",readonly:"","error-message":t&&t.errors&&t.errors.password&&t&&t.errors&&t.errors.password[0]||"",error:Boolean(t&&t.errors&&t.errors.password&&t&&t.errors&&t.errors.password[0]||!1)},on:{click:function(r){e.isEditingRow="password",e.isEditingRowIndex=o}},model:{value:e.entries[o].content.password,callback:function(r){e.$set(e.entries[o].content,"password",r)},expression:"entries[rowIndex].content.password"}}),"password"===e.isEditingRow&&e.isEditingRowIndex===o?r("q-input",{attrs:{dense:"",autofocus:"",value:e.entries[o].content.password,"error-message":t&&t.errors&&t.errors.password&&t&&t.errors&&t.errors.password[0]||"",error:Boolean(t&&t.errors&&t.errors.password&&t&&t.errors&&t.errors.password[0]||!1)},on:{input:function(r){return e.onEditingRowInputDebounced(r,"password",o)}}}):e._e()],1)]}},{key:"body-cell-action",fn:function(n){var t=n.row,o=n.rowIndex;return[r("q-td",{staticClass:"text-right table-cell-action"},[e.$auth.can("delete.francise")?r("q-btn",{staticClass:"q-ml-xs btn-datatable-delete-franchise",attrs:{unelevated:"",color:"default",size:"sm",padding:"xs",icon:"delete"},on:{click:function(r){return r.preventDefault(),e.onDelete(t,o)}}},[r("q-tooltip",[e._v("\n            "+e._s(e.$t("Delete"))+"\n          ")])],1):e._e()],1)]}},{key:"no-data",fn:function(n){var t=n.icon,o=n.message,s=n.filter;return[r("div",{staticClass:"full-width row flex-center text-center q-gutter-sm"},[r("q-icon",{attrs:{size:"2em",name:s?"filter_b_and_w":t}}),r("span",[e._v("\n          "+e._s(o)+"\n        ")])],1)]}}])})],1)},ce=[],de={name:"TableFranchise",props:{customer:{type:Object,default:function(){return{}}},importType:{type:[String,Number]},importPath:{type:String},status:{type:String}},mixins:[J["a"]],data:function(){var e={fuzzy:{value:null}};return{isEditingRow:null,isEditingRowIndex:null,formEditing:{},entries:[],columns:[{name:"name",field:function(e){return e.content.name},label:this.$t("Name"),headerClasses:"table-header-name",classes:"table-cell-name",align:"left",sortable:!1},{name:"code",field:"code",label:this.$t("Code"),headerClasses:"table-header-code",classes:"table-cell-code",align:"left",sortable:!1},{name:"location",field:"location",label:this.$t("Location"),headerClasses:"table-header-location",classes:"table-cell-location",align:"left",sortable:!1},{name:"address",field:"address",label:this.$t("Address"),headerClasses:"table-header-address",classes:"table-cell-address",align:"left",sortable:!1},{name:"approval_date",field:"approval_date",label:this.$t("SAT-HO Approval Date"),headerClasses:"table-header-approval_date",classes:"table-cell-approval_date",align:"left",sortable:!1},{name:"fo_approval_date",field:"fo_approval_date",label:this.$t("SAT-HO Approval Date for FO"),headerClasses:"table-header-fo_approval_date",classes:"table-cell-fo_approval_date",align:"left",sortable:!1},{name:"offering_letter_reference_number",field:"offering_letter_reference_number",label:this.$t("Offering Letter"),headerClasses:"table-header-offering_letter_reference_number",classes:"table-cell-offering_letter_reference_number",align:"left",sortable:!1},{name:"fo_offering_letter_reference_number",field:"fo_offering_letter_reference_number",label:this.$t("FO Offering Letter"),headerClasses:"table-header-fo_offering_letter_reference_number",classes:"table-cell-fo_offering_letter_reference_number",align:"left",sortable:!1},{name:"issuance_number",field:"issuance_number",label:this.$t("Basis for issuing invoice"),headerClasses:"table-header-issuance_number",classes:"table-cell-issuance_number",align:"left",sortable:!1},{name:"fo_issuance_number",field:"fo_issuance_number",label:this.$t("Basis for issuing FO invoice"),headerClasses:"table-header-fo_issuance_number",classes:"table-cell-fo_issuance_number",align:"left",sortable:!1},{name:"email",field:"email",label:this.$t("Email"),headerClasses:"table-header-email",classes:"table-cell-email",align:"left",sortable:!1},{name:"username",field:"username",label:this.$t("Username"),headerClasses:"table-header-username",classes:"table-cell-username",align:"left",sortable:!1},{name:"password",field:"password",label:this.$t("Password"),headerClasses:"table-header-password",classes:"table-cell-password",align:"left",sortable:!1},{name:"action",label:"",align:"right",headerClasses:"table-header-action",classes:"table-cell-action",required:!0}],visibleColumns:["id","code","location","name","created_at"],isLoading:!1,isAdvancedSearchVisible:!1,isFormEntryVisible:!1,isFormEntryReadonly:!1,isFormPasswordVisible:!1,formEntry:{},formPassword:{},pagination:{sortBy:"id",descending:!1,page:1,rowsPerPage:15,rowsNumber:0},search:e,advancedSearch:e,onEditingRowInputDebounced:Object(U["a"])(this.onEditingRowInput,250)}},mounted:function(){var e=this;return f()(l()().mark((function r(){return l()().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.onRequest();case 2:return r.next=4,e.$nextTick();case 4:case"end":return r.stop()}}),r)})))()},methods:{onEditingRowInput:function(e,r,n){this.entries[n].content[r]=e,delete this.entries[n].errors[r]},onRequest:function(e){var r=this;return f()(l()().mark((function n(){var t,o,s;return l()().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!r.isLoading){n.next=2;break}return n.abrupt("return");case 2:return e||(e={pagination:r.pagination}),r.isLoading=!0,t={table_pagination:d()({},e.pagination||{}),table_search:d()({},r.search),import_path:r.importPath},n.prev=5,n.next=8,r.$api.get("/v1/franchises/import/errors",{params:t});case 8:o=n.sent,s=o.data,"success"===s.status&&(r.entries=s.data.import_cache,r.pagination=d()(d()({},r.pagination),s.pagination)),n.next=16;break;case 13:n.prev=13,n.t0=n["catch"](5),r.$q.notify(n.t0);case 16:r.isLoading=!1;case 17:case"end":return n.stop()}}),n,null,[[5,13]])})))()},onSubmit:function(){var e=this;return f()(l()().mark((function r(){var n,t,o,s;return l()().wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=!1,t=0;case 2:if(!(t<e.entries.length)){r.next=9;break}if(!e.entries[t].errors||!Object.keys(e.entries[t].errors).length){r.next=6;break}return n=!0,r.abrupt("break",9);case 6:t++,r.next=2;break;case 9:if(!n){r.next=12;break}return e.$q.notify({message:e.$t("Please fix all errors first to continue"),type:"negative"}),r.abrupt("return");case 12:return r.prev=12,r.next=15,e.$api.post("/v1/franchises/import/fix",{import_cache:e.entries,distribution_center_id:e.$route.params.id});case 15:o=r.sent,s=o.data,"success"===s.status?e.pagination.hasMorePage?e.onRequest():e.$emit("success"):e.onRequest(),r.next=23;break;case 20:r.prev=20,r.t0=r["catch"](12),r.t0.validation?e.errors=d()({},r.t0.validation.errors):e.$q.notify(r.t0);case 23:case"end":return r.stop()}}),r,null,[[12,20]])})))()},onAdvancedSearch:function(){this.advancedSearch=JSON.parse(JSON.stringify(this.search)),this.isAdvancedSearchVisible=!0},onAdvancedSearchSubmit:function(){this.search=this.$utils.merge({},this.advancedSearch),this.onRequest(),this.isAdvancedSearchVisible=!1},onFormEntryCreate:function(){this.$router.push("/franchises/create"),this.formEntry={},this.isFormEntryReadonly=!1,this.isFormEntryVisible=!1},onFormEntrySuccess:function(){this.isFormEntryReadonly=!1,this.isFormEntryVisible=!1,this.onRequest()},onFormEntryCancel:function(){this.isFormEntryReadonly=!1,this.isFormEntryVisible=!1},onFormPasswordSuccess:function(){this.isFormPasswordVisible=!1},onFormPasswordCancel:function(){this.isFormPasswordVisible=!1},onView:function(e){this.customer.id?this.$router.push({path:"/franchises/".concat(e.id),query:{customer_id:this.customer.id}}):this.$router.push("/franchises/".concat(e.id)),this.formEntry=d()({},e),this.isFormEntryReadonly=!0,this.isFormEntryVisible=!1},onEdit:function(e){this.formEntry=d()({},e),this.isFormEntryReadonly=!1,this.isFormEntryVisible=!0},onEditPassword:function(e){this.formPassword=d()({},e),this.isFormPasswordVisible=!0},onDelete:function(e,r){var n=this;return f()(l()().mark((function t(){var o,s;return l()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.$api.delete("/v1/franchises/import/row/".concat(e.id));case 3:o=t.sent,s=o.data,"success"!==s.status?n.$q.notify({message:n.$t("Failed to delete row")}):(n.entries=n.entries.filter((function(e,n){return n!==r})),console.log(n.entries.length)),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),n.$q.notify(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},ue=de,fe=(n("4ce3"),Object(_["a"])(ue,le,ce,!1,null,null,null)),me=fe.exports;y()(fe,"components",{QCard:g["a"],QTable:G["a"],QBtn:E["a"],QTd:K["a"],QInput:W["a"],QTooltip:X["a"],QIcon:Y["a"],QField:Z["a"]});var pe={name:"FormImportFix",components:{TableDistributionCenter:re,TableStore:ae,TableFranchise:me},props:{loading:Boolean,importType:{type:[String,Number]},importPath:{type:String},templateUrl:{type:String}},data:function(){var e=this;return{internalValue:null,isLoading:!1,rules:{file:[function(r){return!!r||e.$t("{field} is required",{field:e.$t("File")})}],email:[function(r){return!!r||e.$t("{field} is required",{field:e.$t("Email")})},function(r){return!!r&&e.$utils.isEmail(r)||e.$t("{field} is invalid",{field:e.$t("Email")})}],password:[function(r){return!!r||e.$t("{field} is required",{field:e.$t("Password")})},function(r){return r&&r.length>=6||e.$t("{field} must be at least {length} characters",{field:e.$t("Password"),length:6})}],password_confirmation:[function(r){return!!r||e.$t("{field} is required",{field:e.$t("Password confirmation")})},function(r){return r===e.formEntry.password||e.$t("{field} does not match",{field:e.$t("Password confirmation")})}]},errors:{}}},computed:{isCreate:function(){return!this.formEntry.id}},methods:{onSubmit:function(){var e=this;return f()(l()().mark((function r(){var n,t,o,s,i,a,c;return l()().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e.loading&&!e.isLoading){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,e.$refs.form.validate();case 4:if(n=r.sent,n){r.next=7;break}return r.abrupt("return");case 7:if(e.isLoading=!0,t=null,o=e.importType,s=e.$constant.import_type,i={},o===s.DistributionCenter?t="/v1/distribution-centers/import/errors":o===s.Store?(t="/v1/stores/import/errors",i.distribution_center_id=e.$route.params.id):o===s.Franchise&&(t="/v1/franchises/import/errors",i.distribution_center_id=e.$route.params.id),t){r.next=17;break}return e.$q.notify({message:e.$t("Fatal error occurred. No import type given. Please try again."),type:"error"}),e.isLoading=!1,r.abrupt("return");case 17:return r.prev=17,r.next=20,e.$api.get(t,{params:i});case 20:a=r.sent,c=a.data,"success"===c.status&&(e.entries=c.data.entries,e.meta=c.data.meta),r.next=28;break;case 25:r.prev=25,r.t0=r["catch"](17),r.t0.validation?e.errors=d()({},r.t0.validation.errors):e.$q.notify(r.t0);case 28:e.isLoading=!1;case 29:case"end":return r.stop()}}),r,null,[[17,25]])})))()},cancel:function(){this.loading||this.isLoading||this.$emit("cancel")},onChange:function(e){this.errorMessages=[],e&&e.type?this.internalValue=e:this.internalValue=null},onRejected:function(e){var r,n=this.$t("Selected file is not accepted. Please use another one.");e&&e[0]&&e[0].failedPropValidation&&(r=e[0].failedPropValidation,"accept"===r?n=this.$t("The selected file is unsupported. Supported files: {entity}",{entity:".png, .jpg, .jpeg, .svg, .heic"}):"max-file-size"===r?n=this.$t("File size exceeds maximum limit: {max}",{max:this.$utils.humanStorageSize(this.maxFileSize)}):"max-dimension"===r&&(n=this.$t("Image resolution must be greater than {resolution}",{resolution:"".concat(this.minDimension,"x").concat(this.minDimension)}))),this.$q.notify({type:"negative",message:n})}}},_e=pe,ge=(n("dc69"),Object(_["a"])(_e,O,A,!1,null,"f4d10d16",null)),be=ge.exports;y()(ge,"components",{QCard:g["a"]});var we={name:"DialogImport",components:{FormImportUpload:q,FormImportCache:B,FormImportProcess:Q,FormImportFix:be},props:{importType:{type:[String,Number]},status:{type:String},importPath:{type:String},templateUrl:{type:String},processingPage:{type:[String,Number],default:function(){return 1}},hasError:{type:Boolean,default:!1},value:{type:Boolean,default:!1}},data:function(){return{visible:!1}},watch:{status:{immediate:!0,handler:function(e,r){e!==r&&"proceed"===e&&this.onFormImportFixSuccess()}},value:{immediate:!0,handler:function(e,r){e!==r&&e!==this.visible&&(this.visible=e)}},visible:function(e,r){e!==r&&e!==this.value&&this.$emit("input",e)}},methods:{onFormImportUploadCancel:function(){this.visible=!1},onFormImportUploadSuccess:function(e){this.$emit("update:status",{status:"uploaded",importPath:e})},onFormImportCacheSuccess:function(e){this.$emit("update:status",{status:"cached",importPath:e})},onFormImportProcessUpdated:function(e){var r=e.page,n=e.hasError;this.$emit("update:status",{status:"cached",importPath:this.importPath,processingPage:r||1,hasError:n})},onFormImportProcessSuccess:function(e){var r=e.hasError,n=r||this.hasError?"fix":"proceed";this.$emit("update:status",{status:n,importPath:this.importPath,hasError:r}),"proceed"===n&&this.onFormImportFixSuccess()},onFormImportFixSuccess:function(){this.$store.dispatch("imports/reset"),this.visible=!1,this.$emit("success")}}},he=we,ve=n("24e8"),xe=Object(_["a"])(he,t,o,!1,null,null,null);r["default"]=xe.exports;y()(xe,"components",{QDialog:ve["a"]})},"19c6":function(e,r,n){"use strict";n("2a2f")},"1e9b":function(e,r,n){},"23e4":function(e,r,n){},"2a2f":function(e,r,n){},3072:function(e,r,n){"use strict";n("23e4")},"321a":function(e,r,n){"use strict";n("1e9b")},"4ce3":function(e,r,n){"use strict";n("5708")},5708:function(e,r,n){},"697c":function(e,r,n){},"70f7":function(e,r,n){"use strict";n("697c")},a815:function(e,r,n){"use strict";n("f47a")},dc69:function(e,r,n){"use strict";n("de3e")},de3e:function(e,r,n){},f47a:function(e,r,n){}}]);