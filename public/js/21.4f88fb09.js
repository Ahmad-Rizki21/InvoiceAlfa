(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[21],{"39fd":function(t,e,r){"use strict";r("c818")},c818:function(t,e,r){},cd14:function(t,e,r){"use strict";r.r(e);r("ac1f"),r("5319");var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-cust page-cust-invoice container"},[e("div",{staticClass:"page-cust-header"},[e("q-toolbar-title",[t._v("\n      "+t._s(t.$t("Invoice"))+"\n    ")]),e("q-space"),e("q-btn",{attrs:{flat:"",icon:"print",round:"",padding:"sm"},on:{click:t.onPrint}})],1),t.pageErrorCode?e("div",{staticClass:"row q-col-gutter-sm row-bill-detail"},[404===t.pageErrorCode?e("div",{staticClass:"error-box"},[e("q-icon",{attrs:{name:"fmd_bad"}}),e("div",{staticClass:"error-message"},[t._v("\n        "+t._s(t.$t("Invoice could not be found"))+"\n      ")]),e("q-btn",{attrs:{color:"secondary",outline:""},on:{click:function(e){return e.preventDefault(),t.$router.replace("/")}}},[t._v("\n        "+t._s(t.$t("Back to home"))+"\n      ")])],1):e("div",{staticClass:"error-box"},[e("q-icon",{attrs:{name:"sentiment_very_dissatisfied"}}),e("div",{staticClass:"error-message"},[t._v("\n        "+t._s(t.$t("An error occurred while trying to get bill data"))+"\n      ")]),e("q-btn",{attrs:{color:"secondary",outline:""},on:{click:function(e){return e.preventDefault(),t.onRequest()}}},[t._v("\n        "+t._s(t.$t("Refresh"))+"\n      ")])],1)]):e("div",{staticClass:"row q-col-gutter-sm row-bill-detail"},[e("div",{staticClass:"col-xs-12"},[e("form-print-preview",{attrs:{invoice:t.entry,receipt:t.entry,stores:t.stores,"template-settings":t.formTemplateSettings,"show-signatures":""}})],1)]),t.printUrl?e("iframe",{ref:"printIframe",staticStyle:{opacity:"0",visibility:"hidden",width:"0",height:"0"},attrs:{src:t.printUrl}}):t._e()])},a=[],i=r("ded3"),s=r.n(i),o=r("7ec2"),c=r.n(o),u=r("c973"),d=r.n(u),l=r("602a"),p={name:"PageCustomerInvoice",components:{FormPrintPreview:l["a"]},meta:function(){try{document.head.querySelector('meta[name="viewport"]').remove()}catch(t){}return{title:this.$t("Invoice"),meta:{viewport:{name:"viewport",content:"width=210mm"}}}},breadcrumbs:function(){return["Dashboard"]},data:function(){return{entry:{},stores:[],formTemplateSettings:{},isFetching:!0,isLoading:!1,pageErrorCode:null,printUrl:null}},computed:{emptyInvoice:function(){return!this.isFetching&&!this.entry}},mounted:function(){var t=this;return d()(c()().mark((function e(){return c()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{document.body.style.backgroundColor="#525659"}catch(r){}return e.next=3,t.requestSettings();case 3:t.onRequest();case 4:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){try{document.body.style.backgroundColor=""}catch(t){}},methods:{onRequest:function(t){var e=this;return d()(c()().mark((function r(){var n,a,i,o;return c()().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e.isLoading){r.next=2;break}return r.abrupt("return");case 2:return t||(t={pagination:999999999}),e.pageErrorCode=null,e.isFetching=!0,e.isLoading=!0,n={table_pagination:s()({},t.pagination||{}),includes:"invoiceServices|invoicePaymentProofs"},r.prev=7,r.next=10,e.$api.get("/v1/invoices/".concat(e.$route.params.id),{params:n});case 10:if(a=r.sent,i=a.data,"success"!==i.status){r.next=18;break}if(e.entry=i.data.invoice,e.entry){r.next=17;break}return e.$router.replace("/"),r.abrupt("return");case 17:e.requestStores();case 18:r.next=24;break;case 20:r.prev=20,r.t0=r["catch"](7),o=r.t0.response||{},404===o.status?e.pageErrorCode=404:e.pageErrorCode=500;case 24:e.isFetching=!1,e.isLoading=!1;case 26:case"end":return r.stop()}}),r,null,[[7,20]])})))()},requestSettings:function(){var t=this;return d()(c()().mark((function e(){var r,n;return c()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$api.get("/v1/settings");case 3:r=e.sent,n=r.data,"success"===n.status&&(t.formTemplateSettings=n.data.settings),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),t.$q.notify(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},requestStores:function(){var t=this;return d()(c()().mark((function e(){var r,n,a;return c()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.entry.distribution_center_id){e.next=2;break}return e.abrupt("return");case 2:return r={distribution_center_id:t.entry.distribution_center_id},e.prev=3,e.next=6,t.$api.get("/v1/stores",{params:r});case 6:n=e.sent,a=n.data,"success"===a.status&&(t.stores=a.data.stores),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](3),t.$q.notify(e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})))()},onPrint:function(){var t=this;this.printUrl=this.$router.resolve("/invoices/".concat(this.entry.id,"/print")).href,this.$nextTick((function(){if(t.$refs.printIframe){var e=t.$refs.printIframe,r=e.contentWindow;r.doPrinting=!0,r.doPrint=function(){t.printUrl=null}}}))},formatMonth:function(t){var e=date.extractDate(t.due_at||t.published_at,"YYYY-MM-DD");return date.formatDate(e,"MMMM")},formatDueAt:function(t){var e=date.extractDate(t.due_at,"YYYY-MM-DD");return date.formatDate(e,"DD MMM YYYY")},formatTotal:function(t){return this.$utils.currency(t.total,{decimal:".",thousand:",",symbol:"Rp. "})||"-"},onGoBack:function(){this.$router.back()}}},f=p,v=(r("39fd"),r("2877")),m=r("9c40"),h=r("6ac5"),g=r("2c91"),b=r("0016"),w=r("65c6"),y=r("eebe"),_=r.n(y),k=Object(v["a"])(f,n,a,!1,null,null,null);e["default"]=k.exports;_()(k,"components",{QBtn:m["a"],QToolbarTitle:h["a"],QSpace:g["a"],QIcon:b["a"],QToolbar:w["a"]})}}]);